{"version":3,"sources":["webpack:///./src/glslang.ts","webpack:///./src/cube.ts","webpack:///./node_modules/gl-matrix/esm/common.js","webpack:///./node_modules/gl-matrix/esm/mat4.js","webpack:///./node_modules/gl-matrix/esm/vec3.js","webpack:///./node_modules/gl-matrix/esm/index.js","webpack:///./node_modules/dat.gui/build/dat.gui.module.js","webpack:///./node_modules/codemirror/lib/codemirror.js"],"names":["glslang","undefined","glslangModule","import","default","cubeVertexSize","cubePositionOffset","cubeColorOffset","cubeUVOffset","cubeVertexArray","Float32Array","EPSILON","ARRAY_TYPE","Array","RANDOM","Math","random","PI","create","out","clone","a","copy","fromValues","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","set","identity","transpose","a01","a02","a03","a12","a13","a23","invert","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","adjoint","determinant","multiply","b","b0","b1","b2","b3","translate","v","x","y","z","rotate","rad","axis","s","c","t","b12","b20","b21","b22","len","hypot","sin","cos","rotateX","rotateY","rotateZ","fromTranslation","fromScaling","fromRotation","fromXRotation","fromYRotation","fromZRotation","fromRotationTranslation","q","w","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","fromQuat2","translation","bx","by","bz","bw","ax","ay","az","aw","magnitude","getTranslation","mat","getScaling","getRotation","scaling","is1","is2","is3","sm11","sm12","sm13","sm21","sm22","sm23","sm31","sm32","sm33","trace","S","sqrt","fromRotationTranslationScale","sx","sy","sz","fromRotationTranslationScaleOrigin","o","ox","oy","oz","out0","out1","out2","out4","out5","out6","out8","out9","out10","fromQuat","yx","zx","zy","frustum","left","right","bottom","top","near","far","rl","tb","nf","perspective","fovy","aspect","f","tan","Infinity","perspectiveFromFieldOfView","fov","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","ortho","lr","bt","lookAt","eye","center","up","x0","x1","y0","y1","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","abs","targetTo","target","str","frob","add","subtract","multiplyScalar","multiplyScalarAndAdd","scale","exactEquals","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b13","b14","b15","max","i","arguments","length","mul","sub","divide","ceil","floor","min","round","scaleAndAdd","distance","squaredDistance","squaredLength","negate","inverse","normalize","dot","cross","lerp","hermite","d","factorTimes2","factor1","factor2","factor3","factor4","bezier","inverseFactor","inverseFactorTimesTwo","r","zScale","transformMat4","m","transformMat3","transformQuat","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","p","angle","tempA","tempB","cosine","acos","zero","vec","div","dist","sqrDist","sqrLen","forEach","stride","offset","count","fn","arg","l","colorToString","color","forceCSSHex","colorFormat","__state","conversionName","toString","g","h","toFixed","hex","ARR_EACH","prototype","ARR_SLICE","slice","Common","BREAK","extend","this","each","call","obj","isObject","Object","keys","key","isUndefined","bind","defaults","compose","toCall","args","apply","itr","scope","_key","defer","fnc","setTimeout","debounce","func","threshold","callImmediately","timeout","delayed","callNow","clearTimeout","toArray","isNull","isNaN","_isNaN","_x","isArray","constructor","isNumber","isString","isBoolean","isFunction","INTERPRETATIONS","litmus","conversions","THREE_CHAR_HEX","read","original","test","match","space","parseInt","write","SIX_CHAR_HEX","CSS_RGB","parseFloat","CSS_RGBA","HEX","RGB_ARRAY","RGBA_ARRAY","RGBA_OBJ","RGB_OBJ","HSVA_OBJ","HSV_OBJ","result","toReturn","interpret","family","conversion","tmpComponent","ColorMath","hsv_to_rgb","hi","rgb_to_hsv","delta","NaN","rgb_to_hex","hex_with_component","component_from_hex","componentIndex","value","_typeof","Symbol","iterator","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","getter","inherits","subClass","superClass","setPrototypeOf","__proto__","possibleConstructorReturn","self","ReferenceError","Color","Error","defineRGBComponent","component","componentHexIndex","recalculateRGB","defineHSVComponent","recalculateHSV","COMPONENTS","Controller","initialValue","domElement","document","createElement","__onChange","__onFinishChange","newValue","updateDisplay","getValue","EVENT_MAP_INV","HTMLEvents","MouseEvents","KeyboardEvents","k","e","CSS_VALUE_PIXELS","cssValueToPixels","val","dom","makeSelectable","elem","selectable","style","onselectstart","MozUserSelect","KhtmlUserSelect","unselectable","makeFullscreen","hor","vert","vertical","horizontal","position","fakeEvent","eventType","pars","aux","params","className","evt","createEvent","clientX","clientY","initMouseEvent","bubbles","cancelable","window","clickCount","init","initKeyboardEvent","initKeyEvent","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode","initEvent","dispatchEvent","event","newBool","bool","addEventListener","attachEvent","unbind","removeEventListener","detachEvent","addClass","classes","split","indexOf","push","join","replace","removeClass","removeAttribute","index","splice","hasClass","RegExp","getWidth","getComputedStyle","width","getHeight","height","getOffset","el","offsetParent","offsetLeft","offsetTop","isActive","activeElement","type","href","BooleanController","_Controller","_this2","_this","__prev","__checkbox","setAttribute","setValue","appendChild","checked","OptionController","opts","options","__select","map","element","opt","innerHTML","desiredValue","selectedIndex","StringController","onChange","__input","blur","numDecimals","NumberController","_params","__min","__max","__step","step","__impliedStep","pow","log","LN10","__precision","_v","minValue","maxValue","stepValue","NumberControllerBox","_NumberController","__truncationSuspended","prevY","onFinish","onMouseDrag","diff","onMouseUp","attempted","decimals","tenTo","i1","i2","o1","o2","NumberControllerSlider","preventDefault","bgRect","__background","getBoundingClientRect","onTouchMove","touches","onTouchEnd","__foreground","pct","FunctionController","text","__button","fire","ColorController","__color","__temp","__selector","__saturation_field","__field_knob","__field_knob_border","__hue_knob","__hue_field","__input_textShadow","onBlur","valueField","fieldDown","setSV","fieldUpSV","fieldDownH","setH","fieldUpH","toOriginal","fieldRect","_ref","padding","backgroundColor","boxShadow","border","borderRadius","zIndex","borderRight","marginRight","display","cursor","background","linearGradient","cssText","outline","textAlign","fontWeight","textShadow","mismatch","flip","_flip","marginLeft","marginTop","toHexString","vendors","vendor","css","cssContent","indoc","doc","injected","head","getElementsByTagName","saveDialogContents","ControllerFactory","requestAnimationFrame$1","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","CenteredDiv","backgroundElement","opacity","WebkitTransition","transition","body","hide","webkitTransform","layout","innerWidth","innerHeight","___$insertStyle","DEFAULT_DEFAULT_PRESET_NAME","SUPPORTS_LOCAL_STORAGE","localStorage","SAVE_DIALOGUE","autoPlaceVirgin","autoPlaceContainer","hideableGuis","GUI","__ul","__folders","__controllers","__rememberedObjects","__rememberedObjectIndecesToControllers","__listening","closeOnTop","autoPlace","DEFAULT_WIDTH","resizable","hideable","load","preset","scrollable","root","useLocalStorage","getItem","getLocalStorageHash","saveToLocalStorage","titleRow","getRoot","gui","__preset_select","setPresetSelectIndex","revert","setWidth","name","closed","CLASS_CLOSED","onResize","__closeButton","TEXT_OPEN","TEXT_CLOSED","setItem","CLASS_MAIN","savedGui","JSON","parse","CLASS_CLOSE_BUTTON","CLASS_CLOSE_TOP","insertBefore","childNodes","CLASS_CLOSE_BOTTOM","titleRowName","createTextNode","addRow","CLASS_AUTO_PLACE_CONTAINER","CLASS_AUTO_PLACE","__resizeHandler","onResizeDebounced","addResizeHandle","stringify","getSaveObject","saveToLocalStorageIfPossible","newDom","liBefore","li","removeListeners","markPresetModified","modified","recallSavedValue","controller","matchedIndex","controllerMap","remembered","presetMap","_add","factoryArgs","concat","before","__li","container","CLASS_CONTROLLER_ROW","__gui","_options","nextSibling","nextElementSibling","remove","_nextSibling","_name","firstElementChild","listen","box","method","pc","pb","returned","oldName","wasListening","newController","stopPropagation","borderLeftColor","isModified","augmentController","location","addPresetOption","setSelected","showHideExplain","explain","addSaveMenu","__save_row","firstChild","gears","button","button2","button3","select","getElementById","localStorageCheckBox","newConstructorTextArea","which","show","focus","save","presetName","prompt","saveAs","pmouseX","drag","dragStop","CLASS_DRAG","dragStart","__resize_handle","getCurrentPreset","useInitialValues","savedValues","toggleHide","CLASS_TOO_TALL","_keydownHandler","addColor","removeChild","destroy","subfolder","removeFolder","addFolder","newGuiParams","folders","folder","parentElement","open","close","node","offsetHeight","remember","updateDisplays","controllerArray","GUI$1","module","exports","userAgent","navigator","platform","gecko","ie_upto10","ie_11up","exec","edge","ie","ie_version","documentMode","webkit","qtwebkit","chrome","presto","safari","mac_geMountainLion","phantom","ios","android","mobile","mac","chromeOS","windows","presto_version","Number","flipCtrlCmd","captureRightClick","classTest","cls","range","rmClass","current","after","removeChildren","removeChildrenAndAdd","elt","tag","content","eltP","contains","child","nodeType","parentNode","host","activeElt","shadowRoot","joinClasses","as","createRange","start","end","endNode","setEnd","setStart","createTextRange","moveToElementText","collapse","moveEnd","moveStart","selectInput","copyObj","overwrite","prop","hasOwnProperty","countColumn","string","tabSize","startIndex","startValue","search","n","nextTab","selectionStart","selectionEnd","_e","Delayed","id","time","handler","onTimeout","array","Date","ms","scrollerGap","Pass","sel_dontScroll","scroll","sel_mouse","origin","sel_move","findColumn","goal","pos","col","skipped","spaceStrs","spaceStr","lst","arr","nothing","createObj","base","inst","nonASCIISingleCaseWordChar","isWordCharBasic","ch","toUpperCase","toLowerCase","isWordChar","helper","source","isEmpty","extendingChars","isExtendingChar","charCodeAt","skipExtendingChars","dir","charAt","findFirst","pred","from","to","midF","mid","bidiOther","getBidiPartAt","order","sticky","found","cur","bidiOrdering","lowTypes","arabicTypes","bidiRE","isNeutral","isStrong","countsAsLeft","countsAsNum","BidiSpan","level","direction","outerType","code","types","i$1","prev","i$2","type$1","i$3","prev$1","type$2","i$4","type$3","j","i$5","cur$1","type$4","i$6","end$1","replace$1","j$1","i$7","at","j$2","nstart","unshift","reverse","getOrder","line","noHandlers","on","emitter","map$$1","_handlers","getHandlers","off","signal","handlers","signalDOMEvent","cm","override","defaultPrevented","e_defaultPrevented","codemirrorIgnore","signalCursorActivity","cursorActivity","curOp","cursorActivityHandlers","hasHandler","eventMixin","ctor","e_preventDefault","returnValue","e_stopPropagation","cancelBubble","e_stop","e_target","srcElement","e_button","zwspSupported","badBidiRects","dragAndDrop","zeroWidthElement","measure","offsetWidth","hasBadBidiRects","txt","r0","r1","splitLinesAuto","nl","rt","hasSelection","getSelection","te","range$$1","ownerDocument","selection","compareEndPoints","hasCopyEvent","oncopy","badZoomedRects","modes","mimeModes","defineMode","mode","dependencies","resolveMode","spec","getMode","mfactory","modeObj","modeExtensions","exts","helperType","modeProps","prop$1","extendMode","properties","copyState","state","nstate","innerMode","info","startState","StringStream","lineOracle","lastColumnPos","lastColumnValue","lineStart","getLine","first","size","chunk","lines","children","chunkSize","getBetween","iter","getLines","updateLineHeight","lineNo","no","lineAtHeight","outer","lh","isLine","lineNumberFor","String","lineNumberFormatter","firstLineNumber","Pos","cmp","equalCursorPos","copyPos","maxPos","minPos","clipLine","clipPos","last","linelen","clipToLen","clipPosArray","eol","sol","peek","next","eat","eatWhile","eatSpace","skipToEnd","skipTo","backUp","column","indentation","pattern","consume","caseInsensitive","cased","substr","hideFirstChars","inner","lookAhead","oracle","baseToken","SavedContext","Context","maxLookAhead","baseTokens","baseTokenPos","highlightLine","context","forceToEnd","st","modeGen","lineClasses","runMode","loop","overlay","overlays","i_end","opaque","styles","bgClass","textClass","getLineStyles","updateFrontier","getContextBefore","resetState","maxHighlightLength","stateAfter","styleClasses","highlightFrontier","modeFrontier","precise","minindent","minline","lim","indented","findStartLine","saved","fromSaved","processLine","viewFrom","viewTo","nextLine","startAt","stream","callBlankLine","readToken","blankLine","token","Token","takeToken","asArray","tokens","extractLineClasses","output","lineClass","flattenSpans","curStart","curStyle","addModeClass","mName","sawReadOnlySpans","sawCollapsedSpans","MarkedSpan","marker","getMarkedSpanFor","spans","span","removeMarkedSpan","stretchSpansOverChange","change","full","oldFirst","markedSpans","oldLast","startCh","endCh","isInsert","old","nw","inclusiveLeft","insertLeft","endsAfter","inclusiveRight","markedSpansBefore","startsBefore","markedSpansAfter","sameLine","span$1","clearEmptySpans","newMarkers","gapMarkers","gap","clearWhenEmpty","detachMarkedSpans","detachLine","attachMarkedSpans","attachLine","extraLeft","extraRight","compareCollapsedMarkers","lenDiff","aPos","find","bPos","fromCmp","toCmp","collapsedSpanAtSide","sps","sp","collapsed","collapsedSpanAtStart","collapsedSpanAtEnd","collapsedSpanAround","conflictingCollapsedRange","lineNo$$1","visualLine","merged","visualLineNo","lineN","vis","visualLineEndNo","lastLine","lineIsHidden","widgetNode","lineIsHiddenInner","heightAtLine","lineObj","lineLength","found$1","findMaxLine","maxLine","maxLineLength","maxLineChanged","Line","estimateHeight","cleanUpLine","styleToClassCache","styleToClassCacheWithMode","interpretTokenStyle","cache","buildLineContent","lineView","builder","pre","trailingSpace","splitSpaces","getOption","rest","addToken","buildToken","buildTokenBadBidi","insertLineContent","externalMeasured","maps","caches","lastChild","querySelector","defaultSpecialCharPlaceholder","title","startStyle","endStyle","attributes","displayText","trailingBefore","spaceBefore","special","specialChars","mustWrap","createDocumentFragment","lastIndex","txt$1","tabWidth","specialCharPlaceholder","fullStyle","attr","part","buildCollapsedSpan","ignoreWidget","widget","input","needsContentAttribute","setUneditable","allText","spanStyle","spanEndStyle","spanStartStyle","nextChange","foundBookmarks","endStyles","upto","tokenText","LineView","visualLineContinued","hidden","buildViewArray","nextPos","view","operationGroup","orphanDelayedCallbacks","signalLater","list","delayedCallbacks","fireOrphanDelayed","updateLineForChanges","dims","changes","updateLineText","updateLineGutter","updateLineClasses","updateLineWidgets","ensureLineWrapped","replaceChild","getLineContent","ext","built","wrap","updateLineBackground","wrapClass","gutter","gutterBackground","gutterClass","fixedGutter","fixedPos","gutterTotalWidth","markers","gutterMarkers","lineNumbers","wrap$1","gutterWrap","lineNumber","gutterLeft","gutterSpecs","gutterWidth","alignable","insertLineWidgets","buildLineElement","insertLineWidgetsFor","allowAbove","widgets","ws","handleMouseEvents","positionLineWidget","above","noHScroll","wrapperWidth","coverGutter","paddingLeft","widgetHeight","parentStyle","gutters","wrapper","clientWidth","eventInWidget","getAttribute","sizer","mover","paddingTop","lineSpace","paddingVert","paddingH","cachedPaddingH","currentStyle","data","paddingRight","scrollGap","nativeBarWidth","displayWidth","scroller","barWidth","displayHeight","clientHeight","barHeight","mapFromLineView","measureChar","bias","measureCharPrepared","prepareMeasureForLine","findViewForLine","findViewIndex","getDimensions","forceUpdate","lineMeasure","updateExternalMeasurement","rect","hasHeights","prepared","varHeight","wrapping","lineWrapping","curWidth","heights","rects","getClientRects","ensureLineHeights","place","nodeAndOffsetInLineMap","coverStart","coverEnd","getUsefulRect","screen","logicalXDPI","deviceXDPI","normal","fromRange","hasBadZoomedRects","scaleX","scaleY","logicalYDPI","deviceYDPI","maybeUpdateRectForZooming","rSpan","charWidth","nullRect","rtop","rbot","bot","bogus","singleCursorHeightPerLine","rbottom","measureCharInner","measureText","mStart","mEnd","clearLineMeasurementCacheFor","clearLineMeasurementCache","externalMeasure","clearCaches","cachedCharWidth","cachedTextHeight","lineNumChars","pageScrollX","pageXOffset","documentElement","scrollLeft","pageScrollY","pageYOffset","scrollTop","widgetTopHeight","intoCoordSystem","includeWidgets","yOff","viewOffset","lOff","xOff","fromCoordSystem","coords","localBox","lineSpaceBox","charCoords","cursorCoords","preparedMeasure","getBidi","partPos","other","estimateCoords","PosWithInfo","outside","xRel","coordsChar","coordsCharInner","rangeEnd","wrappedLineExtent","begin","wrappedLineExtentChar","boxIsAfter","widgetHeight$$1","ltr","coordsBidiPartWrapped","coordsBidiPart","baseX","chAround","boxAround","atLeft","atStart","_lineNo","ref","closestDist","endX","textHeight","anchor","clientLeft","compensateForHScroll","th","perLine","widgetsHeight","estimateLineHeights","est","estHeight","posFromMouse","liberal","forRect","colDiff","regChange","lendiff","updateLineNumbers","viewChanged","resetView","cut","viewCuttingPoint","cut$1","cutTop","cutBot","regLineChange","oldN","newN","countDirtyView","dirty","updateSelection","showSelection","prepareSelection","primary","curFragment","cursors","selFragment","sel","ranges","primIndex","empty","showCursorWhenSelecting","drawSelectionCursor","drawSelectionRange","cursorHeight","otherCursor","cmpCoords","fragment","leftSide","rightSide","sizerWidth","docLTR","drawForLine","fromArg","toArg","lineLen","wrapX","side","extent","iterateBidiSections","fromPos","toPos","openStart","openEnd","openRight","topLeft","topRight","botLeft","botRight","sFrom","sTo","fromLine","toLine","singleVLine","leftEnd","rightStart","restartBlink","focused","clearInterval","blinker","cursorDiv","visibility","cursorBlinkRate","setInterval","ensureFocus","onFocus","delayBlurEvent","delayingBlurEvent","readOnly","selForContextMenu","reset","receivedFocus","shift","updateHeightsInViewport","prevBottom","lineDiv","updateWidgetHeight","chWidth","visibleLines","viewport","ensure","ensureFrom","ensureTo","calculateScrollPos","snapMargin","screentop","docBottom","atTop","atBottom","newTop","screenleft","screenw","tooWide","addToScrollTop","resolveScrollToPos","ensureCursorVisible","getCursor","scrollToPos","margin","cursorScrollMargin","scrollToCoords","scrollToCoordsRange","sPos","updateScrollTop","updateDisplaySimple","setScrollTop","startWorker","forceScroll","scrollHeight","scrollbars","setScrollLeft","isScroller","scrollWidth","alignHorizontally","measureForScrollbars","gutterW","docH","viewHeight","viewWidth","barLeft","docHeight","NativeScrollbars","horiz","tabIndex","checkedZeroWidth","minHeight","minWidth","update","needsH","needsV","sWidth","totalHeight","totalWidth","zeroWidthHack","disableHoriz","enableZeroWidthBar","disableVert","pointerEvents","bar","delay","maybeDisable","elementFromPoint","clear","NullScrollbars","updateScrollbars","startWidth","startHeight","updateScrollbarsInner","sizes","paddingBottom","heightForcer","borderBottom","scrollbarFiller","coverGutterNextToScrollbar","gutterFiller","scrollbarModel","initScrollbars","scrollbarStyle","nextOpId","startOperation","op","updateInput","typing","changeObjs","cursorActivityCalled","selectionChanged","updateMaxLine","ops","ownsGroup","endOperation","endCb","group","callbacks","fireCallbacksForOps","finishOperation","endOperation_R1","updatedDisplay","mustUpdate","updateDisplayIfNeeded","endOperation_R2","endOperation_W2","endOperation_finish","endOperations","scrollbarsClipped","marginBottom","borderRightWidth","maybeClipScrollbars","DisplayUpdate","barMeasure","adjustWidthTo","maxScrollLeft","preparedSelection","takeFocus","setDocumentHeight","postUpdateDisplay","wheelStartX","wheelStartY","doScroll","scrollNode","scrollIntoView","maybeScrollWindow","limit","changed","endCoords","scrollPos","startTop","startLeft","scrollPosIntoView","maybeHiddenMarkers","unhidden","maybeUnhiddenMarkers","finish","runInOp","operation","methodOp","docMethodOp","highlight","highlightWorker","workTime","changedLines","oldStyles","highlighted","oldCls","newCls","ischange","workDelay","force","visible","editorIsHidden","wrapperHeight","oldDisplayWidth","events","renderedView","maybeUpdateLineNumberWidth","viewportMargin","different","lastWrapHeight","lastWrapWidth","adjustView","toUpdate","selSnapshot","hasFocus","active","anchorNode","anchorOffset","focusNode","focusOffset","selectionSnapshot","updateNumbersFrom","rm","currentWheelTarget","updateNumber","patchDisplay","snapshot","removeAllRanges","addRange","restoreSelection","selectionDiv","reportedViewFrom","reportedViewTo","updateGutterSpace","alignWidgets","comp","align","innerW","lineGutter","lineNumInnerWidth","lineNumWidth","getGutters","sawLineNumbers","renderGutters","specs","gElt","updateGutters","Display","draggable","wheelDX","wheelDY","activeTouch","wheelSamples","wheelPixelsPerUnit","wheelEventDelta","dx","wheelDeltaX","dy","wheelDeltaY","detail","HORIZONTAL_AXIS","VERTICAL_AXIS","wheelDelta","wheelEventPixels","onScrollWheel","canScrollX","canScrollY","pixels","movedX","movedY","sample","Selection","equals","here","there","deepCopy","Range","somethingSelected","normalizeSelection","mayTouch","selectionsMayTouch","prim","sort","inv","simpleSelection","changeEnd","adjustForChange","computeSelAfterChange","offsetPos","loadMode","modeOption","resetModeState","isWholeLineUpdate","wholeLineUpdateBefore","updateDoc","estimateHeight$$1","spansFor","updateLine","linesFor","firstLine","lastText","lastSpans","nlines","insert","added","added$1","added$2","linkedDocs","sharedHistOnly","propagate","skip","sharedHist","linked","rel","shared","attachDoc","setDirectionClass","History","startGen","done","undone","undoDepth","lastModTime","lastSelTime","lastOp","lastSelOp","lastOrigin","lastSelOrigin","generation","maxGeneration","historyChangeFromChange","histChange","attachLocalSpans","clearSelectionEvents","pop","addChangeToHistory","selAfter","opId","hist","history","historyEventDelay","lastChangeEvent","pushSelectionToHistory","addSelectionToHistory","selectionEventCanBeMerged","clearRedo","dest","existing","removeClearedSpans","explicitlyCleared","mergeOldSpans","getOldSpans","stretched","oldCur","stretchCur","copyHistoryArray","newGroup","instantiateSel","newChanges","extendRange","posBefore","extendSelection","setSelection","extendSelections","heads","replaceOneSelection","setSimpleSelection","setSelectionReplaceHistory","setSelectionNoUndo","filterSelectionChange","setSelectionInner","skipAtomicInSelection","reCheckSelection","mayClear","newAnchor","skipAtomic","newHead","skipAtomicInner","oldPos","preventCursorLeft","selectLeft","preventCursorRight","selectRight","atomic","movePos","cantEdit","selectAll","filterChange","canceled","cancel","makeChange","ignoreReadOnly","suppressEdits","mark","parts","mk","newParts","dfrom","dto","removeReadOnlyRanges","makeChangeInner","makeChangeSingleDoc","rebased","rebaseHist","makeChangeFromHistory","allowSelectionOnly","suppress","antiChanges","filter","shiftDoc","removed","recomputeMaxLength","checkWidthStart","retreatFrontier","changesHandler","changeHandler","makeChangeSingleDocInEditor","replaceRange","assign","splitLines","rebaseHistSelSingle","rebaseHistArray","ok","copied","changeLine","handle","changeType","LeafChunk","BranchChunk","removeInner","insertInner","iterN","oldHeight","remaining","leaf","maybeSpill","me","sibling","myIndex","used","LineWidget","adjustScrollWhenAboveVisible","this$1","oldH","nextMarkerId","TextMarker","markText","cloneNode","isParent","SharedTextMarker","markTextShared","replacedWith","addToHistory","curLine","addMarkedSpan","clearOnEnter","clearHistory","withOp","visual","dHeight","findSharedMarkers","findMarks","detachSharedMarkers","subMarker","nextDocId","Doc","lineSep","cleanGeneration","lineSeparator","getRange","getLineHandle","getLineNumber","getLineHandleVisualStart","lineCount","listSelections","setCursor","extendSelectionsBy","setSelections","addSelection","getSelections","replaceSelection","dup","replaceSelections","newSel","hint","oldPrev","newPrev","computeReplacedSel","undo","redo","undoSelection","redoSelection","setExtending","getExtending","historySize","markClean","changeGeneration","forceSplit","isClean","gen","getHistory","setHistory","histData","setGutterMarker","gutterID","clearGutter","lineInfo","addLineClass","where","removeLineClass","addLineWidget","insertAt","aboveVisible","removeLineWidget","setBookmark","realOpts","findMarksAt","getAllMarks","posFromIndex","sepSize","indexFromPos","copyHistory","linkedDoc","mFrom","mTo","subMark","copySharedMarkers","unlinkDoc","CodeMirror","splitIds","iterLinkedDocs","getEditor","setDirection","eachLine","lastDrop","onDrop","clearDragCursor","files","dataTransfer","isReadOnly","FileReader","File","loadFile","file","allowDropFileTypes","reader","onload","readAsText","draggingText","text$1","getData","selected","dragCursor","forEachCodeMirror","getElementsByClassName","byClass","editors","globalsRegistered","ensureGlobalHandlers","resizeTimer","setSize","keyNames","3","8","9","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","44","45","46","59","61","91","92","93","106","107","109","110","111","145","173","186","187","188","189","190","191","192","219","220","221","222","63232","63233","63234","63235","63272","63273","63275","63276","63277","63302","fromCharCode","keyMap","normalizeKeyName","alt","ctrl","cmd","mod","normalizeKeyMap","keymap","keyname","lookupKey","getKeyMap","fallthrough","isModifierKey","addModifierNames","noShift","keyName","altGraphKey","deleteNearSelection","compute","kill","toKill","replaced","moveCharLogically","moveLogically","endOfLine","visually","prep","targetTop","basic","pcDefault","emacsy","macDefault","commands","singleSelection","killLine","deleteLine","delLineLeft","delWrappedLineLeft","delWrappedLineRight","rightPos","goDocStart","goDocEnd","goLineStart","goLineStartSmart","lineStartSmart","goLineEnd","visualLineEnd","lineEnd","goLineRight","goLineLeft","goLineLeftSmart","goLineUp","moveV","goLineDown","goPageUp","goPageDown","goCharLeft","moveH","goCharRight","goColumnLeft","goColumnRight","goWordLeft","goGroupRight","goGroupLeft","goWordRight","delCharBefore","deleteH","delCharAfter","delWordBefore","delWordAfter","delGroupBefore","delGroupAfter","indentAuto","indentSelection","indentMore","indentLess","insertTab","insertSoftTab","spaces","defaultTab","execCommand","transposeChars","newlineAndIndent","sels","indentLine","openLine","toggleOverwrite","firstNonWS","inWS","doHandleBinding","bound","dropShift","ensurePolled","prevShift","stopSeq","dispatchKey","seq","keySeq","dispatchKeyInner","keyMaps","extraKeys","lookupKeyForEditor","handleKeyBinding","motion","lastStoppedKey","onKeyDown","handled","showCrossHair","onKeyUp","onKeyPress","handleCharBinding","lastClick","lastDoubleClick","PastClick","onMouseDown","supportsTouch","clickInGutter","repeat","now","compare","clickRepeat","selectingText","handleMappedButton","contained","behavior","option","unit","addNew","moveOnDrag","configureMouse","dragDrop","moved","dragEnd","mouseMove","e2","leftButtonStartDrag","ourRange","ourIndex","startSel","rangeForUnit","lastPos","extendTo","startCol","posCol","leftPos","oldRange","ranges$1","anchorLine","boundary","headIndex","usePart","bidiSimplify","editorSize","counter","move","buttons","curCount","leftButtonSelect","leftButtonDown","onContextMenu","findWordAt","gutterEvent","prevent","mX","mY","lineBox","contextMenuInGutter","themeChanged","theme","Init","optionHandlers","dragDropChanged","funcs","dragFunctions","toggle","enter","over","leave","drop","wrappingChanged","inputStyles","inputStyle","pasteIncoming","cutIncoming","autofocus","word","touchFinished","prevTouch","finishTouch","farAway","touch","radiusX","radiusY","isMouseLikeTouchEvent","pageX","pageY","frag","onDragOver","setData","effectAllowed","setDragImage","img","src","_top","onDragStart","inp","getField","registerEventHandlers","finishInit","initHooks","textRendering","how","aggressive","indent","curSpace","curSpaceString","indentUnit","indentString","indentWithTabs","pos$1","defineInitHook","lastCopied","setLastCopied","newLastCopied","applyTextInput","inserted","deleted","recent","paste","textLines","multiPaste","pasteLinesPerSelection","lineWise","changeEvent","triggerElectric","handlePaste","pasted","clipboardData","disableInput","electricChars","smartIndent","getModeAt","electricInput","copyableRanges","lineRange","disableBrowserMagic","field","spellcheck","autocorrect","autocapitalize","hiddenTextarea","findPosH","origDir","moveOnce","boundToLine","bidi","mv","getWrappedLineExtent","moveInStorageOrder","searchInVisualLine","getRes","res","nextCh","moveVisually","sawType","getHelper","hitSide","findPosV","pageSize","moveAmount","ContentEditableInput","lastAnchorNode","lastAnchorOffset","lastFocusNode","lastFocusOffset","polling","composing","gracePeriod","readDOMTimeout","posToDOM","badPos","bad","domToPos","lineNode","locateNodeInLineView","textNode","topNode","nodeValue","curNode","textContent","previousSibling","dist$1","onCopyCut","lineWiseCopyCut","clearData","kludge","hadFocus","showPrimarySelection","updateFromDOM","readFromDOMSoon","forceCompositionEnd","showMultipleSelections","curAnchor","curFocus","rng","rangeCount","getRangeAt","startGracePeriod","rememberSelection","selectionInEditor","commonAncestorContainer","pollSelection","pollInterval","poll","scan","isInGutter","triggerOnKeyDown","pollContent","fromIndex","fromNode","toNode","toIndex","newText","closing","extraLinebreak","addText","walk","cmText","markerID","isBlock","nodeName","domTextBetween","oldText","cutFront","cutEnd","oldTop","maxCutFront","newBot","oldBot","maxCutEnd","chFrom","chTo","contentEditable","readOnlyChanged","resetPosition","TextareaInput","prevInput","pollingFast","createField","textarea","prepareCopyCut","fastPoll","Event","_display","moveInputWithCursor","headPos","wrapOff","lineOff","teTop","teLeft","drawn","contextMenuPending","slowPoll","missed","same","resetSelectionOnContextMenu","oldScrollY","oldCSS","oldWrapperCSS","wrapperBox","scrollY","scrollTo","rehide","detectingSelectAll","prepareSelectAllHack","mouseup","extval","disabled","deflt","notOnInit","defineOption","newBreaks","refresh","getInputField","detach","attach","integer","defineOptions","helpers","setOption","getDoc","addKeyMap","removeKeyMap","addOverlay","score","priority","insertSorted","modeSpec","removeOverlay","newRanges","getTokenAt","getLineTokens","getTokenTypeAt","getHelpers","help","_global","getStateAfter","defaultTextHeight","defaultCharWidth","getViewport","addWidget","vspace","hspace","triggerOnKeyPress","triggerOnKeyUp","triggerOnMouseDown","amount","rtlMoveVisually","goalColumn","goals","startChar","check","getScrollInfo","scrollToRange","swapDoc","phrase","phraseText","phrases","getWrapperElement","getScrollerElement","getGutterElement","registerHelper","registerGlobalHelper","predicate","addEditorMethods","dontDelegate","defineMIME","mime","defineExtension","defineDocExtension","fromTextArea","tabindex","placeholder","realSubmit","form","leaveSubmitMethodAlone","submit","wrappedSubmit","getTextArea","toTextArea","cmpPos","addLegacyProps","version","factory"],"mappings":"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","file":"common-6b976c.js","sourcesContent":["let glslang = undefined;\nexport default async function() {\n  if (glslang !== undefined) return glslang;\n  // @ts-ignore\n  const glslangModule = await import(/* webpackIgnore: true */ 'https://unpkg.com/@webgpu/glslang@0.0.7/web/glslang.js');\n  glslang = await glslangModule.default();\n  return glslang;\n}\n","export const cubeVertexSize = 4 * 10; // Byte size of one cube vertex.\nexport const cubePositionOffset = 0;\nexport const cubeColorOffset = 4 * 4; // Byte offset of cube vertex color attribute.\nexport const cubeUVOffset = 4 * 8;\nexport const cubeVertexArray = new Float32Array([\n    // float4 position, float4 color, float2 uv,\n    1, -1, 1, 1,   1, 0, 1, 1,  1, 1,\n    -1, -1, 1, 1,  0, 0, 1, 1,  0, 1,\n    -1, -1, -1, 1, 0, 0, 0, 1,  0, 0,\n    1, -1, -1, 1,  1, 0, 0, 1,  1, 0,\n    1, -1, 1, 1,   1, 0, 1, 1,  1, 1,\n    -1, -1, -1, 1, 0, 0, 0, 1,  0, 0,\n\n    1, 1, 1, 1,    1, 1, 1, 1,  1, 1,\n    1, -1, 1, 1,   1, 0, 1, 1,  0, 1,\n    1, -1, -1, 1,  1, 0, 0, 1,  0, 0,\n    1, 1, -1, 1,   1, 1, 0, 1,  1, 0,\n    1, 1, 1, 1,    1, 1, 1, 1,  1, 1,\n    1, -1, -1, 1,  1, 0, 0, 1,  0, 0,\n\n    -1, 1, 1, 1,   0, 1, 1, 1,  1, 1,\n    1, 1, 1, 1,    1, 1, 1, 1,  0, 1,\n    1, 1, -1, 1,   1, 1, 0, 1,  0, 0,\n    -1, 1, -1, 1,  0, 1, 0, 1,  1, 0,\n    -1, 1, 1, 1,   0, 1, 1, 1,  1, 1,\n    1, 1, -1, 1,   1, 1, 0, 1,  0, 0,\n\n    -1, -1, 1, 1,  0, 0, 1, 1,  1, 1,\n    -1, 1, 1, 1,   0, 1, 1, 1,  0, 1,\n    -1, 1, -1, 1,  0, 1, 0, 1,  0, 0,\n    -1, -1, -1, 1, 0, 0, 0, 1,  1, 0,\n    -1, -1, 1, 1,  0, 0, 1, 1,  1, 1,\n    -1, 1, -1, 1,  0, 1, 0, 1,  0, 0,\n\n    1, 1, 1, 1,    1, 1, 1, 1,  1, 1,\n    -1, 1, 1, 1,   0, 1, 1, 1,  0, 1,\n    -1, -1, 1, 1,  0, 0, 1, 1,  0, 0,\n    -1, -1, 1, 1,  0, 0, 1, 1,  0, 0,\n    1, -1, 1, 1,   1, 0, 1, 1,  1, 0,\n    1, 1, 1, 1,    1, 1, 1, 1,  1, 1,\n\n    1, -1, -1, 1,  1, 0, 0, 1,  1, 1,\n    -1, -1, -1, 1, 0, 0, 0, 1,  0, 1,\n    -1, 1, -1, 1,  0, 1, 0, 1,  0, 0,\n    1, 1, -1, 1,   1, 1, 0, 1,  1, 0,\n    1, -1, -1, 1,  1, 0, 0, 1,  1, 1,\n    -1, 1, -1, 1,  0, 1, 0, 1,  0, 0,\n]);\n","/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Type} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {mat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {mat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to translate\r\n * @param {vec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {vec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {quat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {mat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @param {vec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n;\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {mat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return 'mat4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ', ' + a[9] + ', ' + a[10] + ', ' + a[11] + ', ' + a[12] + ', ' + a[13] + ', ' + a[14] + ', ' + a[15] + ')';\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {mat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\n\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {vec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the source vector\r\n * @returns {vec3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to floor\r\n * @returns {vec3} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to round\r\n * @returns {vec3} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to negate\r\n * @returns {vec3} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to invert\r\n * @returns {vec3} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {quat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateX(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(c) - p[2] * Math.sin(c);\n  r[2] = p[1] * Math.sin(c) + p[2] * Math.cos(c); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateY(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(c) + p[0] * Math.cos(c);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(c) - p[0] * Math.sin(c); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateZ(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(c) - p[1] * Math.sin(c);\n  r[1] = p[0] * Math.sin(c) + p[1] * Math.cos(c);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {vec3} a The first operand\r\n * @param {vec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var tempA = fromValues(a[0], a[1], a[2]);\n  var tempB = fromValues(b[0], b[1], b[2]);\n  normalize(tempA, tempA);\n  normalize(tempB, tempB);\n  var cosine = dot(tempA, tempB);\n\n  if (cosine > 1.0) {\n    return 0;\n  } else if (cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ')';\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\nimport * as mat2 from \"./mat2.js\";\nimport * as mat2d from \"./mat2d.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as mat4 from \"./mat4.js\";\nimport * as quat from \"./quat.js\";\nimport * as quat2 from \"./quat2.js\";\nimport * as vec2 from \"./vec2.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\nexport { glMatrix, mat2, mat2d, mat3, mat4, quat, quat2, vec2, vec3, vec4 };","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nfunction ___$insertStyle(css) {\n  if (!css) {\n    return;\n  }\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  var style = document.createElement('style');\n\n  style.setAttribute('type', 'text/css');\n  style.innerHTML = css;\n  document.head.appendChild(style);\n\n  return css;\n}\n\nfunction colorToString (color, forceCSSHex) {\n  var colorFormat = color.__state.conversionName.toString();\n  var r = Math.round(color.r);\n  var g = Math.round(color.g);\n  var b = Math.round(color.b);\n  var a = color.a;\n  var h = Math.round(color.h);\n  var s = color.s.toFixed(1);\n  var v = color.v.toFixed(1);\n  if (forceCSSHex || colorFormat === 'THREE_CHAR_HEX' || colorFormat === 'SIX_CHAR_HEX') {\n    var str = color.hex.toString(16);\n    while (str.length < 6) {\n      str = '0' + str;\n    }\n    return '#' + str;\n  } else if (colorFormat === 'CSS_RGB') {\n    return 'rgb(' + r + ',' + g + ',' + b + ')';\n  } else if (colorFormat === 'CSS_RGBA') {\n    return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n  } else if (colorFormat === 'HEX') {\n    return '0x' + color.hex.toString(16);\n  } else if (colorFormat === 'RGB_ARRAY') {\n    return '[' + r + ',' + g + ',' + b + ']';\n  } else if (colorFormat === 'RGBA_ARRAY') {\n    return '[' + r + ',' + g + ',' + b + ',' + a + ']';\n  } else if (colorFormat === 'RGB_OBJ') {\n    return '{r:' + r + ',g:' + g + ',b:' + b + '}';\n  } else if (colorFormat === 'RGBA_OBJ') {\n    return '{r:' + r + ',g:' + g + ',b:' + b + ',a:' + a + '}';\n  } else if (colorFormat === 'HSV_OBJ') {\n    return '{h:' + h + ',s:' + s + ',v:' + v + '}';\n  } else if (colorFormat === 'HSVA_OBJ') {\n    return '{h:' + h + ',s:' + s + ',v:' + v + ',a:' + a + '}';\n  }\n  return 'unknown format';\n}\n\nvar ARR_EACH = Array.prototype.forEach;\nvar ARR_SLICE = Array.prototype.slice;\nvar Common = {\n  BREAK: {},\n  extend: function extend(target) {\n    this.each(ARR_SLICE.call(arguments, 1), function (obj) {\n      var keys = this.isObject(obj) ? Object.keys(obj) : [];\n      keys.forEach(function (key) {\n        if (!this.isUndefined(obj[key])) {\n          target[key] = obj[key];\n        }\n      }.bind(this));\n    }, this);\n    return target;\n  },\n  defaults: function defaults(target) {\n    this.each(ARR_SLICE.call(arguments, 1), function (obj) {\n      var keys = this.isObject(obj) ? Object.keys(obj) : [];\n      keys.forEach(function (key) {\n        if (this.isUndefined(target[key])) {\n          target[key] = obj[key];\n        }\n      }.bind(this));\n    }, this);\n    return target;\n  },\n  compose: function compose() {\n    var toCall = ARR_SLICE.call(arguments);\n    return function () {\n      var args = ARR_SLICE.call(arguments);\n      for (var i = toCall.length - 1; i >= 0; i--) {\n        args = [toCall[i].apply(this, args)];\n      }\n      return args[0];\n    };\n  },\n  each: function each(obj, itr, scope) {\n    if (!obj) {\n      return;\n    }\n    if (ARR_EACH && obj.forEach && obj.forEach === ARR_EACH) {\n      obj.forEach(itr, scope);\n    } else if (obj.length === obj.length + 0) {\n      var key = void 0;\n      var l = void 0;\n      for (key = 0, l = obj.length; key < l; key++) {\n        if (key in obj && itr.call(scope, obj[key], key) === this.BREAK) {\n          return;\n        }\n      }\n    } else {\n      for (var _key in obj) {\n        if (itr.call(scope, obj[_key], _key) === this.BREAK) {\n          return;\n        }\n      }\n    }\n  },\n  defer: function defer(fnc) {\n    setTimeout(fnc, 0);\n  },\n  debounce: function debounce(func, threshold, callImmediately) {\n    var timeout = void 0;\n    return function () {\n      var obj = this;\n      var args = arguments;\n      function delayed() {\n        timeout = null;\n        if (!callImmediately) func.apply(obj, args);\n      }\n      var callNow = callImmediately || !timeout;\n      clearTimeout(timeout);\n      timeout = setTimeout(delayed, threshold);\n      if (callNow) {\n        func.apply(obj, args);\n      }\n    };\n  },\n  toArray: function toArray(obj) {\n    if (obj.toArray) return obj.toArray();\n    return ARR_SLICE.call(obj);\n  },\n  isUndefined: function isUndefined(obj) {\n    return obj === undefined;\n  },\n  isNull: function isNull(obj) {\n    return obj === null;\n  },\n  isNaN: function (_isNaN) {\n    function isNaN(_x) {\n      return _isNaN.apply(this, arguments);\n    }\n    isNaN.toString = function () {\n      return _isNaN.toString();\n    };\n    return isNaN;\n  }(function (obj) {\n    return isNaN(obj);\n  }),\n  isArray: Array.isArray || function (obj) {\n    return obj.constructor === Array;\n  },\n  isObject: function isObject(obj) {\n    return obj === Object(obj);\n  },\n  isNumber: function isNumber(obj) {\n    return obj === obj + 0;\n  },\n  isString: function isString(obj) {\n    return obj === obj + '';\n  },\n  isBoolean: function isBoolean(obj) {\n    return obj === false || obj === true;\n  },\n  isFunction: function isFunction(obj) {\n    return Object.prototype.toString.call(obj) === '[object Function]';\n  }\n};\n\nvar INTERPRETATIONS = [\n{\n  litmus: Common.isString,\n  conversions: {\n    THREE_CHAR_HEX: {\n      read: function read(original) {\n        var test = original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);\n        if (test === null) {\n          return false;\n        }\n        return {\n          space: 'HEX',\n          hex: parseInt('0x' + test[1].toString() + test[1].toString() + test[2].toString() + test[2].toString() + test[3].toString() + test[3].toString(), 0)\n        };\n      },\n      write: colorToString\n    },\n    SIX_CHAR_HEX: {\n      read: function read(original) {\n        var test = original.match(/^#([A-F0-9]{6})$/i);\n        if (test === null) {\n          return false;\n        }\n        return {\n          space: 'HEX',\n          hex: parseInt('0x' + test[1].toString(), 0)\n        };\n      },\n      write: colorToString\n    },\n    CSS_RGB: {\n      read: function read(original) {\n        var test = original.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n        if (test === null) {\n          return false;\n        }\n        return {\n          space: 'RGB',\n          r: parseFloat(test[1]),\n          g: parseFloat(test[2]),\n          b: parseFloat(test[3])\n        };\n      },\n      write: colorToString\n    },\n    CSS_RGBA: {\n      read: function read(original) {\n        var test = original.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n        if (test === null) {\n          return false;\n        }\n        return {\n          space: 'RGB',\n          r: parseFloat(test[1]),\n          g: parseFloat(test[2]),\n          b: parseFloat(test[3]),\n          a: parseFloat(test[4])\n        };\n      },\n      write: colorToString\n    }\n  }\n},\n{\n  litmus: Common.isNumber,\n  conversions: {\n    HEX: {\n      read: function read(original) {\n        return {\n          space: 'HEX',\n          hex: original,\n          conversionName: 'HEX'\n        };\n      },\n      write: function write(color) {\n        return color.hex;\n      }\n    }\n  }\n},\n{\n  litmus: Common.isArray,\n  conversions: {\n    RGB_ARRAY: {\n      read: function read(original) {\n        if (original.length !== 3) {\n          return false;\n        }\n        return {\n          space: 'RGB',\n          r: original[0],\n          g: original[1],\n          b: original[2]\n        };\n      },\n      write: function write(color) {\n        return [color.r, color.g, color.b];\n      }\n    },\n    RGBA_ARRAY: {\n      read: function read(original) {\n        if (original.length !== 4) return false;\n        return {\n          space: 'RGB',\n          r: original[0],\n          g: original[1],\n          b: original[2],\n          a: original[3]\n        };\n      },\n      write: function write(color) {\n        return [color.r, color.g, color.b, color.a];\n      }\n    }\n  }\n},\n{\n  litmus: Common.isObject,\n  conversions: {\n    RGBA_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.r) && Common.isNumber(original.g) && Common.isNumber(original.b) && Common.isNumber(original.a)) {\n          return {\n            space: 'RGB',\n            r: original.r,\n            g: original.g,\n            b: original.b,\n            a: original.a\n          };\n        }\n        return false;\n      },\n      write: function write(color) {\n        return {\n          r: color.r,\n          g: color.g,\n          b: color.b,\n          a: color.a\n        };\n      }\n    },\n    RGB_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.r) && Common.isNumber(original.g) && Common.isNumber(original.b)) {\n          return {\n            space: 'RGB',\n            r: original.r,\n            g: original.g,\n            b: original.b\n          };\n        }\n        return false;\n      },\n      write: function write(color) {\n        return {\n          r: color.r,\n          g: color.g,\n          b: color.b\n        };\n      }\n    },\n    HSVA_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.h) && Common.isNumber(original.s) && Common.isNumber(original.v) && Common.isNumber(original.a)) {\n          return {\n            space: 'HSV',\n            h: original.h,\n            s: original.s,\n            v: original.v,\n            a: original.a\n          };\n        }\n        return false;\n      },\n      write: function write(color) {\n        return {\n          h: color.h,\n          s: color.s,\n          v: color.v,\n          a: color.a\n        };\n      }\n    },\n    HSV_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.h) && Common.isNumber(original.s) && Common.isNumber(original.v)) {\n          return {\n            space: 'HSV',\n            h: original.h,\n            s: original.s,\n            v: original.v\n          };\n        }\n        return false;\n      },\n      write: function write(color) {\n        return {\n          h: color.h,\n          s: color.s,\n          v: color.v\n        };\n      }\n    }\n  }\n}];\nvar result = void 0;\nvar toReturn = void 0;\nvar interpret = function interpret() {\n  toReturn = false;\n  var original = arguments.length > 1 ? Common.toArray(arguments) : arguments[0];\n  Common.each(INTERPRETATIONS, function (family) {\n    if (family.litmus(original)) {\n      Common.each(family.conversions, function (conversion, conversionName) {\n        result = conversion.read(original);\n        if (toReturn === false && result !== false) {\n          toReturn = result;\n          result.conversionName = conversionName;\n          result.conversion = conversion;\n          return Common.BREAK;\n        }\n      });\n      return Common.BREAK;\n    }\n  });\n  return toReturn;\n};\n\nvar tmpComponent = void 0;\nvar ColorMath = {\n  hsv_to_rgb: function hsv_to_rgb(h, s, v) {\n    var hi = Math.floor(h / 60) % 6;\n    var f = h / 60 - Math.floor(h / 60);\n    var p = v * (1.0 - s);\n    var q = v * (1.0 - f * s);\n    var t = v * (1.0 - (1.0 - f) * s);\n    var c = [[v, t, p], [q, v, p], [p, v, t], [p, q, v], [t, p, v], [v, p, q]][hi];\n    return {\n      r: c[0] * 255,\n      g: c[1] * 255,\n      b: c[2] * 255\n    };\n  },\n  rgb_to_hsv: function rgb_to_hsv(r, g, b) {\n    var min = Math.min(r, g, b);\n    var max = Math.max(r, g, b);\n    var delta = max - min;\n    var h = void 0;\n    var s = void 0;\n    if (max !== 0) {\n      s = delta / max;\n    } else {\n      return {\n        h: NaN,\n        s: 0,\n        v: 0\n      };\n    }\n    if (r === max) {\n      h = (g - b) / delta;\n    } else if (g === max) {\n      h = 2 + (b - r) / delta;\n    } else {\n      h = 4 + (r - g) / delta;\n    }\n    h /= 6;\n    if (h < 0) {\n      h += 1;\n    }\n    return {\n      h: h * 360,\n      s: s,\n      v: max / 255\n    };\n  },\n  rgb_to_hex: function rgb_to_hex(r, g, b) {\n    var hex = this.hex_with_component(0, 2, r);\n    hex = this.hex_with_component(hex, 1, g);\n    hex = this.hex_with_component(hex, 0, b);\n    return hex;\n  },\n  component_from_hex: function component_from_hex(hex, componentIndex) {\n    return hex >> componentIndex * 8 & 0xFF;\n  },\n  hex_with_component: function hex_with_component(hex, componentIndex, value) {\n    return value << (tmpComponent = componentIndex * 8) | hex & ~(0xFF << tmpComponent);\n  }\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\n\n\nvar get = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar Color = function () {\n  function Color() {\n    classCallCheck(this, Color);\n    this.__state = interpret.apply(this, arguments);\n    if (this.__state === false) {\n      throw new Error('Failed to interpret color arguments');\n    }\n    this.__state.a = this.__state.a || 1;\n  }\n  createClass(Color, [{\n    key: 'toString',\n    value: function toString() {\n      return colorToString(this);\n    }\n  }, {\n    key: 'toHexString',\n    value: function toHexString() {\n      return colorToString(this, true);\n    }\n  }, {\n    key: 'toOriginal',\n    value: function toOriginal() {\n      return this.__state.conversion.write(this);\n    }\n  }]);\n  return Color;\n}();\nfunction defineRGBComponent(target, component, componentHexIndex) {\n  Object.defineProperty(target, component, {\n    get: function get$$1() {\n      if (this.__state.space === 'RGB') {\n        return this.__state[component];\n      }\n      Color.recalculateRGB(this, component, componentHexIndex);\n      return this.__state[component];\n    },\n    set: function set$$1(v) {\n      if (this.__state.space !== 'RGB') {\n        Color.recalculateRGB(this, component, componentHexIndex);\n        this.__state.space = 'RGB';\n      }\n      this.__state[component] = v;\n    }\n  });\n}\nfunction defineHSVComponent(target, component) {\n  Object.defineProperty(target, component, {\n    get: function get$$1() {\n      if (this.__state.space === 'HSV') {\n        return this.__state[component];\n      }\n      Color.recalculateHSV(this);\n      return this.__state[component];\n    },\n    set: function set$$1(v) {\n      if (this.__state.space !== 'HSV') {\n        Color.recalculateHSV(this);\n        this.__state.space = 'HSV';\n      }\n      this.__state[component] = v;\n    }\n  });\n}\nColor.recalculateRGB = function (color, component, componentHexIndex) {\n  if (color.__state.space === 'HEX') {\n    color.__state[component] = ColorMath.component_from_hex(color.__state.hex, componentHexIndex);\n  } else if (color.__state.space === 'HSV') {\n    Common.extend(color.__state, ColorMath.hsv_to_rgb(color.__state.h, color.__state.s, color.__state.v));\n  } else {\n    throw new Error('Corrupted color state');\n  }\n};\nColor.recalculateHSV = function (color) {\n  var result = ColorMath.rgb_to_hsv(color.r, color.g, color.b);\n  Common.extend(color.__state, {\n    s: result.s,\n    v: result.v\n  });\n  if (!Common.isNaN(result.h)) {\n    color.__state.h = result.h;\n  } else if (Common.isUndefined(color.__state.h)) {\n    color.__state.h = 0;\n  }\n};\nColor.COMPONENTS = ['r', 'g', 'b', 'h', 's', 'v', 'hex', 'a'];\ndefineRGBComponent(Color.prototype, 'r', 2);\ndefineRGBComponent(Color.prototype, 'g', 1);\ndefineRGBComponent(Color.prototype, 'b', 0);\ndefineHSVComponent(Color.prototype, 'h');\ndefineHSVComponent(Color.prototype, 's');\ndefineHSVComponent(Color.prototype, 'v');\nObject.defineProperty(Color.prototype, 'a', {\n  get: function get$$1() {\n    return this.__state.a;\n  },\n  set: function set$$1(v) {\n    this.__state.a = v;\n  }\n});\nObject.defineProperty(Color.prototype, 'hex', {\n  get: function get$$1() {\n    if (!this.__state.space !== 'HEX') {\n      this.__state.hex = ColorMath.rgb_to_hex(this.r, this.g, this.b);\n    }\n    return this.__state.hex;\n  },\n  set: function set$$1(v) {\n    this.__state.space = 'HEX';\n    this.__state.hex = v;\n  }\n});\n\nvar Controller = function () {\n  function Controller(object, property) {\n    classCallCheck(this, Controller);\n    this.initialValue = object[property];\n    this.domElement = document.createElement('div');\n    this.object = object;\n    this.property = property;\n    this.__onChange = undefined;\n    this.__onFinishChange = undefined;\n  }\n  createClass(Controller, [{\n    key: 'onChange',\n    value: function onChange(fnc) {\n      this.__onChange = fnc;\n      return this;\n    }\n  }, {\n    key: 'onFinishChange',\n    value: function onFinishChange(fnc) {\n      this.__onFinishChange = fnc;\n      return this;\n    }\n  }, {\n    key: 'setValue',\n    value: function setValue(newValue) {\n      this.object[this.property] = newValue;\n      if (this.__onChange) {\n        this.__onChange.call(this, newValue);\n      }\n      this.updateDisplay();\n      return this;\n    }\n  }, {\n    key: 'getValue',\n    value: function getValue() {\n      return this.object[this.property];\n    }\n  }, {\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      return this;\n    }\n  }, {\n    key: 'isModified',\n    value: function isModified() {\n      return this.initialValue !== this.getValue();\n    }\n  }]);\n  return Controller;\n}();\n\nvar EVENT_MAP = {\n  HTMLEvents: ['change'],\n  MouseEvents: ['click', 'mousemove', 'mousedown', 'mouseup', 'mouseover'],\n  KeyboardEvents: ['keydown']\n};\nvar EVENT_MAP_INV = {};\nCommon.each(EVENT_MAP, function (v, k) {\n  Common.each(v, function (e) {\n    EVENT_MAP_INV[e] = k;\n  });\n});\nvar CSS_VALUE_PIXELS = /(\\d+(\\.\\d+)?)px/;\nfunction cssValueToPixels(val) {\n  if (val === '0' || Common.isUndefined(val)) {\n    return 0;\n  }\n  var match = val.match(CSS_VALUE_PIXELS);\n  if (!Common.isNull(match)) {\n    return parseFloat(match[1]);\n  }\n  return 0;\n}\nvar dom = {\n  makeSelectable: function makeSelectable(elem, selectable) {\n    if (elem === undefined || elem.style === undefined) return;\n    elem.onselectstart = selectable ? function () {\n      return false;\n    } : function () {};\n    elem.style.MozUserSelect = selectable ? 'auto' : 'none';\n    elem.style.KhtmlUserSelect = selectable ? 'auto' : 'none';\n    elem.unselectable = selectable ? 'on' : 'off';\n  },\n  makeFullscreen: function makeFullscreen(elem, hor, vert) {\n    var vertical = vert;\n    var horizontal = hor;\n    if (Common.isUndefined(horizontal)) {\n      horizontal = true;\n    }\n    if (Common.isUndefined(vertical)) {\n      vertical = true;\n    }\n    elem.style.position = 'absolute';\n    if (horizontal) {\n      elem.style.left = 0;\n      elem.style.right = 0;\n    }\n    if (vertical) {\n      elem.style.top = 0;\n      elem.style.bottom = 0;\n    }\n  },\n  fakeEvent: function fakeEvent(elem, eventType, pars, aux) {\n    var params = pars || {};\n    var className = EVENT_MAP_INV[eventType];\n    if (!className) {\n      throw new Error('Event type ' + eventType + ' not supported.');\n    }\n    var evt = document.createEvent(className);\n    switch (className) {\n      case 'MouseEvents':\n        {\n          var clientX = params.x || params.clientX || 0;\n          var clientY = params.y || params.clientY || 0;\n          evt.initMouseEvent(eventType, params.bubbles || false, params.cancelable || true, window, params.clickCount || 1, 0,\n          0,\n          clientX,\n          clientY,\n          false, false, false, false, 0, null);\n          break;\n        }\n      case 'KeyboardEvents':\n        {\n          var init = evt.initKeyboardEvent || evt.initKeyEvent;\n          Common.defaults(params, {\n            cancelable: true,\n            ctrlKey: false,\n            altKey: false,\n            shiftKey: false,\n            metaKey: false,\n            keyCode: undefined,\n            charCode: undefined\n          });\n          init(eventType, params.bubbles || false, params.cancelable, window, params.ctrlKey, params.altKey, params.shiftKey, params.metaKey, params.keyCode, params.charCode);\n          break;\n        }\n      default:\n        {\n          evt.initEvent(eventType, params.bubbles || false, params.cancelable || true);\n          break;\n        }\n    }\n    Common.defaults(evt, aux);\n    elem.dispatchEvent(evt);\n  },\n  bind: function bind(elem, event, func, newBool) {\n    var bool = newBool || false;\n    if (elem.addEventListener) {\n      elem.addEventListener(event, func, bool);\n    } else if (elem.attachEvent) {\n      elem.attachEvent('on' + event, func);\n    }\n    return dom;\n  },\n  unbind: function unbind(elem, event, func, newBool) {\n    var bool = newBool || false;\n    if (elem.removeEventListener) {\n      elem.removeEventListener(event, func, bool);\n    } else if (elem.detachEvent) {\n      elem.detachEvent('on' + event, func);\n    }\n    return dom;\n  },\n  addClass: function addClass(elem, className) {\n    if (elem.className === undefined) {\n      elem.className = className;\n    } else if (elem.className !== className) {\n      var classes = elem.className.split(/ +/);\n      if (classes.indexOf(className) === -1) {\n        classes.push(className);\n        elem.className = classes.join(' ').replace(/^\\s+/, '').replace(/\\s+$/, '');\n      }\n    }\n    return dom;\n  },\n  removeClass: function removeClass(elem, className) {\n    if (className) {\n      if (elem.className === className) {\n        elem.removeAttribute('class');\n      } else {\n        var classes = elem.className.split(/ +/);\n        var index = classes.indexOf(className);\n        if (index !== -1) {\n          classes.splice(index, 1);\n          elem.className = classes.join(' ');\n        }\n      }\n    } else {\n      elem.className = undefined;\n    }\n    return dom;\n  },\n  hasClass: function hasClass(elem, className) {\n    return new RegExp('(?:^|\\\\s+)' + className + '(?:\\\\s+|$)').test(elem.className) || false;\n  },\n  getWidth: function getWidth(elem) {\n    var style = getComputedStyle(elem);\n    return cssValueToPixels(style['border-left-width']) + cssValueToPixels(style['border-right-width']) + cssValueToPixels(style['padding-left']) + cssValueToPixels(style['padding-right']) + cssValueToPixels(style.width);\n  },\n  getHeight: function getHeight(elem) {\n    var style = getComputedStyle(elem);\n    return cssValueToPixels(style['border-top-width']) + cssValueToPixels(style['border-bottom-width']) + cssValueToPixels(style['padding-top']) + cssValueToPixels(style['padding-bottom']) + cssValueToPixels(style.height);\n  },\n  getOffset: function getOffset(el) {\n    var elem = el;\n    var offset = { left: 0, top: 0 };\n    if (elem.offsetParent) {\n      do {\n        offset.left += elem.offsetLeft;\n        offset.top += elem.offsetTop;\n        elem = elem.offsetParent;\n      } while (elem);\n    }\n    return offset;\n  },\n  isActive: function isActive(elem) {\n    return elem === document.activeElement && (elem.type || elem.href);\n  }\n};\n\nvar BooleanController = function (_Controller) {\n  inherits(BooleanController, _Controller);\n  function BooleanController(object, property) {\n    classCallCheck(this, BooleanController);\n    var _this2 = possibleConstructorReturn(this, (BooleanController.__proto__ || Object.getPrototypeOf(BooleanController)).call(this, object, property));\n    var _this = _this2;\n    _this2.__prev = _this2.getValue();\n    _this2.__checkbox = document.createElement('input');\n    _this2.__checkbox.setAttribute('type', 'checkbox');\n    function onChange() {\n      _this.setValue(!_this.__prev);\n    }\n    dom.bind(_this2.__checkbox, 'change', onChange, false);\n    _this2.domElement.appendChild(_this2.__checkbox);\n    _this2.updateDisplay();\n    return _this2;\n  }\n  createClass(BooleanController, [{\n    key: 'setValue',\n    value: function setValue(v) {\n      var toReturn = get(BooleanController.prototype.__proto__ || Object.getPrototypeOf(BooleanController.prototype), 'setValue', this).call(this, v);\n      if (this.__onFinishChange) {\n        this.__onFinishChange.call(this, this.getValue());\n      }\n      this.__prev = this.getValue();\n      return toReturn;\n    }\n  }, {\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      if (this.getValue() === true) {\n        this.__checkbox.setAttribute('checked', 'checked');\n        this.__checkbox.checked = true;\n        this.__prev = true;\n      } else {\n        this.__checkbox.checked = false;\n        this.__prev = false;\n      }\n      return get(BooleanController.prototype.__proto__ || Object.getPrototypeOf(BooleanController.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return BooleanController;\n}(Controller);\n\nvar OptionController = function (_Controller) {\n  inherits(OptionController, _Controller);\n  function OptionController(object, property, opts) {\n    classCallCheck(this, OptionController);\n    var _this2 = possibleConstructorReturn(this, (OptionController.__proto__ || Object.getPrototypeOf(OptionController)).call(this, object, property));\n    var options = opts;\n    var _this = _this2;\n    _this2.__select = document.createElement('select');\n    if (Common.isArray(options)) {\n      var map = {};\n      Common.each(options, function (element) {\n        map[element] = element;\n      });\n      options = map;\n    }\n    Common.each(options, function (value, key) {\n      var opt = document.createElement('option');\n      opt.innerHTML = key;\n      opt.setAttribute('value', value);\n      _this.__select.appendChild(opt);\n    });\n    _this2.updateDisplay();\n    dom.bind(_this2.__select, 'change', function () {\n      var desiredValue = this.options[this.selectedIndex].value;\n      _this.setValue(desiredValue);\n    });\n    _this2.domElement.appendChild(_this2.__select);\n    return _this2;\n  }\n  createClass(OptionController, [{\n    key: 'setValue',\n    value: function setValue(v) {\n      var toReturn = get(OptionController.prototype.__proto__ || Object.getPrototypeOf(OptionController.prototype), 'setValue', this).call(this, v);\n      if (this.__onFinishChange) {\n        this.__onFinishChange.call(this, this.getValue());\n      }\n      return toReturn;\n    }\n  }, {\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      if (dom.isActive(this.__select)) return this;\n      this.__select.value = this.getValue();\n      return get(OptionController.prototype.__proto__ || Object.getPrototypeOf(OptionController.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return OptionController;\n}(Controller);\n\nvar StringController = function (_Controller) {\n  inherits(StringController, _Controller);\n  function StringController(object, property) {\n    classCallCheck(this, StringController);\n    var _this2 = possibleConstructorReturn(this, (StringController.__proto__ || Object.getPrototypeOf(StringController)).call(this, object, property));\n    var _this = _this2;\n    function onChange() {\n      _this.setValue(_this.__input.value);\n    }\n    function onBlur() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n    _this2.__input = document.createElement('input');\n    _this2.__input.setAttribute('type', 'text');\n    dom.bind(_this2.__input, 'keyup', onChange);\n    dom.bind(_this2.__input, 'change', onChange);\n    dom.bind(_this2.__input, 'blur', onBlur);\n    dom.bind(_this2.__input, 'keydown', function (e) {\n      if (e.keyCode === 13) {\n        this.blur();\n      }\n    });\n    _this2.updateDisplay();\n    _this2.domElement.appendChild(_this2.__input);\n    return _this2;\n  }\n  createClass(StringController, [{\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      if (!dom.isActive(this.__input)) {\n        this.__input.value = this.getValue();\n      }\n      return get(StringController.prototype.__proto__ || Object.getPrototypeOf(StringController.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return StringController;\n}(Controller);\n\nfunction numDecimals(x) {\n  var _x = x.toString();\n  if (_x.indexOf('.') > -1) {\n    return _x.length - _x.indexOf('.') - 1;\n  }\n  return 0;\n}\nvar NumberController = function (_Controller) {\n  inherits(NumberController, _Controller);\n  function NumberController(object, property, params) {\n    classCallCheck(this, NumberController);\n    var _this = possibleConstructorReturn(this, (NumberController.__proto__ || Object.getPrototypeOf(NumberController)).call(this, object, property));\n    var _params = params || {};\n    _this.__min = _params.min;\n    _this.__max = _params.max;\n    _this.__step = _params.step;\n    if (Common.isUndefined(_this.__step)) {\n      if (_this.initialValue === 0) {\n        _this.__impliedStep = 1;\n      } else {\n        _this.__impliedStep = Math.pow(10, Math.floor(Math.log(Math.abs(_this.initialValue)) / Math.LN10)) / 10;\n      }\n    } else {\n      _this.__impliedStep = _this.__step;\n    }\n    _this.__precision = numDecimals(_this.__impliedStep);\n    return _this;\n  }\n  createClass(NumberController, [{\n    key: 'setValue',\n    value: function setValue(v) {\n      var _v = v;\n      if (this.__min !== undefined && _v < this.__min) {\n        _v = this.__min;\n      } else if (this.__max !== undefined && _v > this.__max) {\n        _v = this.__max;\n      }\n      if (this.__step !== undefined && _v % this.__step !== 0) {\n        _v = Math.round(_v / this.__step) * this.__step;\n      }\n      return get(NumberController.prototype.__proto__ || Object.getPrototypeOf(NumberController.prototype), 'setValue', this).call(this, _v);\n    }\n  }, {\n    key: 'min',\n    value: function min(minValue) {\n      this.__min = minValue;\n      return this;\n    }\n  }, {\n    key: 'max',\n    value: function max(maxValue) {\n      this.__max = maxValue;\n      return this;\n    }\n  }, {\n    key: 'step',\n    value: function step(stepValue) {\n      this.__step = stepValue;\n      this.__impliedStep = stepValue;\n      this.__precision = numDecimals(stepValue);\n      return this;\n    }\n  }]);\n  return NumberController;\n}(Controller);\n\nfunction roundToDecimal(value, decimals) {\n  var tenTo = Math.pow(10, decimals);\n  return Math.round(value * tenTo) / tenTo;\n}\nvar NumberControllerBox = function (_NumberController) {\n  inherits(NumberControllerBox, _NumberController);\n  function NumberControllerBox(object, property, params) {\n    classCallCheck(this, NumberControllerBox);\n    var _this2 = possibleConstructorReturn(this, (NumberControllerBox.__proto__ || Object.getPrototypeOf(NumberControllerBox)).call(this, object, property, params));\n    _this2.__truncationSuspended = false;\n    var _this = _this2;\n    var prevY = void 0;\n    function onChange() {\n      var attempted = parseFloat(_this.__input.value);\n      if (!Common.isNaN(attempted)) {\n        _this.setValue(attempted);\n      }\n    }\n    function onFinish() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n    function onBlur() {\n      onFinish();\n    }\n    function onMouseDrag(e) {\n      var diff = prevY - e.clientY;\n      _this.setValue(_this.getValue() + diff * _this.__impliedStep);\n      prevY = e.clientY;\n    }\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      onFinish();\n    }\n    function onMouseDown(e) {\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n      prevY = e.clientY;\n    }\n    _this2.__input = document.createElement('input');\n    _this2.__input.setAttribute('type', 'text');\n    dom.bind(_this2.__input, 'change', onChange);\n    dom.bind(_this2.__input, 'blur', onBlur);\n    dom.bind(_this2.__input, 'mousedown', onMouseDown);\n    dom.bind(_this2.__input, 'keydown', function (e) {\n      if (e.keyCode === 13) {\n        _this.__truncationSuspended = true;\n        this.blur();\n        _this.__truncationSuspended = false;\n        onFinish();\n      }\n    });\n    _this2.updateDisplay();\n    _this2.domElement.appendChild(_this2.__input);\n    return _this2;\n  }\n  createClass(NumberControllerBox, [{\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      this.__input.value = this.__truncationSuspended ? this.getValue() : roundToDecimal(this.getValue(), this.__precision);\n      return get(NumberControllerBox.prototype.__proto__ || Object.getPrototypeOf(NumberControllerBox.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return NumberControllerBox;\n}(NumberController);\n\nfunction map(v, i1, i2, o1, o2) {\n  return o1 + (o2 - o1) * ((v - i1) / (i2 - i1));\n}\nvar NumberControllerSlider = function (_NumberController) {\n  inherits(NumberControllerSlider, _NumberController);\n  function NumberControllerSlider(object, property, min, max, step) {\n    classCallCheck(this, NumberControllerSlider);\n    var _this2 = possibleConstructorReturn(this, (NumberControllerSlider.__proto__ || Object.getPrototypeOf(NumberControllerSlider)).call(this, object, property, { min: min, max: max, step: step }));\n    var _this = _this2;\n    _this2.__background = document.createElement('div');\n    _this2.__foreground = document.createElement('div');\n    dom.bind(_this2.__background, 'mousedown', onMouseDown);\n    dom.bind(_this2.__background, 'touchstart', onTouchStart);\n    dom.addClass(_this2.__background, 'slider');\n    dom.addClass(_this2.__foreground, 'slider-fg');\n    function onMouseDown(e) {\n      document.activeElement.blur();\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n      onMouseDrag(e);\n    }\n    function onMouseDrag(e) {\n      e.preventDefault();\n      var bgRect = _this.__background.getBoundingClientRect();\n      _this.setValue(map(e.clientX, bgRect.left, bgRect.right, _this.__min, _this.__max));\n      return false;\n    }\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n    function onTouchStart(e) {\n      if (e.touches.length !== 1) {\n        return;\n      }\n      dom.bind(window, 'touchmove', onTouchMove);\n      dom.bind(window, 'touchend', onTouchEnd);\n      onTouchMove(e);\n    }\n    function onTouchMove(e) {\n      var clientX = e.touches[0].clientX;\n      var bgRect = _this.__background.getBoundingClientRect();\n      _this.setValue(map(clientX, bgRect.left, bgRect.right, _this.__min, _this.__max));\n    }\n    function onTouchEnd() {\n      dom.unbind(window, 'touchmove', onTouchMove);\n      dom.unbind(window, 'touchend', onTouchEnd);\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n    _this2.updateDisplay();\n    _this2.__background.appendChild(_this2.__foreground);\n    _this2.domElement.appendChild(_this2.__background);\n    return _this2;\n  }\n  createClass(NumberControllerSlider, [{\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      var pct = (this.getValue() - this.__min) / (this.__max - this.__min);\n      this.__foreground.style.width = pct * 100 + '%';\n      return get(NumberControllerSlider.prototype.__proto__ || Object.getPrototypeOf(NumberControllerSlider.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return NumberControllerSlider;\n}(NumberController);\n\nvar FunctionController = function (_Controller) {\n  inherits(FunctionController, _Controller);\n  function FunctionController(object, property, text) {\n    classCallCheck(this, FunctionController);\n    var _this2 = possibleConstructorReturn(this, (FunctionController.__proto__ || Object.getPrototypeOf(FunctionController)).call(this, object, property));\n    var _this = _this2;\n    _this2.__button = document.createElement('div');\n    _this2.__button.innerHTML = text === undefined ? 'Fire' : text;\n    dom.bind(_this2.__button, 'click', function (e) {\n      e.preventDefault();\n      _this.fire();\n      return false;\n    });\n    dom.addClass(_this2.__button, 'button');\n    _this2.domElement.appendChild(_this2.__button);\n    return _this2;\n  }\n  createClass(FunctionController, [{\n    key: 'fire',\n    value: function fire() {\n      if (this.__onChange) {\n        this.__onChange.call(this);\n      }\n      this.getValue().call(this.object);\n      if (this.__onFinishChange) {\n        this.__onFinishChange.call(this, this.getValue());\n      }\n    }\n  }]);\n  return FunctionController;\n}(Controller);\n\nvar ColorController = function (_Controller) {\n  inherits(ColorController, _Controller);\n  function ColorController(object, property) {\n    classCallCheck(this, ColorController);\n    var _this2 = possibleConstructorReturn(this, (ColorController.__proto__ || Object.getPrototypeOf(ColorController)).call(this, object, property));\n    _this2.__color = new Color(_this2.getValue());\n    _this2.__temp = new Color(0);\n    var _this = _this2;\n    _this2.domElement = document.createElement('div');\n    dom.makeSelectable(_this2.domElement, false);\n    _this2.__selector = document.createElement('div');\n    _this2.__selector.className = 'selector';\n    _this2.__saturation_field = document.createElement('div');\n    _this2.__saturation_field.className = 'saturation-field';\n    _this2.__field_knob = document.createElement('div');\n    _this2.__field_knob.className = 'field-knob';\n    _this2.__field_knob_border = '2px solid ';\n    _this2.__hue_knob = document.createElement('div');\n    _this2.__hue_knob.className = 'hue-knob';\n    _this2.__hue_field = document.createElement('div');\n    _this2.__hue_field.className = 'hue-field';\n    _this2.__input = document.createElement('input');\n    _this2.__input.type = 'text';\n    _this2.__input_textShadow = '0 1px 1px ';\n    dom.bind(_this2.__input, 'keydown', function (e) {\n      if (e.keyCode === 13) {\n        onBlur.call(this);\n      }\n    });\n    dom.bind(_this2.__input, 'blur', onBlur);\n    dom.bind(_this2.__selector, 'mousedown', function ()        {\n      dom.addClass(this, 'drag').bind(window, 'mouseup', function ()        {\n        dom.removeClass(_this.__selector, 'drag');\n      });\n    });\n    dom.bind(_this2.__selector, 'touchstart', function ()        {\n      dom.addClass(this, 'drag').bind(window, 'touchend', function ()        {\n        dom.removeClass(_this.__selector, 'drag');\n      });\n    });\n    var valueField = document.createElement('div');\n    Common.extend(_this2.__selector.style, {\n      width: '122px',\n      height: '102px',\n      padding: '3px',\n      backgroundColor: '#222',\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.3)'\n    });\n    Common.extend(_this2.__field_knob.style, {\n      position: 'absolute',\n      width: '12px',\n      height: '12px',\n      border: _this2.__field_knob_border + (_this2.__color.v < 0.5 ? '#fff' : '#000'),\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.5)',\n      borderRadius: '12px',\n      zIndex: 1\n    });\n    Common.extend(_this2.__hue_knob.style, {\n      position: 'absolute',\n      width: '15px',\n      height: '2px',\n      borderRight: '4px solid #fff',\n      zIndex: 1\n    });\n    Common.extend(_this2.__saturation_field.style, {\n      width: '100px',\n      height: '100px',\n      border: '1px solid #555',\n      marginRight: '3px',\n      display: 'inline-block',\n      cursor: 'pointer'\n    });\n    Common.extend(valueField.style, {\n      width: '100%',\n      height: '100%',\n      background: 'none'\n    });\n    linearGradient(valueField, 'top', 'rgba(0,0,0,0)', '#000');\n    Common.extend(_this2.__hue_field.style, {\n      width: '15px',\n      height: '100px',\n      border: '1px solid #555',\n      cursor: 'ns-resize',\n      position: 'absolute',\n      top: '3px',\n      right: '3px'\n    });\n    hueGradient(_this2.__hue_field);\n    Common.extend(_this2.__input.style, {\n      outline: 'none',\n      textAlign: 'center',\n      color: '#fff',\n      border: 0,\n      fontWeight: 'bold',\n      textShadow: _this2.__input_textShadow + 'rgba(0,0,0,0.7)'\n    });\n    dom.bind(_this2.__saturation_field, 'mousedown', fieldDown);\n    dom.bind(_this2.__saturation_field, 'touchstart', fieldDown);\n    dom.bind(_this2.__field_knob, 'mousedown', fieldDown);\n    dom.bind(_this2.__field_knob, 'touchstart', fieldDown);\n    dom.bind(_this2.__hue_field, 'mousedown', fieldDownH);\n    dom.bind(_this2.__hue_field, 'touchstart', fieldDownH);\n    function fieldDown(e) {\n      setSV(e);\n      dom.bind(window, 'mousemove', setSV);\n      dom.bind(window, 'touchmove', setSV);\n      dom.bind(window, 'mouseup', fieldUpSV);\n      dom.bind(window, 'touchend', fieldUpSV);\n    }\n    function fieldDownH(e) {\n      setH(e);\n      dom.bind(window, 'mousemove', setH);\n      dom.bind(window, 'touchmove', setH);\n      dom.bind(window, 'mouseup', fieldUpH);\n      dom.bind(window, 'touchend', fieldUpH);\n    }\n    function fieldUpSV() {\n      dom.unbind(window, 'mousemove', setSV);\n      dom.unbind(window, 'touchmove', setSV);\n      dom.unbind(window, 'mouseup', fieldUpSV);\n      dom.unbind(window, 'touchend', fieldUpSV);\n      onFinish();\n    }\n    function fieldUpH() {\n      dom.unbind(window, 'mousemove', setH);\n      dom.unbind(window, 'touchmove', setH);\n      dom.unbind(window, 'mouseup', fieldUpH);\n      dom.unbind(window, 'touchend', fieldUpH);\n      onFinish();\n    }\n    function onBlur() {\n      var i = interpret(this.value);\n      if (i !== false) {\n        _this.__color.__state = i;\n        _this.setValue(_this.__color.toOriginal());\n      } else {\n        this.value = _this.__color.toString();\n      }\n    }\n    function onFinish() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.__color.toOriginal());\n      }\n    }\n    _this2.__saturation_field.appendChild(valueField);\n    _this2.__selector.appendChild(_this2.__field_knob);\n    _this2.__selector.appendChild(_this2.__saturation_field);\n    _this2.__selector.appendChild(_this2.__hue_field);\n    _this2.__hue_field.appendChild(_this2.__hue_knob);\n    _this2.domElement.appendChild(_this2.__input);\n    _this2.domElement.appendChild(_this2.__selector);\n    _this2.updateDisplay();\n    function setSV(e) {\n      if (e.type.indexOf('touch') === -1) {\n        e.preventDefault();\n      }\n      var fieldRect = _this.__saturation_field.getBoundingClientRect();\n      var _ref = e.touches && e.touches[0] || e,\n          clientX = _ref.clientX,\n          clientY = _ref.clientY;\n      var s = (clientX - fieldRect.left) / (fieldRect.right - fieldRect.left);\n      var v = 1 - (clientY - fieldRect.top) / (fieldRect.bottom - fieldRect.top);\n      if (v > 1) {\n        v = 1;\n      } else if (v < 0) {\n        v = 0;\n      }\n      if (s > 1) {\n        s = 1;\n      } else if (s < 0) {\n        s = 0;\n      }\n      _this.__color.v = v;\n      _this.__color.s = s;\n      _this.setValue(_this.__color.toOriginal());\n      return false;\n    }\n    function setH(e) {\n      if (e.type.indexOf('touch') === -1) {\n        e.preventDefault();\n      }\n      var fieldRect = _this.__hue_field.getBoundingClientRect();\n      var _ref2 = e.touches && e.touches[0] || e,\n          clientY = _ref2.clientY;\n      var h = 1 - (clientY - fieldRect.top) / (fieldRect.bottom - fieldRect.top);\n      if (h > 1) {\n        h = 1;\n      } else if (h < 0) {\n        h = 0;\n      }\n      _this.__color.h = h * 360;\n      _this.setValue(_this.__color.toOriginal());\n      return false;\n    }\n    return _this2;\n  }\n  createClass(ColorController, [{\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      var i = interpret(this.getValue());\n      if (i !== false) {\n        var mismatch = false;\n        Common.each(Color.COMPONENTS, function (component) {\n          if (!Common.isUndefined(i[component]) && !Common.isUndefined(this.__color.__state[component]) && i[component] !== this.__color.__state[component]) {\n            mismatch = true;\n            return {};\n          }\n        }, this);\n        if (mismatch) {\n          Common.extend(this.__color.__state, i);\n        }\n      }\n      Common.extend(this.__temp.__state, this.__color.__state);\n      this.__temp.a = 1;\n      var flip = this.__color.v < 0.5 || this.__color.s > 0.5 ? 255 : 0;\n      var _flip = 255 - flip;\n      Common.extend(this.__field_knob.style, {\n        marginLeft: 100 * this.__color.s - 7 + 'px',\n        marginTop: 100 * (1 - this.__color.v) - 7 + 'px',\n        backgroundColor: this.__temp.toHexString(),\n        border: this.__field_knob_border + 'rgb(' + flip + ',' + flip + ',' + flip + ')'\n      });\n      this.__hue_knob.style.marginTop = (1 - this.__color.h / 360) * 100 + 'px';\n      this.__temp.s = 1;\n      this.__temp.v = 1;\n      linearGradient(this.__saturation_field, 'left', '#fff', this.__temp.toHexString());\n      this.__input.value = this.__color.toString();\n      Common.extend(this.__input.style, {\n        backgroundColor: this.__color.toHexString(),\n        color: 'rgb(' + flip + ',' + flip + ',' + flip + ')',\n        textShadow: this.__input_textShadow + 'rgba(' + _flip + ',' + _flip + ',' + _flip + ',.7)'\n      });\n    }\n  }]);\n  return ColorController;\n}(Controller);\nvar vendors = ['-moz-', '-o-', '-webkit-', '-ms-', ''];\nfunction linearGradient(elem, x, a, b) {\n  elem.style.background = '';\n  Common.each(vendors, function (vendor) {\n    elem.style.cssText += 'background: ' + vendor + 'linear-gradient(' + x + ', ' + a + ' 0%, ' + b + ' 100%); ';\n  });\n}\nfunction hueGradient(elem) {\n  elem.style.background = '';\n  elem.style.cssText += 'background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);';\n  elem.style.cssText += 'background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n}\n\nvar css = {\n  load: function load(url, indoc) {\n    var doc = indoc || document;\n    var link = doc.createElement('link');\n    link.type = 'text/css';\n    link.rel = 'stylesheet';\n    link.href = url;\n    doc.getElementsByTagName('head')[0].appendChild(link);\n  },\n  inject: function inject(cssContent, indoc) {\n    var doc = indoc || document;\n    var injected = document.createElement('style');\n    injected.type = 'text/css';\n    injected.innerHTML = cssContent;\n    var head = doc.getElementsByTagName('head')[0];\n    try {\n      head.appendChild(injected);\n    } catch (e) {\n    }\n  }\n};\n\nvar saveDialogContents = \"<div id=\\\"dg-save\\\" class=\\\"dg dialogue\\\">\\n\\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\\n\\n  <textarea id=\\\"dg-new-constructor\\\"></textarea>\\n\\n  <div id=\\\"dg-save-locally\\\">\\n\\n    <input id=\\\"dg-local-storage\\\" type=\\\"checkbox\\\"/> Automatically save\\n    values to <code>localStorage</code> on exit.\\n\\n    <div id=\\\"dg-local-explain\\\">The values saved to <code>localStorage</code> will\\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\\n      easier to work incrementally, but <code>localStorage</code> is fragile,\\n      and your friends may not see the same values you do.\\n\\n    </div>\\n\\n  </div>\\n\\n</div>\";\n\nvar ControllerFactory = function ControllerFactory(object, property) {\n  var initialValue = object[property];\n  if (Common.isArray(arguments[2]) || Common.isObject(arguments[2])) {\n    return new OptionController(object, property, arguments[2]);\n  }\n  if (Common.isNumber(initialValue)) {\n    if (Common.isNumber(arguments[2]) && Common.isNumber(arguments[3])) {\n      if (Common.isNumber(arguments[4])) {\n        return new NumberControllerSlider(object, property, arguments[2], arguments[3], arguments[4]);\n      }\n      return new NumberControllerSlider(object, property, arguments[2], arguments[3]);\n    }\n    if (Common.isNumber(arguments[4])) {\n      return new NumberControllerBox(object, property, { min: arguments[2], max: arguments[3], step: arguments[4] });\n    }\n    return new NumberControllerBox(object, property, { min: arguments[2], max: arguments[3] });\n  }\n  if (Common.isString(initialValue)) {\n    return new StringController(object, property);\n  }\n  if (Common.isFunction(initialValue)) {\n    return new FunctionController(object, property, '');\n  }\n  if (Common.isBoolean(initialValue)) {\n    return new BooleanController(object, property);\n  }\n  return null;\n};\n\nfunction requestAnimationFrame(callback) {\n  setTimeout(callback, 1000 / 60);\n}\nvar requestAnimationFrame$1 = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || requestAnimationFrame;\n\nvar CenteredDiv = function () {\n  function CenteredDiv() {\n    classCallCheck(this, CenteredDiv);\n    this.backgroundElement = document.createElement('div');\n    Common.extend(this.backgroundElement.style, {\n      backgroundColor: 'rgba(0,0,0,0.8)',\n      top: 0,\n      left: 0,\n      display: 'none',\n      zIndex: '1000',\n      opacity: 0,\n      WebkitTransition: 'opacity 0.2s linear',\n      transition: 'opacity 0.2s linear'\n    });\n    dom.makeFullscreen(this.backgroundElement);\n    this.backgroundElement.style.position = 'fixed';\n    this.domElement = document.createElement('div');\n    Common.extend(this.domElement.style, {\n      position: 'fixed',\n      display: 'none',\n      zIndex: '1001',\n      opacity: 0,\n      WebkitTransition: '-webkit-transform 0.2s ease-out, opacity 0.2s linear',\n      transition: 'transform 0.2s ease-out, opacity 0.2s linear'\n    });\n    document.body.appendChild(this.backgroundElement);\n    document.body.appendChild(this.domElement);\n    var _this = this;\n    dom.bind(this.backgroundElement, 'click', function () {\n      _this.hide();\n    });\n  }\n  createClass(CenteredDiv, [{\n    key: 'show',\n    value: function show() {\n      var _this = this;\n      this.backgroundElement.style.display = 'block';\n      this.domElement.style.display = 'block';\n      this.domElement.style.opacity = 0;\n      this.domElement.style.webkitTransform = 'scale(1.1)';\n      this.layout();\n      Common.defer(function () {\n        _this.backgroundElement.style.opacity = 1;\n        _this.domElement.style.opacity = 1;\n        _this.domElement.style.webkitTransform = 'scale(1)';\n      });\n    }\n  }, {\n    key: 'hide',\n    value: function hide() {\n      var _this = this;\n      var hide = function hide() {\n        _this.domElement.style.display = 'none';\n        _this.backgroundElement.style.display = 'none';\n        dom.unbind(_this.domElement, 'webkitTransitionEnd', hide);\n        dom.unbind(_this.domElement, 'transitionend', hide);\n        dom.unbind(_this.domElement, 'oTransitionEnd', hide);\n      };\n      dom.bind(this.domElement, 'webkitTransitionEnd', hide);\n      dom.bind(this.domElement, 'transitionend', hide);\n      dom.bind(this.domElement, 'oTransitionEnd', hide);\n      this.backgroundElement.style.opacity = 0;\n      this.domElement.style.opacity = 0;\n      this.domElement.style.webkitTransform = 'scale(1.1)';\n    }\n  }, {\n    key: 'layout',\n    value: function layout() {\n      this.domElement.style.left = window.innerWidth / 2 - dom.getWidth(this.domElement) / 2 + 'px';\n      this.domElement.style.top = window.innerHeight / 2 - dom.getHeight(this.domElement) / 2 + 'px';\n    }\n  }]);\n  return CenteredDiv;\n}();\n\nvar styleSheet = ___$insertStyle(\".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\\n\");\n\ncss.inject(styleSheet);\nvar CSS_NAMESPACE = 'dg';\nvar HIDE_KEY_CODE = 72;\nvar CLOSE_BUTTON_HEIGHT = 20;\nvar DEFAULT_DEFAULT_PRESET_NAME = 'Default';\nvar SUPPORTS_LOCAL_STORAGE = function () {\n  try {\n    return !!window.localStorage;\n  } catch (e) {\n    return false;\n  }\n}();\nvar SAVE_DIALOGUE = void 0;\nvar autoPlaceVirgin = true;\nvar autoPlaceContainer = void 0;\nvar hide = false;\nvar hideableGuis = [];\nvar GUI = function GUI(pars) {\n  var _this = this;\n  var params = pars || {};\n  this.domElement = document.createElement('div');\n  this.__ul = document.createElement('ul');\n  this.domElement.appendChild(this.__ul);\n  dom.addClass(this.domElement, CSS_NAMESPACE);\n  this.__folders = {};\n  this.__controllers = [];\n  this.__rememberedObjects = [];\n  this.__rememberedObjectIndecesToControllers = [];\n  this.__listening = [];\n  params = Common.defaults(params, {\n    closeOnTop: false,\n    autoPlace: true,\n    width: GUI.DEFAULT_WIDTH\n  });\n  params = Common.defaults(params, {\n    resizable: params.autoPlace,\n    hideable: params.autoPlace\n  });\n  if (!Common.isUndefined(params.load)) {\n    if (params.preset) {\n      params.load.preset = params.preset;\n    }\n  } else {\n    params.load = { preset: DEFAULT_DEFAULT_PRESET_NAME };\n  }\n  if (Common.isUndefined(params.parent) && params.hideable) {\n    hideableGuis.push(this);\n  }\n  params.resizable = Common.isUndefined(params.parent) && params.resizable;\n  if (params.autoPlace && Common.isUndefined(params.scrollable)) {\n    params.scrollable = true;\n  }\n  var useLocalStorage = SUPPORTS_LOCAL_STORAGE && localStorage.getItem(getLocalStorageHash(this, 'isLocal')) === 'true';\n  var saveToLocalStorage = void 0;\n  var titleRow = void 0;\n  Object.defineProperties(this,\n  {\n    parent: {\n      get: function get$$1() {\n        return params.parent;\n      }\n    },\n    scrollable: {\n      get: function get$$1() {\n        return params.scrollable;\n      }\n    },\n    autoPlace: {\n      get: function get$$1() {\n        return params.autoPlace;\n      }\n    },\n    closeOnTop: {\n      get: function get$$1() {\n        return params.closeOnTop;\n      }\n    },\n    preset: {\n      get: function get$$1() {\n        if (_this.parent) {\n          return _this.getRoot().preset;\n        }\n        return params.load.preset;\n      },\n      set: function set$$1(v) {\n        if (_this.parent) {\n          _this.getRoot().preset = v;\n        } else {\n          params.load.preset = v;\n        }\n        setPresetSelectIndex(this);\n        _this.revert();\n      }\n    },\n    width: {\n      get: function get$$1() {\n        return params.width;\n      },\n      set: function set$$1(v) {\n        params.width = v;\n        setWidth(_this, v);\n      }\n    },\n    name: {\n      get: function get$$1() {\n        return params.name;\n      },\n      set: function set$$1(v) {\n        params.name = v;\n        if (titleRow) {\n          titleRow.innerHTML = params.name;\n        }\n      }\n    },\n    closed: {\n      get: function get$$1() {\n        return params.closed;\n      },\n      set: function set$$1(v) {\n        params.closed = v;\n        if (params.closed) {\n          dom.addClass(_this.__ul, GUI.CLASS_CLOSED);\n        } else {\n          dom.removeClass(_this.__ul, GUI.CLASS_CLOSED);\n        }\n        this.onResize();\n        if (_this.__closeButton) {\n          _this.__closeButton.innerHTML = v ? GUI.TEXT_OPEN : GUI.TEXT_CLOSED;\n        }\n      }\n    },\n    load: {\n      get: function get$$1() {\n        return params.load;\n      }\n    },\n    useLocalStorage: {\n      get: function get$$1() {\n        return useLocalStorage;\n      },\n      set: function set$$1(bool) {\n        if (SUPPORTS_LOCAL_STORAGE) {\n          useLocalStorage = bool;\n          if (bool) {\n            dom.bind(window, 'unload', saveToLocalStorage);\n          } else {\n            dom.unbind(window, 'unload', saveToLocalStorage);\n          }\n          localStorage.setItem(getLocalStorageHash(_this, 'isLocal'), bool);\n        }\n      }\n    }\n  });\n  if (Common.isUndefined(params.parent)) {\n    this.closed = params.closed || false;\n    dom.addClass(this.domElement, GUI.CLASS_MAIN);\n    dom.makeSelectable(this.domElement, false);\n    if (SUPPORTS_LOCAL_STORAGE) {\n      if (useLocalStorage) {\n        _this.useLocalStorage = true;\n        var savedGui = localStorage.getItem(getLocalStorageHash(this, 'gui'));\n        if (savedGui) {\n          params.load = JSON.parse(savedGui);\n        }\n      }\n    }\n    this.__closeButton = document.createElement('div');\n    this.__closeButton.innerHTML = GUI.TEXT_CLOSED;\n    dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BUTTON);\n    if (params.closeOnTop) {\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_TOP);\n      this.domElement.insertBefore(this.__closeButton, this.domElement.childNodes[0]);\n    } else {\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BOTTOM);\n      this.domElement.appendChild(this.__closeButton);\n    }\n    dom.bind(this.__closeButton, 'click', function () {\n      _this.closed = !_this.closed;\n    });\n  } else {\n    if (params.closed === undefined) {\n      params.closed = true;\n    }\n    var titleRowName = document.createTextNode(params.name);\n    dom.addClass(titleRowName, 'controller-name');\n    titleRow = addRow(_this, titleRowName);\n    var onClickTitle = function onClickTitle(e) {\n      e.preventDefault();\n      _this.closed = !_this.closed;\n      return false;\n    };\n    dom.addClass(this.__ul, GUI.CLASS_CLOSED);\n    dom.addClass(titleRow, 'title');\n    dom.bind(titleRow, 'click', onClickTitle);\n    if (!params.closed) {\n      this.closed = false;\n    }\n  }\n  if (params.autoPlace) {\n    if (Common.isUndefined(params.parent)) {\n      if (autoPlaceVirgin) {\n        autoPlaceContainer = document.createElement('div');\n        dom.addClass(autoPlaceContainer, CSS_NAMESPACE);\n        dom.addClass(autoPlaceContainer, GUI.CLASS_AUTO_PLACE_CONTAINER);\n        document.body.appendChild(autoPlaceContainer);\n        autoPlaceVirgin = false;\n      }\n      autoPlaceContainer.appendChild(this.domElement);\n      dom.addClass(this.domElement, GUI.CLASS_AUTO_PLACE);\n    }\n    if (!this.parent) {\n      setWidth(_this, params.width);\n    }\n  }\n  this.__resizeHandler = function () {\n    _this.onResizeDebounced();\n  };\n  dom.bind(window, 'resize', this.__resizeHandler);\n  dom.bind(this.__ul, 'webkitTransitionEnd', this.__resizeHandler);\n  dom.bind(this.__ul, 'transitionend', this.__resizeHandler);\n  dom.bind(this.__ul, 'oTransitionEnd', this.__resizeHandler);\n  this.onResize();\n  if (params.resizable) {\n    addResizeHandle(this);\n  }\n  saveToLocalStorage = function saveToLocalStorage() {\n    if (SUPPORTS_LOCAL_STORAGE && localStorage.getItem(getLocalStorageHash(_this, 'isLocal')) === 'true') {\n      localStorage.setItem(getLocalStorageHash(_this, 'gui'), JSON.stringify(_this.getSaveObject()));\n    }\n  };\n  this.saveToLocalStorageIfPossible = saveToLocalStorage;\n  function resetWidth() {\n    var root = _this.getRoot();\n    root.width += 1;\n    Common.defer(function () {\n      root.width -= 1;\n    });\n  }\n  if (!params.parent) {\n    resetWidth();\n  }\n};\nGUI.toggleHide = function () {\n  hide = !hide;\n  Common.each(hideableGuis, function (gui) {\n    gui.domElement.style.display = hide ? 'none' : '';\n  });\n};\nGUI.CLASS_AUTO_PLACE = 'a';\nGUI.CLASS_AUTO_PLACE_CONTAINER = 'ac';\nGUI.CLASS_MAIN = 'main';\nGUI.CLASS_CONTROLLER_ROW = 'cr';\nGUI.CLASS_TOO_TALL = 'taller-than-window';\nGUI.CLASS_CLOSED = 'closed';\nGUI.CLASS_CLOSE_BUTTON = 'close-button';\nGUI.CLASS_CLOSE_TOP = 'close-top';\nGUI.CLASS_CLOSE_BOTTOM = 'close-bottom';\nGUI.CLASS_DRAG = 'drag';\nGUI.DEFAULT_WIDTH = 245;\nGUI.TEXT_CLOSED = 'Close Controls';\nGUI.TEXT_OPEN = 'Open Controls';\nGUI._keydownHandler = function (e) {\n  if (document.activeElement.type !== 'text' && (e.which === HIDE_KEY_CODE || e.keyCode === HIDE_KEY_CODE)) {\n    GUI.toggleHide();\n  }\n};\ndom.bind(window, 'keydown', GUI._keydownHandler, false);\nCommon.extend(GUI.prototype,\n{\n  add: function add(object, property) {\n    return _add(this, object, property, {\n      factoryArgs: Array.prototype.slice.call(arguments, 2)\n    });\n  },\n  addColor: function addColor(object, property) {\n    return _add(this, object, property, {\n      color: true\n    });\n  },\n  remove: function remove(controller) {\n    this.__ul.removeChild(controller.__li);\n    this.__controllers.splice(this.__controllers.indexOf(controller), 1);\n    var _this = this;\n    Common.defer(function () {\n      _this.onResize();\n    });\n  },\n  destroy: function destroy() {\n    if (this.parent) {\n      throw new Error('Only the root GUI should be removed with .destroy(). ' + 'For subfolders, use gui.removeFolder(folder) instead.');\n    }\n    if (this.autoPlace) {\n      autoPlaceContainer.removeChild(this.domElement);\n    }\n    var _this = this;\n    Common.each(this.__folders, function (subfolder) {\n      _this.removeFolder(subfolder);\n    });\n    dom.unbind(window, 'keydown', GUI._keydownHandler, false);\n    removeListeners(this);\n  },\n  addFolder: function addFolder(name) {\n    if (this.__folders[name] !== undefined) {\n      throw new Error('You already have a folder in this GUI by the' + ' name \"' + name + '\"');\n    }\n    var newGuiParams = { name: name, parent: this };\n    newGuiParams.autoPlace = this.autoPlace;\n    if (this.load &&\n    this.load.folders &&\n    this.load.folders[name]) {\n      newGuiParams.closed = this.load.folders[name].closed;\n      newGuiParams.load = this.load.folders[name];\n    }\n    var gui = new GUI(newGuiParams);\n    this.__folders[name] = gui;\n    var li = addRow(this, gui.domElement);\n    dom.addClass(li, 'folder');\n    return gui;\n  },\n  removeFolder: function removeFolder(folder) {\n    this.__ul.removeChild(folder.domElement.parentElement);\n    delete this.__folders[folder.name];\n    if (this.load &&\n    this.load.folders &&\n    this.load.folders[folder.name]) {\n      delete this.load.folders[folder.name];\n    }\n    removeListeners(folder);\n    var _this = this;\n    Common.each(folder.__folders, function (subfolder) {\n      folder.removeFolder(subfolder);\n    });\n    Common.defer(function () {\n      _this.onResize();\n    });\n  },\n  open: function open() {\n    this.closed = false;\n  },\n  close: function close() {\n    this.closed = true;\n  },\n  hide: function hide() {\n    this.domElement.style.display = 'none';\n  },\n  show: function show() {\n    this.domElement.style.display = '';\n  },\n  onResize: function onResize() {\n    var root = this.getRoot();\n    if (root.scrollable) {\n      var top = dom.getOffset(root.__ul).top;\n      var h = 0;\n      Common.each(root.__ul.childNodes, function (node) {\n        if (!(root.autoPlace && node === root.__save_row)) {\n          h += dom.getHeight(node);\n        }\n      });\n      if (window.innerHeight - top - CLOSE_BUTTON_HEIGHT < h) {\n        dom.addClass(root.domElement, GUI.CLASS_TOO_TALL);\n        root.__ul.style.height = window.innerHeight - top - CLOSE_BUTTON_HEIGHT + 'px';\n      } else {\n        dom.removeClass(root.domElement, GUI.CLASS_TOO_TALL);\n        root.__ul.style.height = 'auto';\n      }\n    }\n    if (root.__resize_handle) {\n      Common.defer(function () {\n        root.__resize_handle.style.height = root.__ul.offsetHeight + 'px';\n      });\n    }\n    if (root.__closeButton) {\n      root.__closeButton.style.width = root.width + 'px';\n    }\n  },\n  onResizeDebounced: Common.debounce(function () {\n    this.onResize();\n  }, 50),\n  remember: function remember() {\n    if (Common.isUndefined(SAVE_DIALOGUE)) {\n      SAVE_DIALOGUE = new CenteredDiv();\n      SAVE_DIALOGUE.domElement.innerHTML = saveDialogContents;\n    }\n    if (this.parent) {\n      throw new Error('You can only call remember on a top level GUI.');\n    }\n    var _this = this;\n    Common.each(Array.prototype.slice.call(arguments), function (object) {\n      if (_this.__rememberedObjects.length === 0) {\n        addSaveMenu(_this);\n      }\n      if (_this.__rememberedObjects.indexOf(object) === -1) {\n        _this.__rememberedObjects.push(object);\n      }\n    });\n    if (this.autoPlace) {\n      setWidth(this, this.width);\n    }\n  },\n  getRoot: function getRoot() {\n    var gui = this;\n    while (gui.parent) {\n      gui = gui.parent;\n    }\n    return gui;\n  },\n  getSaveObject: function getSaveObject() {\n    var toReturn = this.load;\n    toReturn.closed = this.closed;\n    if (this.__rememberedObjects.length > 0) {\n      toReturn.preset = this.preset;\n      if (!toReturn.remembered) {\n        toReturn.remembered = {};\n      }\n      toReturn.remembered[this.preset] = getCurrentPreset(this);\n    }\n    toReturn.folders = {};\n    Common.each(this.__folders, function (element, key) {\n      toReturn.folders[key] = element.getSaveObject();\n    });\n    return toReturn;\n  },\n  save: function save() {\n    if (!this.load.remembered) {\n      this.load.remembered = {};\n    }\n    this.load.remembered[this.preset] = getCurrentPreset(this);\n    markPresetModified(this, false);\n    this.saveToLocalStorageIfPossible();\n  },\n  saveAs: function saveAs(presetName) {\n    if (!this.load.remembered) {\n      this.load.remembered = {};\n      this.load.remembered[DEFAULT_DEFAULT_PRESET_NAME] = getCurrentPreset(this, true);\n    }\n    this.load.remembered[presetName] = getCurrentPreset(this);\n    this.preset = presetName;\n    addPresetOption(this, presetName, true);\n    this.saveToLocalStorageIfPossible();\n  },\n  revert: function revert(gui) {\n    Common.each(this.__controllers, function (controller) {\n      if (!this.getRoot().load.remembered) {\n        controller.setValue(controller.initialValue);\n      } else {\n        recallSavedValue(gui || this.getRoot(), controller);\n      }\n      if (controller.__onFinishChange) {\n        controller.__onFinishChange.call(controller, controller.getValue());\n      }\n    }, this);\n    Common.each(this.__folders, function (folder) {\n      folder.revert(folder);\n    });\n    if (!gui) {\n      markPresetModified(this.getRoot(), false);\n    }\n  },\n  listen: function listen(controller) {\n    var init = this.__listening.length === 0;\n    this.__listening.push(controller);\n    if (init) {\n      updateDisplays(this.__listening);\n    }\n  },\n  updateDisplay: function updateDisplay() {\n    Common.each(this.__controllers, function (controller) {\n      controller.updateDisplay();\n    });\n    Common.each(this.__folders, function (folder) {\n      folder.updateDisplay();\n    });\n  }\n});\nfunction addRow(gui, newDom, liBefore) {\n  var li = document.createElement('li');\n  if (newDom) {\n    li.appendChild(newDom);\n  }\n  if (liBefore) {\n    gui.__ul.insertBefore(li, liBefore);\n  } else {\n    gui.__ul.appendChild(li);\n  }\n  gui.onResize();\n  return li;\n}\nfunction removeListeners(gui) {\n  dom.unbind(window, 'resize', gui.__resizeHandler);\n  if (gui.saveToLocalStorageIfPossible) {\n    dom.unbind(window, 'unload', gui.saveToLocalStorageIfPossible);\n  }\n}\nfunction markPresetModified(gui, modified) {\n  var opt = gui.__preset_select[gui.__preset_select.selectedIndex];\n  if (modified) {\n    opt.innerHTML = opt.value + '*';\n  } else {\n    opt.innerHTML = opt.value;\n  }\n}\nfunction augmentController(gui, li, controller) {\n  controller.__li = li;\n  controller.__gui = gui;\n  Common.extend(controller,                                   {\n    options: function options(_options) {\n      if (arguments.length > 1) {\n        var nextSibling = controller.__li.nextElementSibling;\n        controller.remove();\n        return _add(gui, controller.object, controller.property, {\n          before: nextSibling,\n          factoryArgs: [Common.toArray(arguments)]\n        });\n      }\n      if (Common.isArray(_options) || Common.isObject(_options)) {\n        var _nextSibling = controller.__li.nextElementSibling;\n        controller.remove();\n        return _add(gui, controller.object, controller.property, {\n          before: _nextSibling,\n          factoryArgs: [_options]\n        });\n      }\n    },\n    name: function name(_name) {\n      controller.__li.firstElementChild.firstElementChild.innerHTML = _name;\n      return controller;\n    },\n    listen: function listen() {\n      controller.__gui.listen(controller);\n      return controller;\n    },\n    remove: function remove() {\n      controller.__gui.remove(controller);\n      return controller;\n    }\n  });\n  if (controller instanceof NumberControllerSlider) {\n    var box = new NumberControllerBox(controller.object, controller.property, { min: controller.__min, max: controller.__max, step: controller.__step });\n    Common.each(['updateDisplay', 'onChange', 'onFinishChange', 'step', 'min', 'max'], function (method) {\n      var pc = controller[method];\n      var pb = box[method];\n      controller[method] = box[method] = function () {\n        var args = Array.prototype.slice.call(arguments);\n        pb.apply(box, args);\n        return pc.apply(controller, args);\n      };\n    });\n    dom.addClass(li, 'has-slider');\n    controller.domElement.insertBefore(box.domElement, controller.domElement.firstElementChild);\n  } else if (controller instanceof NumberControllerBox) {\n    var r = function r(returned) {\n      if (Common.isNumber(controller.__min) && Common.isNumber(controller.__max)) {\n        var oldName = controller.__li.firstElementChild.firstElementChild.innerHTML;\n        var wasListening = controller.__gui.__listening.indexOf(controller) > -1;\n        controller.remove();\n        var newController = _add(gui, controller.object, controller.property, {\n          before: controller.__li.nextElementSibling,\n          factoryArgs: [controller.__min, controller.__max, controller.__step]\n        });\n        newController.name(oldName);\n        if (wasListening) newController.listen();\n        return newController;\n      }\n      return returned;\n    };\n    controller.min = Common.compose(r, controller.min);\n    controller.max = Common.compose(r, controller.max);\n  } else if (controller instanceof BooleanController) {\n    dom.bind(li, 'click', function () {\n      dom.fakeEvent(controller.__checkbox, 'click');\n    });\n    dom.bind(controller.__checkbox, 'click', function (e) {\n      e.stopPropagation();\n    });\n  } else if (controller instanceof FunctionController) {\n    dom.bind(li, 'click', function () {\n      dom.fakeEvent(controller.__button, 'click');\n    });\n    dom.bind(li, 'mouseover', function () {\n      dom.addClass(controller.__button, 'hover');\n    });\n    dom.bind(li, 'mouseout', function () {\n      dom.removeClass(controller.__button, 'hover');\n    });\n  } else if (controller instanceof ColorController) {\n    dom.addClass(li, 'color');\n    controller.updateDisplay = Common.compose(function (val) {\n      li.style.borderLeftColor = controller.__color.toString();\n      return val;\n    }, controller.updateDisplay);\n    controller.updateDisplay();\n  }\n  controller.setValue = Common.compose(function (val) {\n    if (gui.getRoot().__preset_select && controller.isModified()) {\n      markPresetModified(gui.getRoot(), true);\n    }\n    return val;\n  }, controller.setValue);\n}\nfunction recallSavedValue(gui, controller) {\n  var root = gui.getRoot();\n  var matchedIndex = root.__rememberedObjects.indexOf(controller.object);\n  if (matchedIndex !== -1) {\n    var controllerMap = root.__rememberedObjectIndecesToControllers[matchedIndex];\n    if (controllerMap === undefined) {\n      controllerMap = {};\n      root.__rememberedObjectIndecesToControllers[matchedIndex] = controllerMap;\n    }\n    controllerMap[controller.property] = controller;\n    if (root.load && root.load.remembered) {\n      var presetMap = root.load.remembered;\n      var preset = void 0;\n      if (presetMap[gui.preset]) {\n        preset = presetMap[gui.preset];\n      } else if (presetMap[DEFAULT_DEFAULT_PRESET_NAME]) {\n        preset = presetMap[DEFAULT_DEFAULT_PRESET_NAME];\n      } else {\n        return;\n      }\n      if (preset[matchedIndex] && preset[matchedIndex][controller.property] !== undefined) {\n        var value = preset[matchedIndex][controller.property];\n        controller.initialValue = value;\n        controller.setValue(value);\n      }\n    }\n  }\n}\nfunction _add(gui, object, property, params) {\n  if (object[property] === undefined) {\n    throw new Error('Object \"' + object + '\" has no property \"' + property + '\"');\n  }\n  var controller = void 0;\n  if (params.color) {\n    controller = new ColorController(object, property);\n  } else {\n    var factoryArgs = [object, property].concat(params.factoryArgs);\n    controller = ControllerFactory.apply(gui, factoryArgs);\n  }\n  if (params.before instanceof Controller) {\n    params.before = params.before.__li;\n  }\n  recallSavedValue(gui, controller);\n  dom.addClass(controller.domElement, 'c');\n  var name = document.createElement('span');\n  dom.addClass(name, 'property-name');\n  name.innerHTML = controller.property;\n  var container = document.createElement('div');\n  container.appendChild(name);\n  container.appendChild(controller.domElement);\n  var li = addRow(gui, container, params.before);\n  dom.addClass(li, GUI.CLASS_CONTROLLER_ROW);\n  if (controller instanceof ColorController) {\n    dom.addClass(li, 'color');\n  } else {\n    dom.addClass(li, _typeof(controller.getValue()));\n  }\n  augmentController(gui, li, controller);\n  gui.__controllers.push(controller);\n  return controller;\n}\nfunction getLocalStorageHash(gui, key) {\n  return document.location.href + '.' + key;\n}\nfunction addPresetOption(gui, name, setSelected) {\n  var opt = document.createElement('option');\n  opt.innerHTML = name;\n  opt.value = name;\n  gui.__preset_select.appendChild(opt);\n  if (setSelected) {\n    gui.__preset_select.selectedIndex = gui.__preset_select.length - 1;\n  }\n}\nfunction showHideExplain(gui, explain) {\n  explain.style.display = gui.useLocalStorage ? 'block' : 'none';\n}\nfunction addSaveMenu(gui) {\n  var div = gui.__save_row = document.createElement('li');\n  dom.addClass(gui.domElement, 'has-save');\n  gui.__ul.insertBefore(div, gui.__ul.firstChild);\n  dom.addClass(div, 'save-row');\n  var gears = document.createElement('span');\n  gears.innerHTML = '&nbsp;';\n  dom.addClass(gears, 'button gears');\n  var button = document.createElement('span');\n  button.innerHTML = 'Save';\n  dom.addClass(button, 'button');\n  dom.addClass(button, 'save');\n  var button2 = document.createElement('span');\n  button2.innerHTML = 'New';\n  dom.addClass(button2, 'button');\n  dom.addClass(button2, 'save-as');\n  var button3 = document.createElement('span');\n  button3.innerHTML = 'Revert';\n  dom.addClass(button3, 'button');\n  dom.addClass(button3, 'revert');\n  var select = gui.__preset_select = document.createElement('select');\n  if (gui.load && gui.load.remembered) {\n    Common.each(gui.load.remembered, function (value, key) {\n      addPresetOption(gui, key, key === gui.preset);\n    });\n  } else {\n    addPresetOption(gui, DEFAULT_DEFAULT_PRESET_NAME, false);\n  }\n  dom.bind(select, 'change', function () {\n    for (var index = 0; index < gui.__preset_select.length; index++) {\n      gui.__preset_select[index].innerHTML = gui.__preset_select[index].value;\n    }\n    gui.preset = this.value;\n  });\n  div.appendChild(select);\n  div.appendChild(gears);\n  div.appendChild(button);\n  div.appendChild(button2);\n  div.appendChild(button3);\n  if (SUPPORTS_LOCAL_STORAGE) {\n    var explain = document.getElementById('dg-local-explain');\n    var localStorageCheckBox = document.getElementById('dg-local-storage');\n    var saveLocally = document.getElementById('dg-save-locally');\n    saveLocally.style.display = 'block';\n    if (localStorage.getItem(getLocalStorageHash(gui, 'isLocal')) === 'true') {\n      localStorageCheckBox.setAttribute('checked', 'checked');\n    }\n    showHideExplain(gui, explain);\n    dom.bind(localStorageCheckBox, 'change', function () {\n      gui.useLocalStorage = !gui.useLocalStorage;\n      showHideExplain(gui, explain);\n    });\n  }\n  var newConstructorTextArea = document.getElementById('dg-new-constructor');\n  dom.bind(newConstructorTextArea, 'keydown', function (e) {\n    if (e.metaKey && (e.which === 67 || e.keyCode === 67)) {\n      SAVE_DIALOGUE.hide();\n    }\n  });\n  dom.bind(gears, 'click', function () {\n    newConstructorTextArea.innerHTML = JSON.stringify(gui.getSaveObject(), undefined, 2);\n    SAVE_DIALOGUE.show();\n    newConstructorTextArea.focus();\n    newConstructorTextArea.select();\n  });\n  dom.bind(button, 'click', function () {\n    gui.save();\n  });\n  dom.bind(button2, 'click', function () {\n    var presetName = prompt('Enter a new preset name.');\n    if (presetName) {\n      gui.saveAs(presetName);\n    }\n  });\n  dom.bind(button3, 'click', function () {\n    gui.revert();\n  });\n}\nfunction addResizeHandle(gui) {\n  var pmouseX = void 0;\n  gui.__resize_handle = document.createElement('div');\n  Common.extend(gui.__resize_handle.style, {\n    width: '6px',\n    marginLeft: '-3px',\n    height: '200px',\n    cursor: 'ew-resize',\n    position: 'absolute'\n  });\n  function drag(e) {\n    e.preventDefault();\n    gui.width += pmouseX - e.clientX;\n    gui.onResize();\n    pmouseX = e.clientX;\n    return false;\n  }\n  function dragStop() {\n    dom.removeClass(gui.__closeButton, GUI.CLASS_DRAG);\n    dom.unbind(window, 'mousemove', drag);\n    dom.unbind(window, 'mouseup', dragStop);\n  }\n  function dragStart(e) {\n    e.preventDefault();\n    pmouseX = e.clientX;\n    dom.addClass(gui.__closeButton, GUI.CLASS_DRAG);\n    dom.bind(window, 'mousemove', drag);\n    dom.bind(window, 'mouseup', dragStop);\n    return false;\n  }\n  dom.bind(gui.__resize_handle, 'mousedown', dragStart);\n  dom.bind(gui.__closeButton, 'mousedown', dragStart);\n  gui.domElement.insertBefore(gui.__resize_handle, gui.domElement.firstElementChild);\n}\nfunction setWidth(gui, w) {\n  gui.domElement.style.width = w + 'px';\n  if (gui.__save_row && gui.autoPlace) {\n    gui.__save_row.style.width = w + 'px';\n  }\n  if (gui.__closeButton) {\n    gui.__closeButton.style.width = w + 'px';\n  }\n}\nfunction getCurrentPreset(gui, useInitialValues) {\n  var toReturn = {};\n  Common.each(gui.__rememberedObjects, function (val, index) {\n    var savedValues = {};\n    var controllerMap = gui.__rememberedObjectIndecesToControllers[index];\n    Common.each(controllerMap, function (controller, property) {\n      savedValues[property] = useInitialValues ? controller.initialValue : controller.getValue();\n    });\n    toReturn[index] = savedValues;\n  });\n  return toReturn;\n}\nfunction setPresetSelectIndex(gui) {\n  for (var index = 0; index < gui.__preset_select.length; index++) {\n    if (gui.__preset_select[index].value === gui.preset) {\n      gui.__preset_select.selectedIndex = index;\n    }\n  }\n}\nfunction updateDisplays(controllerArray) {\n  if (controllerArray.length !== 0) {\n    requestAnimationFrame$1.call(window, function () {\n      updateDisplays(controllerArray);\n    });\n  }\n  Common.each(controllerArray, function (c) {\n    c.updateDisplay();\n  });\n}\n\nvar color = {\n  Color: Color,\n  math: ColorMath,\n  interpret: interpret\n};\nvar controllers = {\n  Controller: Controller,\n  BooleanController: BooleanController,\n  OptionController: OptionController,\n  StringController: StringController,\n  NumberController: NumberController,\n  NumberControllerBox: NumberControllerBox,\n  NumberControllerSlider: NumberControllerSlider,\n  FunctionController: FunctionController,\n  ColorController: ColorController\n};\nvar dom$1 = { dom: dom };\nvar gui = { GUI: GUI };\nvar GUI$1 = GUI;\nvar index = {\n  color: color,\n  controllers: controllers,\n  dom: dom$1,\n  gui: gui,\n  GUI: GUI$1\n};\n\nexport { color, controllers, dom$1 as dom, gui, GUI$1 as GUI };\nexport default index;\n//# sourceMappingURL=dat.gui.module.js.map\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// This is CodeMirror (https://codemirror.net), a code editor\n// implemented in JavaScript on top of the browser's DOM.\n//\n// You can find some technical background for some of the code below\n// at http://marijnhaverbeke.nl/blog/#cm-internals .\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.CodeMirror = factory());\n}(this, (function () { 'use strict';\n\n  // Kludges for bugs and behavior differences that can't be feature\n  // detected are enabled based on userAgent etc sniffing.\n  var userAgent = navigator.userAgent;\n  var platform = navigator.platform;\n\n  var gecko = /gecko\\/\\d/i.test(userAgent);\n  var ie_upto10 = /MSIE \\d/.test(userAgent);\n  var ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(userAgent);\n  var edge = /Edge\\/(\\d+)/.exec(userAgent);\n  var ie = ie_upto10 || ie_11up || edge;\n  var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : +(edge || ie_11up)[1]);\n  var webkit = !edge && /WebKit\\//.test(userAgent);\n  var qtwebkit = webkit && /Qt\\/\\d+\\.\\d+/.test(userAgent);\n  var chrome = !edge && /Chrome\\//.test(userAgent);\n  var presto = /Opera\\//.test(userAgent);\n  var safari = /Apple Computer/.test(navigator.vendor);\n  var mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(userAgent);\n  var phantom = /PhantomJS/.test(userAgent);\n\n  var ios = !edge && /AppleWebKit/.test(userAgent) && /Mobile\\/\\w+/.test(userAgent);\n  var android = /Android/.test(userAgent);\n  // This is woefully incomplete. Suggestions for alternative methods welcome.\n  var mobile = ios || android || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);\n  var mac = ios || /Mac/.test(platform);\n  var chromeOS = /\\bCrOS\\b/.test(userAgent);\n  var windows = /win/i.test(platform);\n\n  var presto_version = presto && userAgent.match(/Version\\/(\\d*\\.\\d*)/);\n  if (presto_version) { presto_version = Number(presto_version[1]); }\n  if (presto_version && presto_version >= 15) { presto = false; webkit = true; }\n  // Some browsers use the wrong event properties to signal cmd/ctrl on OS X\n  var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));\n  var captureRightClick = gecko || (ie && ie_version >= 9);\n\n  function classTest(cls) { return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\") }\n\n  var rmClass = function(node, cls) {\n    var current = node.className;\n    var match = classTest(cls).exec(current);\n    if (match) {\n      var after = current.slice(match.index + match[0].length);\n      node.className = current.slice(0, match.index) + (after ? match[1] + after : \"\");\n    }\n  };\n\n  function removeChildren(e) {\n    for (var count = e.childNodes.length; count > 0; --count)\n      { e.removeChild(e.firstChild); }\n    return e\n  }\n\n  function removeChildrenAndAdd(parent, e) {\n    return removeChildren(parent).appendChild(e)\n  }\n\n  function elt(tag, content, className, style) {\n    var e = document.createElement(tag);\n    if (className) { e.className = className; }\n    if (style) { e.style.cssText = style; }\n    if (typeof content == \"string\") { e.appendChild(document.createTextNode(content)); }\n    else if (content) { for (var i = 0; i < content.length; ++i) { e.appendChild(content[i]); } }\n    return e\n  }\n  // wrapper for elt, which removes the elt from the accessibility tree\n  function eltP(tag, content, className, style) {\n    var e = elt(tag, content, className, style);\n    e.setAttribute(\"role\", \"presentation\");\n    return e\n  }\n\n  var range;\n  if (document.createRange) { range = function(node, start, end, endNode) {\n    var r = document.createRange();\n    r.setEnd(endNode || node, end);\n    r.setStart(node, start);\n    return r\n  }; }\n  else { range = function(node, start, end) {\n    var r = document.body.createTextRange();\n    try { r.moveToElementText(node.parentNode); }\n    catch(e) { return r }\n    r.collapse(true);\n    r.moveEnd(\"character\", end);\n    r.moveStart(\"character\", start);\n    return r\n  }; }\n\n  function contains(parent, child) {\n    if (child.nodeType == 3) // Android browser always returns false when child is a textnode\n      { child = child.parentNode; }\n    if (parent.contains)\n      { return parent.contains(child) }\n    do {\n      if (child.nodeType == 11) { child = child.host; }\n      if (child == parent) { return true }\n    } while (child = child.parentNode)\n  }\n\n  function activeElt() {\n    // IE and Edge may throw an \"Unspecified Error\" when accessing document.activeElement.\n    // IE < 10 will throw when accessed while the page is loading or in an iframe.\n    // IE > 9 and Edge will throw when accessed in an iframe if document.body is unavailable.\n    var activeElement;\n    try {\n      activeElement = document.activeElement;\n    } catch(e) {\n      activeElement = document.body || null;\n    }\n    while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement)\n      { activeElement = activeElement.shadowRoot.activeElement; }\n    return activeElement\n  }\n\n  function addClass(node, cls) {\n    var current = node.className;\n    if (!classTest(cls).test(current)) { node.className += (current ? \" \" : \"\") + cls; }\n  }\n  function joinClasses(a, b) {\n    var as = a.split(\" \");\n    for (var i = 0; i < as.length; i++)\n      { if (as[i] && !classTest(as[i]).test(b)) { b += \" \" + as[i]; } }\n    return b\n  }\n\n  var selectInput = function(node) { node.select(); };\n  if (ios) // Mobile Safari apparently has a bug where select() is broken.\n    { selectInput = function(node) { node.selectionStart = 0; node.selectionEnd = node.value.length; }; }\n  else if (ie) // Suppress mysterious IE10 errors\n    { selectInput = function(node) { try { node.select(); } catch(_e) {} }; }\n\n  function bind(f) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    return function(){return f.apply(null, args)}\n  }\n\n  function copyObj(obj, target, overwrite) {\n    if (!target) { target = {}; }\n    for (var prop in obj)\n      { if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop)))\n        { target[prop] = obj[prop]; } }\n    return target\n  }\n\n  // Counts the column offset in a string, taking tabs into account.\n  // Used mostly to find indentation.\n  function countColumn(string, end, tabSize, startIndex, startValue) {\n    if (end == null) {\n      end = string.search(/[^\\s\\u00a0]/);\n      if (end == -1) { end = string.length; }\n    }\n    for (var i = startIndex || 0, n = startValue || 0;;) {\n      var nextTab = string.indexOf(\"\\t\", i);\n      if (nextTab < 0 || nextTab >= end)\n        { return n + (end - i) }\n      n += nextTab - i;\n      n += tabSize - (n % tabSize);\n      i = nextTab + 1;\n    }\n  }\n\n  var Delayed = function() {\n    this.id = null;\n    this.f = null;\n    this.time = 0;\n    this.handler = bind(this.onTimeout, this);\n  };\n  Delayed.prototype.onTimeout = function (self) {\n    self.id = 0;\n    if (self.time <= +new Date) {\n      self.f();\n    } else {\n      setTimeout(self.handler, self.time - +new Date);\n    }\n  };\n  Delayed.prototype.set = function (ms, f) {\n    this.f = f;\n    var time = +new Date + ms;\n    if (!this.id || time < this.time) {\n      clearTimeout(this.id);\n      this.id = setTimeout(this.handler, ms);\n      this.time = time;\n    }\n  };\n\n  function indexOf(array, elt) {\n    for (var i = 0; i < array.length; ++i)\n      { if (array[i] == elt) { return i } }\n    return -1\n  }\n\n  // Number of pixels added to scroller and sizer to hide scrollbar\n  var scrollerGap = 30;\n\n  // Returned or thrown by various protocols to signal 'I'm not\n  // handling this'.\n  var Pass = {toString: function(){return \"CodeMirror.Pass\"}};\n\n  // Reused option objects for setSelection & friends\n  var sel_dontScroll = {scroll: false}, sel_mouse = {origin: \"*mouse\"}, sel_move = {origin: \"+move\"};\n\n  // The inverse of countColumn -- find the offset that corresponds to\n  // a particular column.\n  function findColumn(string, goal, tabSize) {\n    for (var pos = 0, col = 0;;) {\n      var nextTab = string.indexOf(\"\\t\", pos);\n      if (nextTab == -1) { nextTab = string.length; }\n      var skipped = nextTab - pos;\n      if (nextTab == string.length || col + skipped >= goal)\n        { return pos + Math.min(skipped, goal - col) }\n      col += nextTab - pos;\n      col += tabSize - (col % tabSize);\n      pos = nextTab + 1;\n      if (col >= goal) { return pos }\n    }\n  }\n\n  var spaceStrs = [\"\"];\n  function spaceStr(n) {\n    while (spaceStrs.length <= n)\n      { spaceStrs.push(lst(spaceStrs) + \" \"); }\n    return spaceStrs[n]\n  }\n\n  function lst(arr) { return arr[arr.length-1] }\n\n  function map(array, f) {\n    var out = [];\n    for (var i = 0; i < array.length; i++) { out[i] = f(array[i], i); }\n    return out\n  }\n\n  function insertSorted(array, value, score) {\n    var pos = 0, priority = score(value);\n    while (pos < array.length && score(array[pos]) <= priority) { pos++; }\n    array.splice(pos, 0, value);\n  }\n\n  function nothing() {}\n\n  function createObj(base, props) {\n    var inst;\n    if (Object.create) {\n      inst = Object.create(base);\n    } else {\n      nothing.prototype = base;\n      inst = new nothing();\n    }\n    if (props) { copyObj(props, inst); }\n    return inst\n  }\n\n  var nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\n  function isWordCharBasic(ch) {\n    return /\\w/.test(ch) || ch > \"\\x80\" &&\n      (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch))\n  }\n  function isWordChar(ch, helper) {\n    if (!helper) { return isWordCharBasic(ch) }\n    if (helper.source.indexOf(\"\\\\w\") > -1 && isWordCharBasic(ch)) { return true }\n    return helper.test(ch)\n  }\n\n  function isEmpty(obj) {\n    for (var n in obj) { if (obj.hasOwnProperty(n) && obj[n]) { return false } }\n    return true\n  }\n\n  // Extending unicode characters. A series of a non-extending char +\n  // any number of extending chars is treated as a single unit as far\n  // as editing and measuring is concerned. This is not fully correct,\n  // since some scripts/fonts/browsers also treat other configurations\n  // of code points as a group.\n  var extendingChars = /[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;\n  function isExtendingChar(ch) { return ch.charCodeAt(0) >= 768 && extendingChars.test(ch) }\n\n  // Returns a number from the range [`0`; `str.length`] unless `pos` is outside that range.\n  function skipExtendingChars(str, pos, dir) {\n    while ((dir < 0 ? pos > 0 : pos < str.length) && isExtendingChar(str.charAt(pos))) { pos += dir; }\n    return pos\n  }\n\n  // Returns the value from the range [`from`; `to`] that satisfies\n  // `pred` and is closest to `from`. Assumes that at least `to`\n  // satisfies `pred`. Supports `from` being greater than `to`.\n  function findFirst(pred, from, to) {\n    // At any point we are certain `to` satisfies `pred`, don't know\n    // whether `from` does.\n    var dir = from > to ? -1 : 1;\n    for (;;) {\n      if (from == to) { return from }\n      var midF = (from + to) / 2, mid = dir < 0 ? Math.ceil(midF) : Math.floor(midF);\n      if (mid == from) { return pred(mid) ? from : to }\n      if (pred(mid)) { to = mid; }\n      else { from = mid + dir; }\n    }\n  }\n\n  // BIDI HELPERS\n\n  function iterateBidiSections(order, from, to, f) {\n    if (!order) { return f(from, to, \"ltr\", 0) }\n    var found = false;\n    for (var i = 0; i < order.length; ++i) {\n      var part = order[i];\n      if (part.from < to && part.to > from || from == to && part.to == from) {\n        f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \"rtl\" : \"ltr\", i);\n        found = true;\n      }\n    }\n    if (!found) { f(from, to, \"ltr\"); }\n  }\n\n  var bidiOther = null;\n  function getBidiPartAt(order, ch, sticky) {\n    var found;\n    bidiOther = null;\n    for (var i = 0; i < order.length; ++i) {\n      var cur = order[i];\n      if (cur.from < ch && cur.to > ch) { return i }\n      if (cur.to == ch) {\n        if (cur.from != cur.to && sticky == \"before\") { found = i; }\n        else { bidiOther = i; }\n      }\n      if (cur.from == ch) {\n        if (cur.from != cur.to && sticky != \"before\") { found = i; }\n        else { bidiOther = i; }\n      }\n    }\n    return found != null ? found : bidiOther\n  }\n\n  // Bidirectional ordering algorithm\n  // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm\n  // that this (partially) implements.\n\n  // One-char codes used for character types:\n  // L (L):   Left-to-Right\n  // R (R):   Right-to-Left\n  // r (AL):  Right-to-Left Arabic\n  // 1 (EN):  European Number\n  // + (ES):  European Number Separator\n  // % (ET):  European Number Terminator\n  // n (AN):  Arabic Number\n  // , (CS):  Common Number Separator\n  // m (NSM): Non-Spacing Mark\n  // b (BN):  Boundary Neutral\n  // s (B):   Paragraph Separator\n  // t (S):   Segment Separator\n  // w (WS):  Whitespace\n  // N (ON):  Other Neutrals\n\n  // Returns null if characters are ordered as they appear\n  // (left-to-right), or an array of sections ({from, to, level}\n  // objects) in the order in which they occur visually.\n  var bidiOrdering = (function() {\n    // Character types for codepoints 0 to 0xff\n    var lowTypes = \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\";\n    // Character types for codepoints 0x600 to 0x6f9\n    var arabicTypes = \"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\";\n    function charType(code) {\n      if (code <= 0xf7) { return lowTypes.charAt(code) }\n      else if (0x590 <= code && code <= 0x5f4) { return \"R\" }\n      else if (0x600 <= code && code <= 0x6f9) { return arabicTypes.charAt(code - 0x600) }\n      else if (0x6ee <= code && code <= 0x8ac) { return \"r\" }\n      else if (0x2000 <= code && code <= 0x200b) { return \"w\" }\n      else if (code == 0x200c) { return \"b\" }\n      else { return \"L\" }\n    }\n\n    var bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n    var isNeutral = /[stwN]/, isStrong = /[LRr]/, countsAsLeft = /[Lb1n]/, countsAsNum = /[1n]/;\n\n    function BidiSpan(level, from, to) {\n      this.level = level;\n      this.from = from; this.to = to;\n    }\n\n    return function(str, direction) {\n      var outerType = direction == \"ltr\" ? \"L\" : \"R\";\n\n      if (str.length == 0 || direction == \"ltr\" && !bidiRE.test(str)) { return false }\n      var len = str.length, types = [];\n      for (var i = 0; i < len; ++i)\n        { types.push(charType(str.charCodeAt(i))); }\n\n      // W1. Examine each non-spacing mark (NSM) in the level run, and\n      // change the type of the NSM to the type of the previous\n      // character. If the NSM is at the start of the level run, it will\n      // get the type of sor.\n      for (var i$1 = 0, prev = outerType; i$1 < len; ++i$1) {\n        var type = types[i$1];\n        if (type == \"m\") { types[i$1] = prev; }\n        else { prev = type; }\n      }\n\n      // W2. Search backwards from each instance of a European number\n      // until the first strong type (R, L, AL, or sor) is found. If an\n      // AL is found, change the type of the European number to Arabic\n      // number.\n      // W3. Change all ALs to R.\n      for (var i$2 = 0, cur = outerType; i$2 < len; ++i$2) {\n        var type$1 = types[i$2];\n        if (type$1 == \"1\" && cur == \"r\") { types[i$2] = \"n\"; }\n        else if (isStrong.test(type$1)) { cur = type$1; if (type$1 == \"r\") { types[i$2] = \"R\"; } }\n      }\n\n      // W4. A single European separator between two European numbers\n      // changes to a European number. A single common separator between\n      // two numbers of the same type changes to that type.\n      for (var i$3 = 1, prev$1 = types[0]; i$3 < len - 1; ++i$3) {\n        var type$2 = types[i$3];\n        if (type$2 == \"+\" && prev$1 == \"1\" && types[i$3+1] == \"1\") { types[i$3] = \"1\"; }\n        else if (type$2 == \",\" && prev$1 == types[i$3+1] &&\n                 (prev$1 == \"1\" || prev$1 == \"n\")) { types[i$3] = prev$1; }\n        prev$1 = type$2;\n      }\n\n      // W5. A sequence of European terminators adjacent to European\n      // numbers changes to all European numbers.\n      // W6. Otherwise, separators and terminators change to Other\n      // Neutral.\n      for (var i$4 = 0; i$4 < len; ++i$4) {\n        var type$3 = types[i$4];\n        if (type$3 == \",\") { types[i$4] = \"N\"; }\n        else if (type$3 == \"%\") {\n          var end = (void 0);\n          for (end = i$4 + 1; end < len && types[end] == \"%\"; ++end) {}\n          var replace = (i$4 && types[i$4-1] == \"!\") || (end < len && types[end] == \"1\") ? \"1\" : \"N\";\n          for (var j = i$4; j < end; ++j) { types[j] = replace; }\n          i$4 = end - 1;\n        }\n      }\n\n      // W7. Search backwards from each instance of a European number\n      // until the first strong type (R, L, or sor) is found. If an L is\n      // found, then change the type of the European number to L.\n      for (var i$5 = 0, cur$1 = outerType; i$5 < len; ++i$5) {\n        var type$4 = types[i$5];\n        if (cur$1 == \"L\" && type$4 == \"1\") { types[i$5] = \"L\"; }\n        else if (isStrong.test(type$4)) { cur$1 = type$4; }\n      }\n\n      // N1. A sequence of neutrals takes the direction of the\n      // surrounding strong text if the text on both sides has the same\n      // direction. European and Arabic numbers act as if they were R in\n      // terms of their influence on neutrals. Start-of-level-run (sor)\n      // and end-of-level-run (eor) are used at level run boundaries.\n      // N2. Any remaining neutrals take the embedding direction.\n      for (var i$6 = 0; i$6 < len; ++i$6) {\n        if (isNeutral.test(types[i$6])) {\n          var end$1 = (void 0);\n          for (end$1 = i$6 + 1; end$1 < len && isNeutral.test(types[end$1]); ++end$1) {}\n          var before = (i$6 ? types[i$6-1] : outerType) == \"L\";\n          var after = (end$1 < len ? types[end$1] : outerType) == \"L\";\n          var replace$1 = before == after ? (before ? \"L\" : \"R\") : outerType;\n          for (var j$1 = i$6; j$1 < end$1; ++j$1) { types[j$1] = replace$1; }\n          i$6 = end$1 - 1;\n        }\n      }\n\n      // Here we depart from the documented algorithm, in order to avoid\n      // building up an actual levels array. Since there are only three\n      // levels (0, 1, 2) in an implementation that doesn't take\n      // explicit embedding into account, we can build up the order on\n      // the fly, without following the level-based algorithm.\n      var order = [], m;\n      for (var i$7 = 0; i$7 < len;) {\n        if (countsAsLeft.test(types[i$7])) {\n          var start = i$7;\n          for (++i$7; i$7 < len && countsAsLeft.test(types[i$7]); ++i$7) {}\n          order.push(new BidiSpan(0, start, i$7));\n        } else {\n          var pos = i$7, at = order.length;\n          for (++i$7; i$7 < len && types[i$7] != \"L\"; ++i$7) {}\n          for (var j$2 = pos; j$2 < i$7;) {\n            if (countsAsNum.test(types[j$2])) {\n              if (pos < j$2) { order.splice(at, 0, new BidiSpan(1, pos, j$2)); }\n              var nstart = j$2;\n              for (++j$2; j$2 < i$7 && countsAsNum.test(types[j$2]); ++j$2) {}\n              order.splice(at, 0, new BidiSpan(2, nstart, j$2));\n              pos = j$2;\n            } else { ++j$2; }\n          }\n          if (pos < i$7) { order.splice(at, 0, new BidiSpan(1, pos, i$7)); }\n        }\n      }\n      if (direction == \"ltr\") {\n        if (order[0].level == 1 && (m = str.match(/^\\s+/))) {\n          order[0].from = m[0].length;\n          order.unshift(new BidiSpan(0, 0, m[0].length));\n        }\n        if (lst(order).level == 1 && (m = str.match(/\\s+$/))) {\n          lst(order).to -= m[0].length;\n          order.push(new BidiSpan(0, len - m[0].length, len));\n        }\n      }\n\n      return direction == \"rtl\" ? order.reverse() : order\n    }\n  })();\n\n  // Get the bidi ordering for the given line (and cache it). Returns\n  // false for lines that are fully left-to-right, and an array of\n  // BidiSpan objects otherwise.\n  function getOrder(line, direction) {\n    var order = line.order;\n    if (order == null) { order = line.order = bidiOrdering(line.text, direction); }\n    return order\n  }\n\n  // EVENT HANDLING\n\n  // Lightweight event framework. on/off also work on DOM nodes,\n  // registering native DOM handlers.\n\n  var noHandlers = [];\n\n  var on = function(emitter, type, f) {\n    if (emitter.addEventListener) {\n      emitter.addEventListener(type, f, false);\n    } else if (emitter.attachEvent) {\n      emitter.attachEvent(\"on\" + type, f);\n    } else {\n      var map$$1 = emitter._handlers || (emitter._handlers = {});\n      map$$1[type] = (map$$1[type] || noHandlers).concat(f);\n    }\n  };\n\n  function getHandlers(emitter, type) {\n    return emitter._handlers && emitter._handlers[type] || noHandlers\n  }\n\n  function off(emitter, type, f) {\n    if (emitter.removeEventListener) {\n      emitter.removeEventListener(type, f, false);\n    } else if (emitter.detachEvent) {\n      emitter.detachEvent(\"on\" + type, f);\n    } else {\n      var map$$1 = emitter._handlers, arr = map$$1 && map$$1[type];\n      if (arr) {\n        var index = indexOf(arr, f);\n        if (index > -1)\n          { map$$1[type] = arr.slice(0, index).concat(arr.slice(index + 1)); }\n      }\n    }\n  }\n\n  function signal(emitter, type /*, values...*/) {\n    var handlers = getHandlers(emitter, type);\n    if (!handlers.length) { return }\n    var args = Array.prototype.slice.call(arguments, 2);\n    for (var i = 0; i < handlers.length; ++i) { handlers[i].apply(null, args); }\n  }\n\n  // The DOM events that CodeMirror handles can be overridden by\n  // registering a (non-DOM) handler on the editor for the event name,\n  // and preventDefault-ing the event in that handler.\n  function signalDOMEvent(cm, e, override) {\n    if (typeof e == \"string\")\n      { e = {type: e, preventDefault: function() { this.defaultPrevented = true; }}; }\n    signal(cm, override || e.type, cm, e);\n    return e_defaultPrevented(e) || e.codemirrorIgnore\n  }\n\n  function signalCursorActivity(cm) {\n    var arr = cm._handlers && cm._handlers.cursorActivity;\n    if (!arr) { return }\n    var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);\n    for (var i = 0; i < arr.length; ++i) { if (indexOf(set, arr[i]) == -1)\n      { set.push(arr[i]); } }\n  }\n\n  function hasHandler(emitter, type) {\n    return getHandlers(emitter, type).length > 0\n  }\n\n  // Add on and off methods to a constructor's prototype, to make\n  // registering events on such objects more convenient.\n  function eventMixin(ctor) {\n    ctor.prototype.on = function(type, f) {on(this, type, f);};\n    ctor.prototype.off = function(type, f) {off(this, type, f);};\n  }\n\n  // Due to the fact that we still support jurassic IE versions, some\n  // compatibility wrappers are needed.\n\n  function e_preventDefault(e) {\n    if (e.preventDefault) { e.preventDefault(); }\n    else { e.returnValue = false; }\n  }\n  function e_stopPropagation(e) {\n    if (e.stopPropagation) { e.stopPropagation(); }\n    else { e.cancelBubble = true; }\n  }\n  function e_defaultPrevented(e) {\n    return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false\n  }\n  function e_stop(e) {e_preventDefault(e); e_stopPropagation(e);}\n\n  function e_target(e) {return e.target || e.srcElement}\n  function e_button(e) {\n    var b = e.which;\n    if (b == null) {\n      if (e.button & 1) { b = 1; }\n      else if (e.button & 2) { b = 3; }\n      else if (e.button & 4) { b = 2; }\n    }\n    if (mac && e.ctrlKey && b == 1) { b = 3; }\n    return b\n  }\n\n  // Detect drag-and-drop\n  var dragAndDrop = function() {\n    // There is *some* kind of drag-and-drop support in IE6-8, but I\n    // couldn't get it to work yet.\n    if (ie && ie_version < 9) { return false }\n    var div = elt('div');\n    return \"draggable\" in div || \"dragDrop\" in div\n  }();\n\n  var zwspSupported;\n  function zeroWidthElement(measure) {\n    if (zwspSupported == null) {\n      var test = elt(\"span\", \"\\u200b\");\n      removeChildrenAndAdd(measure, elt(\"span\", [test, document.createTextNode(\"x\")]));\n      if (measure.firstChild.offsetHeight != 0)\n        { zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8); }\n    }\n    var node = zwspSupported ? elt(\"span\", \"\\u200b\") :\n      elt(\"span\", \"\\u00a0\", null, \"display: inline-block; width: 1px; margin-right: -1px\");\n    node.setAttribute(\"cm-text\", \"\");\n    return node\n  }\n\n  // Feature-detect IE's crummy client rect reporting for bidi text\n  var badBidiRects;\n  function hasBadBidiRects(measure) {\n    if (badBidiRects != null) { return badBidiRects }\n    var txt = removeChildrenAndAdd(measure, document.createTextNode(\"A\\u062eA\"));\n    var r0 = range(txt, 0, 1).getBoundingClientRect();\n    var r1 = range(txt, 1, 2).getBoundingClientRect();\n    removeChildren(measure);\n    if (!r0 || r0.left == r0.right) { return false } // Safari returns null in some cases (#2780)\n    return badBidiRects = (r1.right - r0.right < 3)\n  }\n\n  // See if \"\".split is the broken IE version, if so, provide an\n  // alternative way to split lines.\n  var splitLinesAuto = \"\\n\\nb\".split(/\\n/).length != 3 ? function (string) {\n    var pos = 0, result = [], l = string.length;\n    while (pos <= l) {\n      var nl = string.indexOf(\"\\n\", pos);\n      if (nl == -1) { nl = string.length; }\n      var line = string.slice(pos, string.charAt(nl - 1) == \"\\r\" ? nl - 1 : nl);\n      var rt = line.indexOf(\"\\r\");\n      if (rt != -1) {\n        result.push(line.slice(0, rt));\n        pos += rt + 1;\n      } else {\n        result.push(line);\n        pos = nl + 1;\n      }\n    }\n    return result\n  } : function (string) { return string.split(/\\r\\n?|\\n/); };\n\n  var hasSelection = window.getSelection ? function (te) {\n    try { return te.selectionStart != te.selectionEnd }\n    catch(e) { return false }\n  } : function (te) {\n    var range$$1;\n    try {range$$1 = te.ownerDocument.selection.createRange();}\n    catch(e) {}\n    if (!range$$1 || range$$1.parentElement() != te) { return false }\n    return range$$1.compareEndPoints(\"StartToEnd\", range$$1) != 0\n  };\n\n  var hasCopyEvent = (function () {\n    var e = elt(\"div\");\n    if (\"oncopy\" in e) { return true }\n    e.setAttribute(\"oncopy\", \"return;\");\n    return typeof e.oncopy == \"function\"\n  })();\n\n  var badZoomedRects = null;\n  function hasBadZoomedRects(measure) {\n    if (badZoomedRects != null) { return badZoomedRects }\n    var node = removeChildrenAndAdd(measure, elt(\"span\", \"x\"));\n    var normal = node.getBoundingClientRect();\n    var fromRange = range(node, 0, 1).getBoundingClientRect();\n    return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1\n  }\n\n  // Known modes, by name and by MIME\n  var modes = {}, mimeModes = {};\n\n  // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n  function defineMode(name, mode) {\n    if (arguments.length > 2)\n      { mode.dependencies = Array.prototype.slice.call(arguments, 2); }\n    modes[name] = mode;\n  }\n\n  function defineMIME(mime, spec) {\n    mimeModes[mime] = spec;\n  }\n\n  // Given a MIME type, a {name, ...options} config object, or a name\n  // string, return a mode config object.\n  function resolveMode(spec) {\n    if (typeof spec == \"string\" && mimeModes.hasOwnProperty(spec)) {\n      spec = mimeModes[spec];\n    } else if (spec && typeof spec.name == \"string\" && mimeModes.hasOwnProperty(spec.name)) {\n      var found = mimeModes[spec.name];\n      if (typeof found == \"string\") { found = {name: found}; }\n      spec = createObj(found, spec);\n      spec.name = found.name;\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(spec)) {\n      return resolveMode(\"application/xml\")\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(spec)) {\n      return resolveMode(\"application/json\")\n    }\n    if (typeof spec == \"string\") { return {name: spec} }\n    else { return spec || {name: \"null\"} }\n  }\n\n  // Given a mode spec (anything that resolveMode accepts), find and\n  // initialize an actual mode object.\n  function getMode(options, spec) {\n    spec = resolveMode(spec);\n    var mfactory = modes[spec.name];\n    if (!mfactory) { return getMode(options, \"text/plain\") }\n    var modeObj = mfactory(options, spec);\n    if (modeExtensions.hasOwnProperty(spec.name)) {\n      var exts = modeExtensions[spec.name];\n      for (var prop in exts) {\n        if (!exts.hasOwnProperty(prop)) { continue }\n        if (modeObj.hasOwnProperty(prop)) { modeObj[\"_\" + prop] = modeObj[prop]; }\n        modeObj[prop] = exts[prop];\n      }\n    }\n    modeObj.name = spec.name;\n    if (spec.helperType) { modeObj.helperType = spec.helperType; }\n    if (spec.modeProps) { for (var prop$1 in spec.modeProps)\n      { modeObj[prop$1] = spec.modeProps[prop$1]; } }\n\n    return modeObj\n  }\n\n  // This can be used to attach properties to mode objects from\n  // outside the actual mode definition.\n  var modeExtensions = {};\n  function extendMode(mode, properties) {\n    var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : (modeExtensions[mode] = {});\n    copyObj(properties, exts);\n  }\n\n  function copyState(mode, state) {\n    if (state === true) { return state }\n    if (mode.copyState) { return mode.copyState(state) }\n    var nstate = {};\n    for (var n in state) {\n      var val = state[n];\n      if (val instanceof Array) { val = val.concat([]); }\n      nstate[n] = val;\n    }\n    return nstate\n  }\n\n  // Given a mode and a state (for that mode), find the inner mode and\n  // state at the position that the state refers to.\n  function innerMode(mode, state) {\n    var info;\n    while (mode.innerMode) {\n      info = mode.innerMode(state);\n      if (!info || info.mode == mode) { break }\n      state = info.state;\n      mode = info.mode;\n    }\n    return info || {mode: mode, state: state}\n  }\n\n  function startState(mode, a1, a2) {\n    return mode.startState ? mode.startState(a1, a2) : true\n  }\n\n  // STRING STREAM\n\n  // Fed to the mode parsers, provides helper functions to make\n  // parsers more succinct.\n\n  var StringStream = function(string, tabSize, lineOracle) {\n    this.pos = this.start = 0;\n    this.string = string;\n    this.tabSize = tabSize || 8;\n    this.lastColumnPos = this.lastColumnValue = 0;\n    this.lineStart = 0;\n    this.lineOracle = lineOracle;\n  };\n\n  StringStream.prototype.eol = function () {return this.pos >= this.string.length};\n  StringStream.prototype.sol = function () {return this.pos == this.lineStart};\n  StringStream.prototype.peek = function () {return this.string.charAt(this.pos) || undefined};\n  StringStream.prototype.next = function () {\n    if (this.pos < this.string.length)\n      { return this.string.charAt(this.pos++) }\n  };\n  StringStream.prototype.eat = function (match) {\n    var ch = this.string.charAt(this.pos);\n    var ok;\n    if (typeof match == \"string\") { ok = ch == match; }\n    else { ok = ch && (match.test ? match.test(ch) : match(ch)); }\n    if (ok) {++this.pos; return ch}\n  };\n  StringStream.prototype.eatWhile = function (match) {\n    var start = this.pos;\n    while (this.eat(match)){}\n    return this.pos > start\n  };\n  StringStream.prototype.eatSpace = function () {\n      var this$1 = this;\n\n    var start = this.pos;\n    while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos))) { ++this$1.pos; }\n    return this.pos > start\n  };\n  StringStream.prototype.skipToEnd = function () {this.pos = this.string.length;};\n  StringStream.prototype.skipTo = function (ch) {\n    var found = this.string.indexOf(ch, this.pos);\n    if (found > -1) {this.pos = found; return true}\n  };\n  StringStream.prototype.backUp = function (n) {this.pos -= n;};\n  StringStream.prototype.column = function () {\n    if (this.lastColumnPos < this.start) {\n      this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\n      this.lastColumnPos = this.start;\n    }\n    return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n  };\n  StringStream.prototype.indentation = function () {\n    return countColumn(this.string, null, this.tabSize) -\n      (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n  };\n  StringStream.prototype.match = function (pattern, consume, caseInsensitive) {\n    if (typeof pattern == \"string\") {\n      var cased = function (str) { return caseInsensitive ? str.toLowerCase() : str; };\n      var substr = this.string.substr(this.pos, pattern.length);\n      if (cased(substr) == cased(pattern)) {\n        if (consume !== false) { this.pos += pattern.length; }\n        return true\n      }\n    } else {\n      var match = this.string.slice(this.pos).match(pattern);\n      if (match && match.index > 0) { return null }\n      if (match && consume !== false) { this.pos += match[0].length; }\n      return match\n    }\n  };\n  StringStream.prototype.current = function (){return this.string.slice(this.start, this.pos)};\n  StringStream.prototype.hideFirstChars = function (n, inner) {\n    this.lineStart += n;\n    try { return inner() }\n    finally { this.lineStart -= n; }\n  };\n  StringStream.prototype.lookAhead = function (n) {\n    var oracle = this.lineOracle;\n    return oracle && oracle.lookAhead(n)\n  };\n  StringStream.prototype.baseToken = function () {\n    var oracle = this.lineOracle;\n    return oracle && oracle.baseToken(this.pos)\n  };\n\n  // Find the line object corresponding to the given line number.\n  function getLine(doc, n) {\n    n -= doc.first;\n    if (n < 0 || n >= doc.size) { throw new Error(\"There is no line \" + (n + doc.first) + \" in the document.\") }\n    var chunk = doc;\n    while (!chunk.lines) {\n      for (var i = 0;; ++i) {\n        var child = chunk.children[i], sz = child.chunkSize();\n        if (n < sz) { chunk = child; break }\n        n -= sz;\n      }\n    }\n    return chunk.lines[n]\n  }\n\n  // Get the part of a document between two positions, as an array of\n  // strings.\n  function getBetween(doc, start, end) {\n    var out = [], n = start.line;\n    doc.iter(start.line, end.line + 1, function (line) {\n      var text = line.text;\n      if (n == end.line) { text = text.slice(0, end.ch); }\n      if (n == start.line) { text = text.slice(start.ch); }\n      out.push(text);\n      ++n;\n    });\n    return out\n  }\n  // Get the lines between from and to, as array of strings.\n  function getLines(doc, from, to) {\n    var out = [];\n    doc.iter(from, to, function (line) { out.push(line.text); }); // iter aborts when callback returns truthy value\n    return out\n  }\n\n  // Update the height of a line, propagating the height change\n  // upwards to parent nodes.\n  function updateLineHeight(line, height) {\n    var diff = height - line.height;\n    if (diff) { for (var n = line; n; n = n.parent) { n.height += diff; } }\n  }\n\n  // Given a line object, find its line number by walking up through\n  // its parent links.\n  function lineNo(line) {\n    if (line.parent == null) { return null }\n    var cur = line.parent, no = indexOf(cur.lines, line);\n    for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n      for (var i = 0;; ++i) {\n        if (chunk.children[i] == cur) { break }\n        no += chunk.children[i].chunkSize();\n      }\n    }\n    return no + cur.first\n  }\n\n  // Find the line at the given vertical position, using the height\n  // information in the document tree.\n  function lineAtHeight(chunk, h) {\n    var n = chunk.first;\n    outer: do {\n      for (var i$1 = 0; i$1 < chunk.children.length; ++i$1) {\n        var child = chunk.children[i$1], ch = child.height;\n        if (h < ch) { chunk = child; continue outer }\n        h -= ch;\n        n += child.chunkSize();\n      }\n      return n\n    } while (!chunk.lines)\n    var i = 0;\n    for (; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i], lh = line.height;\n      if (h < lh) { break }\n      h -= lh;\n    }\n    return n + i\n  }\n\n  function isLine(doc, l) {return l >= doc.first && l < doc.first + doc.size}\n\n  function lineNumberFor(options, i) {\n    return String(options.lineNumberFormatter(i + options.firstLineNumber))\n  }\n\n  // A Pos instance represents a position within the text.\n  function Pos(line, ch, sticky) {\n    if ( sticky === void 0 ) sticky = null;\n\n    if (!(this instanceof Pos)) { return new Pos(line, ch, sticky) }\n    this.line = line;\n    this.ch = ch;\n    this.sticky = sticky;\n  }\n\n  // Compare two positions, return 0 if they are the same, a negative\n  // number when a is less, and a positive number otherwise.\n  function cmp(a, b) { return a.line - b.line || a.ch - b.ch }\n\n  function equalCursorPos(a, b) { return a.sticky == b.sticky && cmp(a, b) == 0 }\n\n  function copyPos(x) {return Pos(x.line, x.ch)}\n  function maxPos(a, b) { return cmp(a, b) < 0 ? b : a }\n  function minPos(a, b) { return cmp(a, b) < 0 ? a : b }\n\n  // Most of the external API clips given positions to make sure they\n  // actually exist within the document.\n  function clipLine(doc, n) {return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1))}\n  function clipPos(doc, pos) {\n    if (pos.line < doc.first) { return Pos(doc.first, 0) }\n    var last = doc.first + doc.size - 1;\n    if (pos.line > last) { return Pos(last, getLine(doc, last).text.length) }\n    return clipToLen(pos, getLine(doc, pos.line).text.length)\n  }\n  function clipToLen(pos, linelen) {\n    var ch = pos.ch;\n    if (ch == null || ch > linelen) { return Pos(pos.line, linelen) }\n    else if (ch < 0) { return Pos(pos.line, 0) }\n    else { return pos }\n  }\n  function clipPosArray(doc, array) {\n    var out = [];\n    for (var i = 0; i < array.length; i++) { out[i] = clipPos(doc, array[i]); }\n    return out\n  }\n\n  var SavedContext = function(state, lookAhead) {\n    this.state = state;\n    this.lookAhead = lookAhead;\n  };\n\n  var Context = function(doc, state, line, lookAhead) {\n    this.state = state;\n    this.doc = doc;\n    this.line = line;\n    this.maxLookAhead = lookAhead || 0;\n    this.baseTokens = null;\n    this.baseTokenPos = 1;\n  };\n\n  Context.prototype.lookAhead = function (n) {\n    var line = this.doc.getLine(this.line + n);\n    if (line != null && n > this.maxLookAhead) { this.maxLookAhead = n; }\n    return line\n  };\n\n  Context.prototype.baseToken = function (n) {\n      var this$1 = this;\n\n    if (!this.baseTokens) { return null }\n    while (this.baseTokens[this.baseTokenPos] <= n)\n      { this$1.baseTokenPos += 2; }\n    var type = this.baseTokens[this.baseTokenPos + 1];\n    return {type: type && type.replace(/( |^)overlay .*/, \"\"),\n            size: this.baseTokens[this.baseTokenPos] - n}\n  };\n\n  Context.prototype.nextLine = function () {\n    this.line++;\n    if (this.maxLookAhead > 0) { this.maxLookAhead--; }\n  };\n\n  Context.fromSaved = function (doc, saved, line) {\n    if (saved instanceof SavedContext)\n      { return new Context(doc, copyState(doc.mode, saved.state), line, saved.lookAhead) }\n    else\n      { return new Context(doc, copyState(doc.mode, saved), line) }\n  };\n\n  Context.prototype.save = function (copy) {\n    var state = copy !== false ? copyState(this.doc.mode, this.state) : this.state;\n    return this.maxLookAhead > 0 ? new SavedContext(state, this.maxLookAhead) : state\n  };\n\n\n  // Compute a style array (an array starting with a mode generation\n  // -- for invalidation -- followed by pairs of end positions and\n  // style strings), which is used to highlight the tokens on the\n  // line.\n  function highlightLine(cm, line, context, forceToEnd) {\n    // A styles array always starts with a number identifying the\n    // mode/overlays that it is based on (for easy invalidation).\n    var st = [cm.state.modeGen], lineClasses = {};\n    // Compute the base array of styles\n    runMode(cm, line.text, cm.doc.mode, context, function (end, style) { return st.push(end, style); },\n            lineClasses, forceToEnd);\n    var state = context.state;\n\n    // Run overlays, adjust style array.\n    var loop = function ( o ) {\n      context.baseTokens = st;\n      var overlay = cm.state.overlays[o], i = 1, at = 0;\n      context.state = true;\n      runMode(cm, line.text, overlay.mode, context, function (end, style) {\n        var start = i;\n        // Ensure there's a token end at the current position, and that i points at it\n        while (at < end) {\n          var i_end = st[i];\n          if (i_end > end)\n            { st.splice(i, 1, end, st[i+1], i_end); }\n          i += 2;\n          at = Math.min(end, i_end);\n        }\n        if (!style) { return }\n        if (overlay.opaque) {\n          st.splice(start, i - start, end, \"overlay \" + style);\n          i = start + 2;\n        } else {\n          for (; start < i; start += 2) {\n            var cur = st[start+1];\n            st[start+1] = (cur ? cur + \" \" : \"\") + \"overlay \" + style;\n          }\n        }\n      }, lineClasses);\n      context.state = state;\n      context.baseTokens = null;\n      context.baseTokenPos = 1;\n    };\n\n    for (var o = 0; o < cm.state.overlays.length; ++o) loop( o );\n\n    return {styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null}\n  }\n\n  function getLineStyles(cm, line, updateFrontier) {\n    if (!line.styles || line.styles[0] != cm.state.modeGen) {\n      var context = getContextBefore(cm, lineNo(line));\n      var resetState = line.text.length > cm.options.maxHighlightLength && copyState(cm.doc.mode, context.state);\n      var result = highlightLine(cm, line, context);\n      if (resetState) { context.state = resetState; }\n      line.stateAfter = context.save(!resetState);\n      line.styles = result.styles;\n      if (result.classes) { line.styleClasses = result.classes; }\n      else if (line.styleClasses) { line.styleClasses = null; }\n      if (updateFrontier === cm.doc.highlightFrontier)\n        { cm.doc.modeFrontier = Math.max(cm.doc.modeFrontier, ++cm.doc.highlightFrontier); }\n    }\n    return line.styles\n  }\n\n  function getContextBefore(cm, n, precise) {\n    var doc = cm.doc, display = cm.display;\n    if (!doc.mode.startState) { return new Context(doc, true, n) }\n    var start = findStartLine(cm, n, precise);\n    var saved = start > doc.first && getLine(doc, start - 1).stateAfter;\n    var context = saved ? Context.fromSaved(doc, saved, start) : new Context(doc, startState(doc.mode), start);\n\n    doc.iter(start, n, function (line) {\n      processLine(cm, line.text, context);\n      var pos = context.line;\n      line.stateAfter = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo ? context.save() : null;\n      context.nextLine();\n    });\n    if (precise) { doc.modeFrontier = context.line; }\n    return context\n  }\n\n  // Lightweight form of highlight -- proceed over this line and\n  // update state, but don't save a style array. Used for lines that\n  // aren't currently visible.\n  function processLine(cm, text, context, startAt) {\n    var mode = cm.doc.mode;\n    var stream = new StringStream(text, cm.options.tabSize, context);\n    stream.start = stream.pos = startAt || 0;\n    if (text == \"\") { callBlankLine(mode, context.state); }\n    while (!stream.eol()) {\n      readToken(mode, stream, context.state);\n      stream.start = stream.pos;\n    }\n  }\n\n  function callBlankLine(mode, state) {\n    if (mode.blankLine) { return mode.blankLine(state) }\n    if (!mode.innerMode) { return }\n    var inner = innerMode(mode, state);\n    if (inner.mode.blankLine) { return inner.mode.blankLine(inner.state) }\n  }\n\n  function readToken(mode, stream, state, inner) {\n    for (var i = 0; i < 10; i++) {\n      if (inner) { inner[0] = innerMode(mode, state).mode; }\n      var style = mode.token(stream, state);\n      if (stream.pos > stream.start) { return style }\n    }\n    throw new Error(\"Mode \" + mode.name + \" failed to advance stream.\")\n  }\n\n  var Token = function(stream, type, state) {\n    this.start = stream.start; this.end = stream.pos;\n    this.string = stream.current();\n    this.type = type || null;\n    this.state = state;\n  };\n\n  // Utility for getTokenAt and getLineTokens\n  function takeToken(cm, pos, precise, asArray) {\n    var doc = cm.doc, mode = doc.mode, style;\n    pos = clipPos(doc, pos);\n    var line = getLine(doc, pos.line), context = getContextBefore(cm, pos.line, precise);\n    var stream = new StringStream(line.text, cm.options.tabSize, context), tokens;\n    if (asArray) { tokens = []; }\n    while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\n      stream.start = stream.pos;\n      style = readToken(mode, stream, context.state);\n      if (asArray) { tokens.push(new Token(stream, style, copyState(doc.mode, context.state))); }\n    }\n    return asArray ? tokens : new Token(stream, style, context.state)\n  }\n\n  function extractLineClasses(type, output) {\n    if (type) { for (;;) {\n      var lineClass = type.match(/(?:^|\\s+)line-(background-)?(\\S+)/);\n      if (!lineClass) { break }\n      type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);\n      var prop = lineClass[1] ? \"bgClass\" : \"textClass\";\n      if (output[prop] == null)\n        { output[prop] = lineClass[2]; }\n      else if (!(new RegExp(\"(?:^|\\s)\" + lineClass[2] + \"(?:$|\\s)\")).test(output[prop]))\n        { output[prop] += \" \" + lineClass[2]; }\n    } }\n    return type\n  }\n\n  // Run the given mode's parser over a line, calling f for each token.\n  function runMode(cm, text, mode, context, f, lineClasses, forceToEnd) {\n    var flattenSpans = mode.flattenSpans;\n    if (flattenSpans == null) { flattenSpans = cm.options.flattenSpans; }\n    var curStart = 0, curStyle = null;\n    var stream = new StringStream(text, cm.options.tabSize, context), style;\n    var inner = cm.options.addModeClass && [null];\n    if (text == \"\") { extractLineClasses(callBlankLine(mode, context.state), lineClasses); }\n    while (!stream.eol()) {\n      if (stream.pos > cm.options.maxHighlightLength) {\n        flattenSpans = false;\n        if (forceToEnd) { processLine(cm, text, context, stream.pos); }\n        stream.pos = text.length;\n        style = null;\n      } else {\n        style = extractLineClasses(readToken(mode, stream, context.state, inner), lineClasses);\n      }\n      if (inner) {\n        var mName = inner[0].name;\n        if (mName) { style = \"m-\" + (style ? mName + \" \" + style : mName); }\n      }\n      if (!flattenSpans || curStyle != style) {\n        while (curStart < stream.start) {\n          curStart = Math.min(stream.start, curStart + 5000);\n          f(curStart, curStyle);\n        }\n        curStyle = style;\n      }\n      stream.start = stream.pos;\n    }\n    while (curStart < stream.pos) {\n      // Webkit seems to refuse to render text nodes longer than 57444\n      // characters, and returns inaccurate measurements in nodes\n      // starting around 5000 chars.\n      var pos = Math.min(stream.pos, curStart + 5000);\n      f(pos, curStyle);\n      curStart = pos;\n    }\n  }\n\n  // Finds the line to start with when starting a parse. Tries to\n  // find a line with a stateAfter, so that it can start with a\n  // valid state. If that fails, it returns the line with the\n  // smallest indentation, which tends to need the least context to\n  // parse correctly.\n  function findStartLine(cm, n, precise) {\n    var minindent, minline, doc = cm.doc;\n    var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);\n    for (var search = n; search > lim; --search) {\n      if (search <= doc.first) { return doc.first }\n      var line = getLine(doc, search - 1), after = line.stateAfter;\n      if (after && (!precise || search + (after instanceof SavedContext ? after.lookAhead : 0) <= doc.modeFrontier))\n        { return search }\n      var indented = countColumn(line.text, null, cm.options.tabSize);\n      if (minline == null || minindent > indented) {\n        minline = search - 1;\n        minindent = indented;\n      }\n    }\n    return minline\n  }\n\n  function retreatFrontier(doc, n) {\n    doc.modeFrontier = Math.min(doc.modeFrontier, n);\n    if (doc.highlightFrontier < n - 10) { return }\n    var start = doc.first;\n    for (var line = n - 1; line > start; line--) {\n      var saved = getLine(doc, line).stateAfter;\n      // change is on 3\n      // state on line 1 looked ahead 2 -- so saw 3\n      // test 1 + 2 < 3 should cover this\n      if (saved && (!(saved instanceof SavedContext) || line + saved.lookAhead < n)) {\n        start = line + 1;\n        break\n      }\n    }\n    doc.highlightFrontier = Math.min(doc.highlightFrontier, start);\n  }\n\n  // Optimize some code when these features are not used.\n  var sawReadOnlySpans = false, sawCollapsedSpans = false;\n\n  function seeReadOnlySpans() {\n    sawReadOnlySpans = true;\n  }\n\n  function seeCollapsedSpans() {\n    sawCollapsedSpans = true;\n  }\n\n  // TEXTMARKER SPANS\n\n  function MarkedSpan(marker, from, to) {\n    this.marker = marker;\n    this.from = from; this.to = to;\n  }\n\n  // Search an array of spans for a span matching the given marker.\n  function getMarkedSpanFor(spans, marker) {\n    if (spans) { for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if (span.marker == marker) { return span }\n    } }\n  }\n  // Remove a span from an array, returning undefined if no spans are\n  // left (we don't store arrays for lines without spans).\n  function removeMarkedSpan(spans, span) {\n    var r;\n    for (var i = 0; i < spans.length; ++i)\n      { if (spans[i] != span) { (r || (r = [])).push(spans[i]); } }\n    return r\n  }\n  // Add a span to a line.\n  function addMarkedSpan(line, span) {\n    line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];\n    span.marker.attachLine(line);\n  }\n\n  // Used for the algorithm that adjusts markers for a change in the\n  // document. These functions cut an array of spans at a given\n  // character position, returning an array of remaining chunks (or\n  // undefined if nothing remains).\n  function markedSpansBefore(old, startCh, isInsert) {\n    var nw;\n    if (old) { for (var i = 0; i < old.length; ++i) {\n      var span = old[i], marker = span.marker;\n      var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);\n      if (startsBefore || span.from == startCh && marker.type == \"bookmark\" && (!isInsert || !span.marker.insertLeft)) {\n        var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh)\n        ;(nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));\n      }\n    } }\n    return nw\n  }\n  function markedSpansAfter(old, endCh, isInsert) {\n    var nw;\n    if (old) { for (var i = 0; i < old.length; ++i) {\n      var span = old[i], marker = span.marker;\n      var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);\n      if (endsAfter || span.from == endCh && marker.type == \"bookmark\" && (!isInsert || span.marker.insertLeft)) {\n        var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh)\n        ;(nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh,\n                                              span.to == null ? null : span.to - endCh));\n      }\n    } }\n    return nw\n  }\n\n  // Given a change object, compute the new set of marker spans that\n  // cover the line in which the change took place. Removes spans\n  // entirely within the change, reconnects spans belonging to the\n  // same marker that appear on both sides of the change, and cuts off\n  // spans partially within the change. Returns an array of span\n  // arrays with one element for each line in (after) the change.\n  function stretchSpansOverChange(doc, change) {\n    if (change.full) { return null }\n    var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;\n    var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;\n    if (!oldFirst && !oldLast) { return null }\n\n    var startCh = change.from.ch, endCh = change.to.ch, isInsert = cmp(change.from, change.to) == 0;\n    // Get the spans that 'stick out' on both sides\n    var first = markedSpansBefore(oldFirst, startCh, isInsert);\n    var last = markedSpansAfter(oldLast, endCh, isInsert);\n\n    // Next, merge those two ends\n    var sameLine = change.text.length == 1, offset = lst(change.text).length + (sameLine ? startCh : 0);\n    if (first) {\n      // Fix up .to properties of first\n      for (var i = 0; i < first.length; ++i) {\n        var span = first[i];\n        if (span.to == null) {\n          var found = getMarkedSpanFor(last, span.marker);\n          if (!found) { span.to = startCh; }\n          else if (sameLine) { span.to = found.to == null ? null : found.to + offset; }\n        }\n      }\n    }\n    if (last) {\n      // Fix up .from in last (or move them into first in case of sameLine)\n      for (var i$1 = 0; i$1 < last.length; ++i$1) {\n        var span$1 = last[i$1];\n        if (span$1.to != null) { span$1.to += offset; }\n        if (span$1.from == null) {\n          var found$1 = getMarkedSpanFor(first, span$1.marker);\n          if (!found$1) {\n            span$1.from = offset;\n            if (sameLine) { (first || (first = [])).push(span$1); }\n          }\n        } else {\n          span$1.from += offset;\n          if (sameLine) { (first || (first = [])).push(span$1); }\n        }\n      }\n    }\n    // Make sure we didn't create any zero-length spans\n    if (first) { first = clearEmptySpans(first); }\n    if (last && last != first) { last = clearEmptySpans(last); }\n\n    var newMarkers = [first];\n    if (!sameLine) {\n      // Fill gap with whole-line-spans\n      var gap = change.text.length - 2, gapMarkers;\n      if (gap > 0 && first)\n        { for (var i$2 = 0; i$2 < first.length; ++i$2)\n          { if (first[i$2].to == null)\n            { (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i$2].marker, null, null)); } } }\n      for (var i$3 = 0; i$3 < gap; ++i$3)\n        { newMarkers.push(gapMarkers); }\n      newMarkers.push(last);\n    }\n    return newMarkers\n  }\n\n  // Remove spans that are empty and don't have a clearWhenEmpty\n  // option of false.\n  function clearEmptySpans(spans) {\n    for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false)\n        { spans.splice(i--, 1); }\n    }\n    if (!spans.length) { return null }\n    return spans\n  }\n\n  // Used to 'clip' out readOnly ranges when making a change.\n  function removeReadOnlyRanges(doc, from, to) {\n    var markers = null;\n    doc.iter(from.line, to.line + 1, function (line) {\n      if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n        var mark = line.markedSpans[i].marker;\n        if (mark.readOnly && (!markers || indexOf(markers, mark) == -1))\n          { (markers || (markers = [])).push(mark); }\n      } }\n    });\n    if (!markers) { return null }\n    var parts = [{from: from, to: to}];\n    for (var i = 0; i < markers.length; ++i) {\n      var mk = markers[i], m = mk.find(0);\n      for (var j = 0; j < parts.length; ++j) {\n        var p = parts[j];\n        if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) { continue }\n        var newParts = [j, 1], dfrom = cmp(p.from, m.from), dto = cmp(p.to, m.to);\n        if (dfrom < 0 || !mk.inclusiveLeft && !dfrom)\n          { newParts.push({from: p.from, to: m.from}); }\n        if (dto > 0 || !mk.inclusiveRight && !dto)\n          { newParts.push({from: m.to, to: p.to}); }\n        parts.splice.apply(parts, newParts);\n        j += newParts.length - 3;\n      }\n    }\n    return parts\n  }\n\n  // Connect or disconnect spans from a line.\n  function detachMarkedSpans(line) {\n    var spans = line.markedSpans;\n    if (!spans) { return }\n    for (var i = 0; i < spans.length; ++i)\n      { spans[i].marker.detachLine(line); }\n    line.markedSpans = null;\n  }\n  function attachMarkedSpans(line, spans) {\n    if (!spans) { return }\n    for (var i = 0; i < spans.length; ++i)\n      { spans[i].marker.attachLine(line); }\n    line.markedSpans = spans;\n  }\n\n  // Helpers used when computing which overlapping collapsed span\n  // counts as the larger one.\n  function extraLeft(marker) { return marker.inclusiveLeft ? -1 : 0 }\n  function extraRight(marker) { return marker.inclusiveRight ? 1 : 0 }\n\n  // Returns a number indicating which of two overlapping collapsed\n  // spans is larger (and thus includes the other). Falls back to\n  // comparing ids when the spans cover exactly the same range.\n  function compareCollapsedMarkers(a, b) {\n    var lenDiff = a.lines.length - b.lines.length;\n    if (lenDiff != 0) { return lenDiff }\n    var aPos = a.find(), bPos = b.find();\n    var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);\n    if (fromCmp) { return -fromCmp }\n    var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);\n    if (toCmp) { return toCmp }\n    return b.id - a.id\n  }\n\n  // Find out whether a line ends or starts in a collapsed span. If\n  // so, return the marker for that span.\n  function collapsedSpanAtSide(line, start) {\n    var sps = sawCollapsedSpans && line.markedSpans, found;\n    if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n      sp = sps[i];\n      if (sp.marker.collapsed && (start ? sp.from : sp.to) == null &&\n          (!found || compareCollapsedMarkers(found, sp.marker) < 0))\n        { found = sp.marker; }\n    } }\n    return found\n  }\n  function collapsedSpanAtStart(line) { return collapsedSpanAtSide(line, true) }\n  function collapsedSpanAtEnd(line) { return collapsedSpanAtSide(line, false) }\n\n  function collapsedSpanAround(line, ch) {\n    var sps = sawCollapsedSpans && line.markedSpans, found;\n    if (sps) { for (var i = 0; i < sps.length; ++i) {\n      var sp = sps[i];\n      if (sp.marker.collapsed && (sp.from == null || sp.from < ch) && (sp.to == null || sp.to > ch) &&\n          (!found || compareCollapsedMarkers(found, sp.marker) < 0)) { found = sp.marker; }\n    } }\n    return found\n  }\n\n  // Test whether there exists a collapsed span that partially\n  // overlaps (covers the start or end, but not both) of a new span.\n  // Such overlap is not allowed.\n  function conflictingCollapsedRange(doc, lineNo$$1, from, to, marker) {\n    var line = getLine(doc, lineNo$$1);\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps) { for (var i = 0; i < sps.length; ++i) {\n      var sp = sps[i];\n      if (!sp.marker.collapsed) { continue }\n      var found = sp.marker.find(0);\n      var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);\n      var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);\n      if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) { continue }\n      if (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) ||\n          fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0))\n        { return true }\n    } }\n  }\n\n  // A visual line is a line as drawn on the screen. Folding, for\n  // example, can cause multiple logical lines to appear on the same\n  // visual line. This finds the start of the visual line that the\n  // given line is part of (usually that is the line itself).\n  function visualLine(line) {\n    var merged;\n    while (merged = collapsedSpanAtStart(line))\n      { line = merged.find(-1, true).line; }\n    return line\n  }\n\n  function visualLineEnd(line) {\n    var merged;\n    while (merged = collapsedSpanAtEnd(line))\n      { line = merged.find(1, true).line; }\n    return line\n  }\n\n  // Returns an array of logical lines that continue the visual line\n  // started by the argument, or undefined if there are no such lines.\n  function visualLineContinued(line) {\n    var merged, lines;\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line\n      ;(lines || (lines = [])).push(line);\n    }\n    return lines\n  }\n\n  // Get the line number of the start of the visual line that the\n  // given line number is part of.\n  function visualLineNo(doc, lineN) {\n    var line = getLine(doc, lineN), vis = visualLine(line);\n    if (line == vis) { return lineN }\n    return lineNo(vis)\n  }\n\n  // Get the line number of the start of the next visual line after\n  // the given line.\n  function visualLineEndNo(doc, lineN) {\n    if (lineN > doc.lastLine()) { return lineN }\n    var line = getLine(doc, lineN), merged;\n    if (!lineIsHidden(doc, line)) { return lineN }\n    while (merged = collapsedSpanAtEnd(line))\n      { line = merged.find(1, true).line; }\n    return lineNo(line) + 1\n  }\n\n  // Compute whether a line is hidden. Lines count as hidden when they\n  // are part of a visual line that starts with another line, or when\n  // they are entirely covered by collapsed, non-widget span.\n  function lineIsHidden(doc, line) {\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n      sp = sps[i];\n      if (!sp.marker.collapsed) { continue }\n      if (sp.from == null) { return true }\n      if (sp.marker.widgetNode) { continue }\n      if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp))\n        { return true }\n    } }\n  }\n  function lineIsHiddenInner(doc, line, span) {\n    if (span.to == null) {\n      var end = span.marker.find(1, true);\n      return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker))\n    }\n    if (span.marker.inclusiveRight && span.to == line.text.length)\n      { return true }\n    for (var sp = (void 0), i = 0; i < line.markedSpans.length; ++i) {\n      sp = line.markedSpans[i];\n      if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to &&\n          (sp.to == null || sp.to != span.from) &&\n          (sp.marker.inclusiveLeft || span.marker.inclusiveRight) &&\n          lineIsHiddenInner(doc, line, sp)) { return true }\n    }\n  }\n\n  // Find the height above the given line.\n  function heightAtLine(lineObj) {\n    lineObj = visualLine(lineObj);\n\n    var h = 0, chunk = lineObj.parent;\n    for (var i = 0; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i];\n      if (line == lineObj) { break }\n      else { h += line.height; }\n    }\n    for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\n      for (var i$1 = 0; i$1 < p.children.length; ++i$1) {\n        var cur = p.children[i$1];\n        if (cur == chunk) { break }\n        else { h += cur.height; }\n      }\n    }\n    return h\n  }\n\n  // Compute the character length of a line, taking into account\n  // collapsed ranges (see markText) that might hide parts, and join\n  // other lines onto it.\n  function lineLength(line) {\n    if (line.height == 0) { return 0 }\n    var len = line.text.length, merged, cur = line;\n    while (merged = collapsedSpanAtStart(cur)) {\n      var found = merged.find(0, true);\n      cur = found.from.line;\n      len += found.from.ch - found.to.ch;\n    }\n    cur = line;\n    while (merged = collapsedSpanAtEnd(cur)) {\n      var found$1 = merged.find(0, true);\n      len -= cur.text.length - found$1.from.ch;\n      cur = found$1.to.line;\n      len += cur.text.length - found$1.to.ch;\n    }\n    return len\n  }\n\n  // Find the longest line in the document.\n  function findMaxLine(cm) {\n    var d = cm.display, doc = cm.doc;\n    d.maxLine = getLine(doc, doc.first);\n    d.maxLineLength = lineLength(d.maxLine);\n    d.maxLineChanged = true;\n    doc.iter(function (line) {\n      var len = lineLength(line);\n      if (len > d.maxLineLength) {\n        d.maxLineLength = len;\n        d.maxLine = line;\n      }\n    });\n  }\n\n  // LINE DATA STRUCTURE\n\n  // Line objects. These hold state related to a line, including\n  // highlighting info (the styles array).\n  var Line = function(text, markedSpans, estimateHeight) {\n    this.text = text;\n    attachMarkedSpans(this, markedSpans);\n    this.height = estimateHeight ? estimateHeight(this) : 1;\n  };\n\n  Line.prototype.lineNo = function () { return lineNo(this) };\n  eventMixin(Line);\n\n  // Change the content (text, markers) of a line. Automatically\n  // invalidates cached information and tries to re-estimate the\n  // line's height.\n  function updateLine(line, text, markedSpans, estimateHeight) {\n    line.text = text;\n    if (line.stateAfter) { line.stateAfter = null; }\n    if (line.styles) { line.styles = null; }\n    if (line.order != null) { line.order = null; }\n    detachMarkedSpans(line);\n    attachMarkedSpans(line, markedSpans);\n    var estHeight = estimateHeight ? estimateHeight(line) : 1;\n    if (estHeight != line.height) { updateLineHeight(line, estHeight); }\n  }\n\n  // Detach a line from the document tree and its markers.\n  function cleanUpLine(line) {\n    line.parent = null;\n    detachMarkedSpans(line);\n  }\n\n  // Convert a style as returned by a mode (either null, or a string\n  // containing one or more styles) to a CSS style. This is cached,\n  // and also looks for line-wide styles.\n  var styleToClassCache = {}, styleToClassCacheWithMode = {};\n  function interpretTokenStyle(style, options) {\n    if (!style || /^\\s*$/.test(style)) { return null }\n    var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;\n    return cache[style] ||\n      (cache[style] = style.replace(/\\S+/g, \"cm-$&\"))\n  }\n\n  // Render the DOM representation of the text of a line. Also builds\n  // up a 'line map', which points at the DOM nodes that represent\n  // specific stretches of text, and is used by the measuring code.\n  // The returned object contains the DOM node, this map, and\n  // information about line-wide styles that were set by the mode.\n  function buildLineContent(cm, lineView) {\n    // The padding-right forces the element to have a 'border', which\n    // is needed on Webkit to be able to get line-level bounding\n    // rectangles for it (in measureChar).\n    var content = eltP(\"span\", null, null, webkit ? \"padding-right: .1px\" : null);\n    var builder = {pre: eltP(\"pre\", [content], \"CodeMirror-line\"), content: content,\n                   col: 0, pos: 0, cm: cm,\n                   trailingSpace: false,\n                   splitSpaces: cm.getOption(\"lineWrapping\")};\n    lineView.measure = {};\n\n    // Iterate over the logical lines that make up this visual line.\n    for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\n      var line = i ? lineView.rest[i - 1] : lineView.line, order = (void 0);\n      builder.pos = 0;\n      builder.addToken = buildToken;\n      // Optionally wire in some hacks into the token-rendering\n      // algorithm, to deal with browser quirks.\n      if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line, cm.doc.direction)))\n        { builder.addToken = buildTokenBadBidi(builder.addToken, order); }\n      builder.map = [];\n      var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);\n      insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));\n      if (line.styleClasses) {\n        if (line.styleClasses.bgClass)\n          { builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \"\"); }\n        if (line.styleClasses.textClass)\n          { builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \"\"); }\n      }\n\n      // Ensure at least a single node is present, for measuring.\n      if (builder.map.length == 0)\n        { builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure))); }\n\n      // Store the map and a cache object for the current logical line\n      if (i == 0) {\n        lineView.measure.map = builder.map;\n        lineView.measure.cache = {};\n      } else {\n  (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map)\n        ;(lineView.measure.caches || (lineView.measure.caches = [])).push({});\n      }\n    }\n\n    // See issue #2901\n    if (webkit) {\n      var last = builder.content.lastChild;\n      if (/\\bcm-tab\\b/.test(last.className) || (last.querySelector && last.querySelector(\".cm-tab\")))\n        { builder.content.className = \"cm-tab-wrap-hack\"; }\n    }\n\n    signal(cm, \"renderLine\", cm, lineView.line, builder.pre);\n    if (builder.pre.className)\n      { builder.textClass = joinClasses(builder.pre.className, builder.textClass || \"\"); }\n\n    return builder\n  }\n\n  function defaultSpecialCharPlaceholder(ch) {\n    var token = elt(\"span\", \"\\u2022\", \"cm-invalidchar\");\n    token.title = \"\\\\u\" + ch.charCodeAt(0).toString(16);\n    token.setAttribute(\"aria-label\", token.title);\n    return token\n  }\n\n  // Build up the DOM representation for a single token, and add it to\n  // the line map. Takes care to render special characters separately.\n  function buildToken(builder, text, style, startStyle, endStyle, css, attributes) {\n    if (!text) { return }\n    var displayText = builder.splitSpaces ? splitSpaces(text, builder.trailingSpace) : text;\n    var special = builder.cm.state.specialChars, mustWrap = false;\n    var content;\n    if (!special.test(text)) {\n      builder.col += text.length;\n      content = document.createTextNode(displayText);\n      builder.map.push(builder.pos, builder.pos + text.length, content);\n      if (ie && ie_version < 9) { mustWrap = true; }\n      builder.pos += text.length;\n    } else {\n      content = document.createDocumentFragment();\n      var pos = 0;\n      while (true) {\n        special.lastIndex = pos;\n        var m = special.exec(text);\n        var skipped = m ? m.index - pos : text.length - pos;\n        if (skipped) {\n          var txt = document.createTextNode(displayText.slice(pos, pos + skipped));\n          if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt])); }\n          else { content.appendChild(txt); }\n          builder.map.push(builder.pos, builder.pos + skipped, txt);\n          builder.col += skipped;\n          builder.pos += skipped;\n        }\n        if (!m) { break }\n        pos += skipped + 1;\n        var txt$1 = (void 0);\n        if (m[0] == \"\\t\") {\n          var tabSize = builder.cm.options.tabSize, tabWidth = tabSize - builder.col % tabSize;\n          txt$1 = content.appendChild(elt(\"span\", spaceStr(tabWidth), \"cm-tab\"));\n          txt$1.setAttribute(\"role\", \"presentation\");\n          txt$1.setAttribute(\"cm-text\", \"\\t\");\n          builder.col += tabWidth;\n        } else if (m[0] == \"\\r\" || m[0] == \"\\n\") {\n          txt$1 = content.appendChild(elt(\"span\", m[0] == \"\\r\" ? \"\\u240d\" : \"\\u2424\", \"cm-invalidchar\"));\n          txt$1.setAttribute(\"cm-text\", m[0]);\n          builder.col += 1;\n        } else {\n          txt$1 = builder.cm.options.specialCharPlaceholder(m[0]);\n          txt$1.setAttribute(\"cm-text\", m[0]);\n          if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt$1])); }\n          else { content.appendChild(txt$1); }\n          builder.col += 1;\n        }\n        builder.map.push(builder.pos, builder.pos + 1, txt$1);\n        builder.pos++;\n      }\n    }\n    builder.trailingSpace = displayText.charCodeAt(text.length - 1) == 32;\n    if (style || startStyle || endStyle || mustWrap || css) {\n      var fullStyle = style || \"\";\n      if (startStyle) { fullStyle += startStyle; }\n      if (endStyle) { fullStyle += endStyle; }\n      var token = elt(\"span\", [content], fullStyle, css);\n      if (attributes) {\n        for (var attr in attributes) { if (attributes.hasOwnProperty(attr) && attr != \"style\" && attr != \"class\")\n          { token.setAttribute(attr, attributes[attr]); } }\n      }\n      return builder.content.appendChild(token)\n    }\n    builder.content.appendChild(content);\n  }\n\n  // Change some spaces to NBSP to prevent the browser from collapsing\n  // trailing spaces at the end of a line when rendering text (issue #1362).\n  function splitSpaces(text, trailingBefore) {\n    if (text.length > 1 && !/  /.test(text)) { return text }\n    var spaceBefore = trailingBefore, result = \"\";\n    for (var i = 0; i < text.length; i++) {\n      var ch = text.charAt(i);\n      if (ch == \" \" && spaceBefore && (i == text.length - 1 || text.charCodeAt(i + 1) == 32))\n        { ch = \"\\u00a0\"; }\n      result += ch;\n      spaceBefore = ch == \" \";\n    }\n    return result\n  }\n\n  // Work around nonsense dimensions being reported for stretches of\n  // right-to-left text.\n  function buildTokenBadBidi(inner, order) {\n    return function (builder, text, style, startStyle, endStyle, css, attributes) {\n      style = style ? style + \" cm-force-border\" : \"cm-force-border\";\n      var start = builder.pos, end = start + text.length;\n      for (;;) {\n        // Find the part that overlaps with the start of this text\n        var part = (void 0);\n        for (var i = 0; i < order.length; i++) {\n          part = order[i];\n          if (part.to > start && part.from <= start) { break }\n        }\n        if (part.to >= end) { return inner(builder, text, style, startStyle, endStyle, css, attributes) }\n        inner(builder, text.slice(0, part.to - start), style, startStyle, null, css, attributes);\n        startStyle = null;\n        text = text.slice(part.to - start);\n        start = part.to;\n      }\n    }\n  }\n\n  function buildCollapsedSpan(builder, size, marker, ignoreWidget) {\n    var widget = !ignoreWidget && marker.widgetNode;\n    if (widget) { builder.map.push(builder.pos, builder.pos + size, widget); }\n    if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\n      if (!widget)\n        { widget = builder.content.appendChild(document.createElement(\"span\")); }\n      widget.setAttribute(\"cm-marker\", marker.id);\n    }\n    if (widget) {\n      builder.cm.display.input.setUneditable(widget);\n      builder.content.appendChild(widget);\n    }\n    builder.pos += size;\n    builder.trailingSpace = false;\n  }\n\n  // Outputs a number of spans to make up a line, taking highlighting\n  // and marked text into account.\n  function insertLineContent(line, builder, styles) {\n    var spans = line.markedSpans, allText = line.text, at = 0;\n    if (!spans) {\n      for (var i$1 = 1; i$1 < styles.length; i$1+=2)\n        { builder.addToken(builder, allText.slice(at, at = styles[i$1]), interpretTokenStyle(styles[i$1+1], builder.cm.options)); }\n      return\n    }\n\n    var len = allText.length, pos = 0, i = 1, text = \"\", style, css;\n    var nextChange = 0, spanStyle, spanEndStyle, spanStartStyle, collapsed, attributes;\n    for (;;) {\n      if (nextChange == pos) { // Update current marker set\n        spanStyle = spanEndStyle = spanStartStyle = css = \"\";\n        attributes = null;\n        collapsed = null; nextChange = Infinity;\n        var foundBookmarks = [], endStyles = (void 0);\n        for (var j = 0; j < spans.length; ++j) {\n          var sp = spans[j], m = sp.marker;\n          if (m.type == \"bookmark\" && sp.from == pos && m.widgetNode) {\n            foundBookmarks.push(m);\n          } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\n            if (sp.to != null && sp.to != pos && nextChange > sp.to) {\n              nextChange = sp.to;\n              spanEndStyle = \"\";\n            }\n            if (m.className) { spanStyle += \" \" + m.className; }\n            if (m.css) { css = (css ? css + \";\" : \"\") + m.css; }\n            if (m.startStyle && sp.from == pos) { spanStartStyle += \" \" + m.startStyle; }\n            if (m.endStyle && sp.to == nextChange) { (endStyles || (endStyles = [])).push(m.endStyle, sp.to); }\n            // support for the old title property\n            // https://github.com/codemirror/CodeMirror/pull/5673\n            if (m.title) { (attributes || (attributes = {})).title = m.title; }\n            if (m.attributes) {\n              for (var attr in m.attributes)\n                { (attributes || (attributes = {}))[attr] = m.attributes[attr]; }\n            }\n            if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0))\n              { collapsed = sp; }\n          } else if (sp.from > pos && nextChange > sp.from) {\n            nextChange = sp.from;\n          }\n        }\n        if (endStyles) { for (var j$1 = 0; j$1 < endStyles.length; j$1 += 2)\n          { if (endStyles[j$1 + 1] == nextChange) { spanEndStyle += \" \" + endStyles[j$1]; } } }\n\n        if (!collapsed || collapsed.from == pos) { for (var j$2 = 0; j$2 < foundBookmarks.length; ++j$2)\n          { buildCollapsedSpan(builder, 0, foundBookmarks[j$2]); } }\n        if (collapsed && (collapsed.from || 0) == pos) {\n          buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos,\n                             collapsed.marker, collapsed.from == null);\n          if (collapsed.to == null) { return }\n          if (collapsed.to == pos) { collapsed = false; }\n        }\n      }\n      if (pos >= len) { break }\n\n      var upto = Math.min(len, nextChange);\n      while (true) {\n        if (text) {\n          var end = pos + text.length;\n          if (!collapsed) {\n            var tokenText = end > upto ? text.slice(0, upto - pos) : text;\n            builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle,\n                             spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \"\", css, attributes);\n          }\n          if (end >= upto) {text = text.slice(upto - pos); pos = upto; break}\n          pos = end;\n          spanStartStyle = \"\";\n        }\n        text = allText.slice(at, at = styles[i++]);\n        style = interpretTokenStyle(styles[i++], builder.cm.options);\n      }\n    }\n  }\n\n\n  // These objects are used to represent the visible (currently drawn)\n  // part of the document. A LineView may correspond to multiple\n  // logical lines, if those are connected by collapsed ranges.\n  function LineView(doc, line, lineN) {\n    // The starting line\n    this.line = line;\n    // Continuing lines, if any\n    this.rest = visualLineContinued(line);\n    // Number of logical lines in this visual line\n    this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;\n    this.node = this.text = null;\n    this.hidden = lineIsHidden(doc, line);\n  }\n\n  // Create a range of LineView objects for the given lines.\n  function buildViewArray(cm, from, to) {\n    var array = [], nextPos;\n    for (var pos = from; pos < to; pos = nextPos) {\n      var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);\n      nextPos = pos + view.size;\n      array.push(view);\n    }\n    return array\n  }\n\n  var operationGroup = null;\n\n  function pushOperation(op) {\n    if (operationGroup) {\n      operationGroup.ops.push(op);\n    } else {\n      op.ownsGroup = operationGroup = {\n        ops: [op],\n        delayedCallbacks: []\n      };\n    }\n  }\n\n  function fireCallbacksForOps(group) {\n    // Calls delayed callbacks and cursorActivity handlers until no\n    // new ones appear\n    var callbacks = group.delayedCallbacks, i = 0;\n    do {\n      for (; i < callbacks.length; i++)\n        { callbacks[i].call(null); }\n      for (var j = 0; j < group.ops.length; j++) {\n        var op = group.ops[j];\n        if (op.cursorActivityHandlers)\n          { while (op.cursorActivityCalled < op.cursorActivityHandlers.length)\n            { op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm); } }\n      }\n    } while (i < callbacks.length)\n  }\n\n  function finishOperation(op, endCb) {\n    var group = op.ownsGroup;\n    if (!group) { return }\n\n    try { fireCallbacksForOps(group); }\n    finally {\n      operationGroup = null;\n      endCb(group);\n    }\n  }\n\n  var orphanDelayedCallbacks = null;\n\n  // Often, we want to signal events at a point where we are in the\n  // middle of some work, but don't want the handler to start calling\n  // other methods on the editor, which might be in an inconsistent\n  // state or simply not expect any other events to happen.\n  // signalLater looks whether there are any handlers, and schedules\n  // them to be executed when the last operation ends, or, if no\n  // operation is active, when a timeout fires.\n  function signalLater(emitter, type /*, values...*/) {\n    var arr = getHandlers(emitter, type);\n    if (!arr.length) { return }\n    var args = Array.prototype.slice.call(arguments, 2), list;\n    if (operationGroup) {\n      list = operationGroup.delayedCallbacks;\n    } else if (orphanDelayedCallbacks) {\n      list = orphanDelayedCallbacks;\n    } else {\n      list = orphanDelayedCallbacks = [];\n      setTimeout(fireOrphanDelayed, 0);\n    }\n    var loop = function ( i ) {\n      list.push(function () { return arr[i].apply(null, args); });\n    };\n\n    for (var i = 0; i < arr.length; ++i)\n      loop( i );\n  }\n\n  function fireOrphanDelayed() {\n    var delayed = orphanDelayedCallbacks;\n    orphanDelayedCallbacks = null;\n    for (var i = 0; i < delayed.length; ++i) { delayed[i](); }\n  }\n\n  // When an aspect of a line changes, a string is added to\n  // lineView.changes. This updates the relevant part of the line's\n  // DOM structure.\n  function updateLineForChanges(cm, lineView, lineN, dims) {\n    for (var j = 0; j < lineView.changes.length; j++) {\n      var type = lineView.changes[j];\n      if (type == \"text\") { updateLineText(cm, lineView); }\n      else if (type == \"gutter\") { updateLineGutter(cm, lineView, lineN, dims); }\n      else if (type == \"class\") { updateLineClasses(cm, lineView); }\n      else if (type == \"widget\") { updateLineWidgets(cm, lineView, dims); }\n    }\n    lineView.changes = null;\n  }\n\n  // Lines with gutter elements, widgets or a background class need to\n  // be wrapped, and have the extra elements added to the wrapper div\n  function ensureLineWrapped(lineView) {\n    if (lineView.node == lineView.text) {\n      lineView.node = elt(\"div\", null, null, \"position: relative\");\n      if (lineView.text.parentNode)\n        { lineView.text.parentNode.replaceChild(lineView.node, lineView.text); }\n      lineView.node.appendChild(lineView.text);\n      if (ie && ie_version < 8) { lineView.node.style.zIndex = 2; }\n    }\n    return lineView.node\n  }\n\n  function updateLineBackground(cm, lineView) {\n    var cls = lineView.bgClass ? lineView.bgClass + \" \" + (lineView.line.bgClass || \"\") : lineView.line.bgClass;\n    if (cls) { cls += \" CodeMirror-linebackground\"; }\n    if (lineView.background) {\n      if (cls) { lineView.background.className = cls; }\n      else { lineView.background.parentNode.removeChild(lineView.background); lineView.background = null; }\n    } else if (cls) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.background = wrap.insertBefore(elt(\"div\", null, cls), wrap.firstChild);\n      cm.display.input.setUneditable(lineView.background);\n    }\n  }\n\n  // Wrapper around buildLineContent which will reuse the structure\n  // in display.externalMeasured when possible.\n  function getLineContent(cm, lineView) {\n    var ext = cm.display.externalMeasured;\n    if (ext && ext.line == lineView.line) {\n      cm.display.externalMeasured = null;\n      lineView.measure = ext.measure;\n      return ext.built\n    }\n    return buildLineContent(cm, lineView)\n  }\n\n  // Redraw the line's text. Interacts with the background and text\n  // classes because the mode may output tokens that influence these\n  // classes.\n  function updateLineText(cm, lineView) {\n    var cls = lineView.text.className;\n    var built = getLineContent(cm, lineView);\n    if (lineView.text == lineView.node) { lineView.node = built.pre; }\n    lineView.text.parentNode.replaceChild(built.pre, lineView.text);\n    lineView.text = built.pre;\n    if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\n      lineView.bgClass = built.bgClass;\n      lineView.textClass = built.textClass;\n      updateLineClasses(cm, lineView);\n    } else if (cls) {\n      lineView.text.className = cls;\n    }\n  }\n\n  function updateLineClasses(cm, lineView) {\n    updateLineBackground(cm, lineView);\n    if (lineView.line.wrapClass)\n      { ensureLineWrapped(lineView).className = lineView.line.wrapClass; }\n    else if (lineView.node != lineView.text)\n      { lineView.node.className = \"\"; }\n    var textClass = lineView.textClass ? lineView.textClass + \" \" + (lineView.line.textClass || \"\") : lineView.line.textClass;\n    lineView.text.className = textClass || \"\";\n  }\n\n  function updateLineGutter(cm, lineView, lineN, dims) {\n    if (lineView.gutter) {\n      lineView.node.removeChild(lineView.gutter);\n      lineView.gutter = null;\n    }\n    if (lineView.gutterBackground) {\n      lineView.node.removeChild(lineView.gutterBackground);\n      lineView.gutterBackground = null;\n    }\n    if (lineView.line.gutterClass) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.gutterBackground = elt(\"div\", null, \"CodeMirror-gutter-background \" + lineView.line.gutterClass,\n                                      (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px; width: \" + (dims.gutterTotalWidth) + \"px\"));\n      cm.display.input.setUneditable(lineView.gutterBackground);\n      wrap.insertBefore(lineView.gutterBackground, lineView.text);\n    }\n    var markers = lineView.line.gutterMarkers;\n    if (cm.options.lineNumbers || markers) {\n      var wrap$1 = ensureLineWrapped(lineView);\n      var gutterWrap = lineView.gutter = elt(\"div\", null, \"CodeMirror-gutter-wrapper\", (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px\"));\n      cm.display.input.setUneditable(gutterWrap);\n      wrap$1.insertBefore(gutterWrap, lineView.text);\n      if (lineView.line.gutterClass)\n        { gutterWrap.className += \" \" + lineView.line.gutterClass; }\n      if (cm.options.lineNumbers && (!markers || !markers[\"CodeMirror-linenumbers\"]))\n        { lineView.lineNumber = gutterWrap.appendChild(\n          elt(\"div\", lineNumberFor(cm.options, lineN),\n              \"CodeMirror-linenumber CodeMirror-gutter-elt\",\n              (\"left: \" + (dims.gutterLeft[\"CodeMirror-linenumbers\"]) + \"px; width: \" + (cm.display.lineNumInnerWidth) + \"px\"))); }\n      if (markers) { for (var k = 0; k < cm.display.gutterSpecs.length; ++k) {\n        var id = cm.display.gutterSpecs[k].className, found = markers.hasOwnProperty(id) && markers[id];\n        if (found)\n          { gutterWrap.appendChild(elt(\"div\", [found], \"CodeMirror-gutter-elt\",\n                                     (\"left: \" + (dims.gutterLeft[id]) + \"px; width: \" + (dims.gutterWidth[id]) + \"px\"))); }\n      } }\n    }\n  }\n\n  function updateLineWidgets(cm, lineView, dims) {\n    if (lineView.alignable) { lineView.alignable = null; }\n    for (var node = lineView.node.firstChild, next = (void 0); node; node = next) {\n      next = node.nextSibling;\n      if (node.className == \"CodeMirror-linewidget\")\n        { lineView.node.removeChild(node); }\n    }\n    insertLineWidgets(cm, lineView, dims);\n  }\n\n  // Build a line's DOM representation from scratch\n  function buildLineElement(cm, lineView, lineN, dims) {\n    var built = getLineContent(cm, lineView);\n    lineView.text = lineView.node = built.pre;\n    if (built.bgClass) { lineView.bgClass = built.bgClass; }\n    if (built.textClass) { lineView.textClass = built.textClass; }\n\n    updateLineClasses(cm, lineView);\n    updateLineGutter(cm, lineView, lineN, dims);\n    insertLineWidgets(cm, lineView, dims);\n    return lineView.node\n  }\n\n  // A lineView may contain multiple logical lines (when merged by\n  // collapsed spans). The widgets for all of them need to be drawn.\n  function insertLineWidgets(cm, lineView, dims) {\n    insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);\n    if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n      { insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false); } }\n  }\n\n  function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\n    if (!line.widgets) { return }\n    var wrap = ensureLineWrapped(lineView);\n    for (var i = 0, ws = line.widgets; i < ws.length; ++i) {\n      var widget = ws[i], node = elt(\"div\", [widget.node], \"CodeMirror-linewidget\");\n      if (!widget.handleMouseEvents) { node.setAttribute(\"cm-ignore-events\", \"true\"); }\n      positionLineWidget(widget, node, lineView, dims);\n      cm.display.input.setUneditable(node);\n      if (allowAbove && widget.above)\n        { wrap.insertBefore(node, lineView.gutter || lineView.text); }\n      else\n        { wrap.appendChild(node); }\n      signalLater(widget, \"redraw\");\n    }\n  }\n\n  function positionLineWidget(widget, node, lineView, dims) {\n    if (widget.noHScroll) {\n  (lineView.alignable || (lineView.alignable = [])).push(node);\n      var width = dims.wrapperWidth;\n      node.style.left = dims.fixedPos + \"px\";\n      if (!widget.coverGutter) {\n        width -= dims.gutterTotalWidth;\n        node.style.paddingLeft = dims.gutterTotalWidth + \"px\";\n      }\n      node.style.width = width + \"px\";\n    }\n    if (widget.coverGutter) {\n      node.style.zIndex = 5;\n      node.style.position = \"relative\";\n      if (!widget.noHScroll) { node.style.marginLeft = -dims.gutterTotalWidth + \"px\"; }\n    }\n  }\n\n  function widgetHeight(widget) {\n    if (widget.height != null) { return widget.height }\n    var cm = widget.doc.cm;\n    if (!cm) { return 0 }\n    if (!contains(document.body, widget.node)) {\n      var parentStyle = \"position: relative;\";\n      if (widget.coverGutter)\n        { parentStyle += \"margin-left: -\" + cm.display.gutters.offsetWidth + \"px;\"; }\n      if (widget.noHScroll)\n        { parentStyle += \"width: \" + cm.display.wrapper.clientWidth + \"px;\"; }\n      removeChildrenAndAdd(cm.display.measure, elt(\"div\", [widget.node], null, parentStyle));\n    }\n    return widget.height = widget.node.parentNode.offsetHeight\n  }\n\n  // Return true when the given mouse event happened in a widget\n  function eventInWidget(display, e) {\n    for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\n      if (!n || (n.nodeType == 1 && n.getAttribute(\"cm-ignore-events\") == \"true\") ||\n          (n.parentNode == display.sizer && n != display.mover))\n        { return true }\n    }\n  }\n\n  // POSITION MEASUREMENT\n\n  function paddingTop(display) {return display.lineSpace.offsetTop}\n  function paddingVert(display) {return display.mover.offsetHeight - display.lineSpace.offsetHeight}\n  function paddingH(display) {\n    if (display.cachedPaddingH) { return display.cachedPaddingH }\n    var e = removeChildrenAndAdd(display.measure, elt(\"pre\", \"x\", \"CodeMirror-line-like\"));\n    var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;\n    var data = {left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight)};\n    if (!isNaN(data.left) && !isNaN(data.right)) { display.cachedPaddingH = data; }\n    return data\n  }\n\n  function scrollGap(cm) { return scrollerGap - cm.display.nativeBarWidth }\n  function displayWidth(cm) {\n    return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth\n  }\n  function displayHeight(cm) {\n    return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight\n  }\n\n  // Ensure the lineView.wrapping.heights array is populated. This is\n  // an array of bottom offsets for the lines that make up a drawn\n  // line. When lineWrapping is on, there might be more than one\n  // height.\n  function ensureLineHeights(cm, lineView, rect) {\n    var wrapping = cm.options.lineWrapping;\n    var curWidth = wrapping && displayWidth(cm);\n    if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\n      var heights = lineView.measure.heights = [];\n      if (wrapping) {\n        lineView.measure.width = curWidth;\n        var rects = lineView.text.firstChild.getClientRects();\n        for (var i = 0; i < rects.length - 1; i++) {\n          var cur = rects[i], next = rects[i + 1];\n          if (Math.abs(cur.bottom - next.bottom) > 2)\n            { heights.push((cur.bottom + next.top) / 2 - rect.top); }\n        }\n      }\n      heights.push(rect.bottom - rect.top);\n    }\n  }\n\n  // Find a line map (mapping character offsets to text nodes) and a\n  // measurement cache for the given line number. (A line view might\n  // contain multiple lines when collapsed ranges are present.)\n  function mapFromLineView(lineView, line, lineN) {\n    if (lineView.line == line)\n      { return {map: lineView.measure.map, cache: lineView.measure.cache} }\n    for (var i = 0; i < lineView.rest.length; i++)\n      { if (lineView.rest[i] == line)\n        { return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i]} } }\n    for (var i$1 = 0; i$1 < lineView.rest.length; i$1++)\n      { if (lineNo(lineView.rest[i$1]) > lineN)\n        { return {map: lineView.measure.maps[i$1], cache: lineView.measure.caches[i$1], before: true} } }\n  }\n\n  // Render a line into the hidden node display.externalMeasured. Used\n  // when measurement is needed for a line that's not in the viewport.\n  function updateExternalMeasurement(cm, line) {\n    line = visualLine(line);\n    var lineN = lineNo(line);\n    var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);\n    view.lineN = lineN;\n    var built = view.built = buildLineContent(cm, view);\n    view.text = built.pre;\n    removeChildrenAndAdd(cm.display.lineMeasure, built.pre);\n    return view\n  }\n\n  // Get a {top, bottom, left, right} box (in line-local coordinates)\n  // for a given character.\n  function measureChar(cm, line, ch, bias) {\n    return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias)\n  }\n\n  // Find a line view that corresponds to the given line number.\n  function findViewForLine(cm, lineN) {\n    if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo)\n      { return cm.display.view[findViewIndex(cm, lineN)] }\n    var ext = cm.display.externalMeasured;\n    if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size)\n      { return ext }\n  }\n\n  // Measurement can be split in two steps, the set-up work that\n  // applies to the whole line, and the measurement of the actual\n  // character. Functions like coordsChar, that need to do a lot of\n  // measurements in a row, can thus ensure that the set-up work is\n  // only done once.\n  function prepareMeasureForLine(cm, line) {\n    var lineN = lineNo(line);\n    var view = findViewForLine(cm, lineN);\n    if (view && !view.text) {\n      view = null;\n    } else if (view && view.changes) {\n      updateLineForChanges(cm, view, lineN, getDimensions(cm));\n      cm.curOp.forceUpdate = true;\n    }\n    if (!view)\n      { view = updateExternalMeasurement(cm, line); }\n\n    var info = mapFromLineView(view, line, lineN);\n    return {\n      line: line, view: view, rect: null,\n      map: info.map, cache: info.cache, before: info.before,\n      hasHeights: false\n    }\n  }\n\n  // Given a prepared measurement object, measures the position of an\n  // actual character (or fetches it from the cache).\n  function measureCharPrepared(cm, prepared, ch, bias, varHeight) {\n    if (prepared.before) { ch = -1; }\n    var key = ch + (bias || \"\"), found;\n    if (prepared.cache.hasOwnProperty(key)) {\n      found = prepared.cache[key];\n    } else {\n      if (!prepared.rect)\n        { prepared.rect = prepared.view.text.getBoundingClientRect(); }\n      if (!prepared.hasHeights) {\n        ensureLineHeights(cm, prepared.view, prepared.rect);\n        prepared.hasHeights = true;\n      }\n      found = measureCharInner(cm, prepared, ch, bias);\n      if (!found.bogus) { prepared.cache[key] = found; }\n    }\n    return {left: found.left, right: found.right,\n            top: varHeight ? found.rtop : found.top,\n            bottom: varHeight ? found.rbottom : found.bottom}\n  }\n\n  var nullRect = {left: 0, right: 0, top: 0, bottom: 0};\n\n  function nodeAndOffsetInLineMap(map$$1, ch, bias) {\n    var node, start, end, collapse, mStart, mEnd;\n    // First, search the line map for the text node corresponding to,\n    // or closest to, the target character.\n    for (var i = 0; i < map$$1.length; i += 3) {\n      mStart = map$$1[i];\n      mEnd = map$$1[i + 1];\n      if (ch < mStart) {\n        start = 0; end = 1;\n        collapse = \"left\";\n      } else if (ch < mEnd) {\n        start = ch - mStart;\n        end = start + 1;\n      } else if (i == map$$1.length - 3 || ch == mEnd && map$$1[i + 3] > ch) {\n        end = mEnd - mStart;\n        start = end - 1;\n        if (ch >= mEnd) { collapse = \"right\"; }\n      }\n      if (start != null) {\n        node = map$$1[i + 2];\n        if (mStart == mEnd && bias == (node.insertLeft ? \"left\" : \"right\"))\n          { collapse = bias; }\n        if (bias == \"left\" && start == 0)\n          { while (i && map$$1[i - 2] == map$$1[i - 3] && map$$1[i - 1].insertLeft) {\n            node = map$$1[(i -= 3) + 2];\n            collapse = \"left\";\n          } }\n        if (bias == \"right\" && start == mEnd - mStart)\n          { while (i < map$$1.length - 3 && map$$1[i + 3] == map$$1[i + 4] && !map$$1[i + 5].insertLeft) {\n            node = map$$1[(i += 3) + 2];\n            collapse = \"right\";\n          } }\n        break\n      }\n    }\n    return {node: node, start: start, end: end, collapse: collapse, coverStart: mStart, coverEnd: mEnd}\n  }\n\n  function getUsefulRect(rects, bias) {\n    var rect = nullRect;\n    if (bias == \"left\") { for (var i = 0; i < rects.length; i++) {\n      if ((rect = rects[i]).left != rect.right) { break }\n    } } else { for (var i$1 = rects.length - 1; i$1 >= 0; i$1--) {\n      if ((rect = rects[i$1]).left != rect.right) { break }\n    } }\n    return rect\n  }\n\n  function measureCharInner(cm, prepared, ch, bias) {\n    var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);\n    var node = place.node, start = place.start, end = place.end, collapse = place.collapse;\n\n    var rect;\n    if (node.nodeType == 3) { // If it is a text node, use a range to retrieve the coordinates.\n      for (var i$1 = 0; i$1 < 4; i$1++) { // Retry a maximum of 4 times when nonsense rectangles are returned\n        while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) { --start; }\n        while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) { ++end; }\n        if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart)\n          { rect = node.parentNode.getBoundingClientRect(); }\n        else\n          { rect = getUsefulRect(range(node, start, end).getClientRects(), bias); }\n        if (rect.left || rect.right || start == 0) { break }\n        end = start;\n        start = start - 1;\n        collapse = \"right\";\n      }\n      if (ie && ie_version < 11) { rect = maybeUpdateRectForZooming(cm.display.measure, rect); }\n    } else { // If it is a widget, simply get the box for the whole widget.\n      if (start > 0) { collapse = bias = \"right\"; }\n      var rects;\n      if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1)\n        { rect = rects[bias == \"right\" ? rects.length - 1 : 0]; }\n      else\n        { rect = node.getBoundingClientRect(); }\n    }\n    if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\n      var rSpan = node.parentNode.getClientRects()[0];\n      if (rSpan)\n        { rect = {left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom}; }\n      else\n        { rect = nullRect; }\n    }\n\n    var rtop = rect.top - prepared.rect.top, rbot = rect.bottom - prepared.rect.top;\n    var mid = (rtop + rbot) / 2;\n    var heights = prepared.view.measure.heights;\n    var i = 0;\n    for (; i < heights.length - 1; i++)\n      { if (mid < heights[i]) { break } }\n    var top = i ? heights[i - 1] : 0, bot = heights[i];\n    var result = {left: (collapse == \"right\" ? rect.right : rect.left) - prepared.rect.left,\n                  right: (collapse == \"left\" ? rect.left : rect.right) - prepared.rect.left,\n                  top: top, bottom: bot};\n    if (!rect.left && !rect.right) { result.bogus = true; }\n    if (!cm.options.singleCursorHeightPerLine) { result.rtop = rtop; result.rbottom = rbot; }\n\n    return result\n  }\n\n  // Work around problem with bounding client rects on ranges being\n  // returned incorrectly when zoomed on IE10 and below.\n  function maybeUpdateRectForZooming(measure, rect) {\n    if (!window.screen || screen.logicalXDPI == null ||\n        screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure))\n      { return rect }\n    var scaleX = screen.logicalXDPI / screen.deviceXDPI;\n    var scaleY = screen.logicalYDPI / screen.deviceYDPI;\n    return {left: rect.left * scaleX, right: rect.right * scaleX,\n            top: rect.top * scaleY, bottom: rect.bottom * scaleY}\n  }\n\n  function clearLineMeasurementCacheFor(lineView) {\n    if (lineView.measure) {\n      lineView.measure.cache = {};\n      lineView.measure.heights = null;\n      if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n        { lineView.measure.caches[i] = {}; } }\n    }\n  }\n\n  function clearLineMeasurementCache(cm) {\n    cm.display.externalMeasure = null;\n    removeChildren(cm.display.lineMeasure);\n    for (var i = 0; i < cm.display.view.length; i++)\n      { clearLineMeasurementCacheFor(cm.display.view[i]); }\n  }\n\n  function clearCaches(cm) {\n    clearLineMeasurementCache(cm);\n    cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;\n    if (!cm.options.lineWrapping) { cm.display.maxLineChanged = true; }\n    cm.display.lineNumChars = null;\n  }\n\n  function pageScrollX() {\n    // Work around https://bugs.chromium.org/p/chromium/issues/detail?id=489206\n    // which causes page_Offset and bounding client rects to use\n    // different reference viewports and invalidate our calculations.\n    if (chrome && android) { return -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft)) }\n    return window.pageXOffset || (document.documentElement || document.body).scrollLeft\n  }\n  function pageScrollY() {\n    if (chrome && android) { return -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop)) }\n    return window.pageYOffset || (document.documentElement || document.body).scrollTop\n  }\n\n  function widgetTopHeight(lineObj) {\n    var height = 0;\n    if (lineObj.widgets) { for (var i = 0; i < lineObj.widgets.length; ++i) { if (lineObj.widgets[i].above)\n      { height += widgetHeight(lineObj.widgets[i]); } } }\n    return height\n  }\n\n  // Converts a {top, bottom, left, right} box from line-local\n  // coordinates into another coordinate system. Context may be one of\n  // \"line\", \"div\" (display.lineDiv), \"local\"./null (editor), \"window\",\n  // or \"page\".\n  function intoCoordSystem(cm, lineObj, rect, context, includeWidgets) {\n    if (!includeWidgets) {\n      var height = widgetTopHeight(lineObj);\n      rect.top += height; rect.bottom += height;\n    }\n    if (context == \"line\") { return rect }\n    if (!context) { context = \"local\"; }\n    var yOff = heightAtLine(lineObj);\n    if (context == \"local\") { yOff += paddingTop(cm.display); }\n    else { yOff -= cm.display.viewOffset; }\n    if (context == \"page\" || context == \"window\") {\n      var lOff = cm.display.lineSpace.getBoundingClientRect();\n      yOff += lOff.top + (context == \"window\" ? 0 : pageScrollY());\n      var xOff = lOff.left + (context == \"window\" ? 0 : pageScrollX());\n      rect.left += xOff; rect.right += xOff;\n    }\n    rect.top += yOff; rect.bottom += yOff;\n    return rect\n  }\n\n  // Coverts a box from \"div\" coords to another coordinate system.\n  // Context may be \"window\", \"page\", \"div\", or \"local\"./null.\n  function fromCoordSystem(cm, coords, context) {\n    if (context == \"div\") { return coords }\n    var left = coords.left, top = coords.top;\n    // First move into \"page\" coordinate system\n    if (context == \"page\") {\n      left -= pageScrollX();\n      top -= pageScrollY();\n    } else if (context == \"local\" || !context) {\n      var localBox = cm.display.sizer.getBoundingClientRect();\n      left += localBox.left;\n      top += localBox.top;\n    }\n\n    var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();\n    return {left: left - lineSpaceBox.left, top: top - lineSpaceBox.top}\n  }\n\n  function charCoords(cm, pos, context, lineObj, bias) {\n    if (!lineObj) { lineObj = getLine(cm.doc, pos.line); }\n    return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context)\n  }\n\n  // Returns a box for a given cursor position, which may have an\n  // 'other' property containing the position of the secondary cursor\n  // on a bidi boundary.\n  // A cursor Pos(line, char, \"before\") is on the same visual line as `char - 1`\n  // and after `char - 1` in writing order of `char - 1`\n  // A cursor Pos(line, char, \"after\") is on the same visual line as `char`\n  // and before `char` in writing order of `char`\n  // Examples (upper-case letters are RTL, lower-case are LTR):\n  //     Pos(0, 1, ...)\n  //     before   after\n  // ab     a|b     a|b\n  // aB     a|B     aB|\n  // Ab     |Ab     A|b\n  // AB     B|A     B|A\n  // Every position after the last character on a line is considered to stick\n  // to the last character on the line.\n  function cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\n    lineObj = lineObj || getLine(cm.doc, pos.line);\n    if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\n    function get(ch, right) {\n      var m = measureCharPrepared(cm, preparedMeasure, ch, right ? \"right\" : \"left\", varHeight);\n      if (right) { m.left = m.right; } else { m.right = m.left; }\n      return intoCoordSystem(cm, lineObj, m, context)\n    }\n    var order = getOrder(lineObj, cm.doc.direction), ch = pos.ch, sticky = pos.sticky;\n    if (ch >= lineObj.text.length) {\n      ch = lineObj.text.length;\n      sticky = \"before\";\n    } else if (ch <= 0) {\n      ch = 0;\n      sticky = \"after\";\n    }\n    if (!order) { return get(sticky == \"before\" ? ch - 1 : ch, sticky == \"before\") }\n\n    function getBidi(ch, partPos, invert) {\n      var part = order[partPos], right = part.level == 1;\n      return get(invert ? ch - 1 : ch, right != invert)\n    }\n    var partPos = getBidiPartAt(order, ch, sticky);\n    var other = bidiOther;\n    var val = getBidi(ch, partPos, sticky == \"before\");\n    if (other != null) { val.other = getBidi(ch, other, sticky != \"before\"); }\n    return val\n  }\n\n  // Used to cheaply estimate the coordinates for a position. Used for\n  // intermediate scroll updates.\n  function estimateCoords(cm, pos) {\n    var left = 0;\n    pos = clipPos(cm.doc, pos);\n    if (!cm.options.lineWrapping) { left = charWidth(cm.display) * pos.ch; }\n    var lineObj = getLine(cm.doc, pos.line);\n    var top = heightAtLine(lineObj) + paddingTop(cm.display);\n    return {left: left, right: left, top: top, bottom: top + lineObj.height}\n  }\n\n  // Positions returned by coordsChar contain some extra information.\n  // xRel is the relative x position of the input coordinates compared\n  // to the found position (so xRel > 0 means the coordinates are to\n  // the right of the character position, for example). When outside\n  // is true, that means the coordinates lie outside the line's\n  // vertical range.\n  function PosWithInfo(line, ch, sticky, outside, xRel) {\n    var pos = Pos(line, ch, sticky);\n    pos.xRel = xRel;\n    if (outside) { pos.outside = outside; }\n    return pos\n  }\n\n  // Compute the character position closest to the given coordinates.\n  // Input must be lineSpace-local (\"div\" coordinate system).\n  function coordsChar(cm, x, y) {\n    var doc = cm.doc;\n    y += cm.display.viewOffset;\n    if (y < 0) { return PosWithInfo(doc.first, 0, null, -1, -1) }\n    var lineN = lineAtHeight(doc, y), last = doc.first + doc.size - 1;\n    if (lineN > last)\n      { return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, null, 1, 1) }\n    if (x < 0) { x = 0; }\n\n    var lineObj = getLine(doc, lineN);\n    for (;;) {\n      var found = coordsCharInner(cm, lineObj, lineN, x, y);\n      var collapsed = collapsedSpanAround(lineObj, found.ch + (found.xRel > 0 || found.outside > 0 ? 1 : 0));\n      if (!collapsed) { return found }\n      var rangeEnd = collapsed.find(1);\n      if (rangeEnd.line == lineN) { return rangeEnd }\n      lineObj = getLine(doc, lineN = rangeEnd.line);\n    }\n  }\n\n  function wrappedLineExtent(cm, lineObj, preparedMeasure, y) {\n    y -= widgetTopHeight(lineObj);\n    var end = lineObj.text.length;\n    var begin = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch - 1).bottom <= y; }, end, 0);\n    end = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch).top > y; }, begin, end);\n    return {begin: begin, end: end}\n  }\n\n  function wrappedLineExtentChar(cm, lineObj, preparedMeasure, target) {\n    if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\n    var targetTop = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, target), \"line\").top;\n    return wrappedLineExtent(cm, lineObj, preparedMeasure, targetTop)\n  }\n\n  // Returns true if the given side of a box is after the given\n  // coordinates, in top-to-bottom, left-to-right order.\n  function boxIsAfter(box, x, y, left) {\n    return box.bottom <= y ? false : box.top > y ? true : (left ? box.left : box.right) > x\n  }\n\n  function coordsCharInner(cm, lineObj, lineNo$$1, x, y) {\n    // Move y into line-local coordinate space\n    y -= heightAtLine(lineObj);\n    var preparedMeasure = prepareMeasureForLine(cm, lineObj);\n    // When directly calling `measureCharPrepared`, we have to adjust\n    // for the widgets at this line.\n    var widgetHeight$$1 = widgetTopHeight(lineObj);\n    var begin = 0, end = lineObj.text.length, ltr = true;\n\n    var order = getOrder(lineObj, cm.doc.direction);\n    // If the line isn't plain left-to-right text, first figure out\n    // which bidi section the coordinates fall into.\n    if (order) {\n      var part = (cm.options.lineWrapping ? coordsBidiPartWrapped : coordsBidiPart)\n                   (cm, lineObj, lineNo$$1, preparedMeasure, order, x, y);\n      ltr = part.level != 1;\n      // The awkward -1 offsets are needed because findFirst (called\n      // on these below) will treat its first bound as inclusive,\n      // second as exclusive, but we want to actually address the\n      // characters in the part's range\n      begin = ltr ? part.from : part.to - 1;\n      end = ltr ? part.to : part.from - 1;\n    }\n\n    // A binary search to find the first character whose bounding box\n    // starts after the coordinates. If we run across any whose box wrap\n    // the coordinates, store that.\n    var chAround = null, boxAround = null;\n    var ch = findFirst(function (ch) {\n      var box = measureCharPrepared(cm, preparedMeasure, ch);\n      box.top += widgetHeight$$1; box.bottom += widgetHeight$$1;\n      if (!boxIsAfter(box, x, y, false)) { return false }\n      if (box.top <= y && box.left <= x) {\n        chAround = ch;\n        boxAround = box;\n      }\n      return true\n    }, begin, end);\n\n    var baseX, sticky, outside = false;\n    // If a box around the coordinates was found, use that\n    if (boxAround) {\n      // Distinguish coordinates nearer to the left or right side of the box\n      var atLeft = x - boxAround.left < boxAround.right - x, atStart = atLeft == ltr;\n      ch = chAround + (atStart ? 0 : 1);\n      sticky = atStart ? \"after\" : \"before\";\n      baseX = atLeft ? boxAround.left : boxAround.right;\n    } else {\n      // (Adjust for extended bound, if necessary.)\n      if (!ltr && (ch == end || ch == begin)) { ch++; }\n      // To determine which side to associate with, get the box to the\n      // left of the character and compare it's vertical position to the\n      // coordinates\n      sticky = ch == 0 ? \"after\" : ch == lineObj.text.length ? \"before\" :\n        (measureCharPrepared(cm, preparedMeasure, ch - (ltr ? 1 : 0)).bottom + widgetHeight$$1 <= y) == ltr ?\n        \"after\" : \"before\";\n      // Now get accurate coordinates for this place, in order to get a\n      // base X position\n      var coords = cursorCoords(cm, Pos(lineNo$$1, ch, sticky), \"line\", lineObj, preparedMeasure);\n      baseX = coords.left;\n      outside = y < coords.top ? -1 : y >= coords.bottom ? 1 : 0;\n    }\n\n    ch = skipExtendingChars(lineObj.text, ch, 1);\n    return PosWithInfo(lineNo$$1, ch, sticky, outside, x - baseX)\n  }\n\n  function coordsBidiPart(cm, lineObj, lineNo$$1, preparedMeasure, order, x, y) {\n    // Bidi parts are sorted left-to-right, and in a non-line-wrapping\n    // situation, we can take this ordering to correspond to the visual\n    // ordering. This finds the first part whose end is after the given\n    // coordinates.\n    var index = findFirst(function (i) {\n      var part = order[i], ltr = part.level != 1;\n      return boxIsAfter(cursorCoords(cm, Pos(lineNo$$1, ltr ? part.to : part.from, ltr ? \"before\" : \"after\"),\n                                     \"line\", lineObj, preparedMeasure), x, y, true)\n    }, 0, order.length - 1);\n    var part = order[index];\n    // If this isn't the first part, the part's start is also after\n    // the coordinates, and the coordinates aren't on the same line as\n    // that start, move one part back.\n    if (index > 0) {\n      var ltr = part.level != 1;\n      var start = cursorCoords(cm, Pos(lineNo$$1, ltr ? part.from : part.to, ltr ? \"after\" : \"before\"),\n                               \"line\", lineObj, preparedMeasure);\n      if (boxIsAfter(start, x, y, true) && start.top > y)\n        { part = order[index - 1]; }\n    }\n    return part\n  }\n\n  function coordsBidiPartWrapped(cm, lineObj, _lineNo, preparedMeasure, order, x, y) {\n    // In a wrapped line, rtl text on wrapping boundaries can do things\n    // that don't correspond to the ordering in our `order` array at\n    // all, so a binary search doesn't work, and we want to return a\n    // part that only spans one line so that the binary search in\n    // coordsCharInner is safe. As such, we first find the extent of the\n    // wrapped line, and then do a flat search in which we discard any\n    // spans that aren't on the line.\n    var ref = wrappedLineExtent(cm, lineObj, preparedMeasure, y);\n    var begin = ref.begin;\n    var end = ref.end;\n    if (/\\s/.test(lineObj.text.charAt(end - 1))) { end--; }\n    var part = null, closestDist = null;\n    for (var i = 0; i < order.length; i++) {\n      var p = order[i];\n      if (p.from >= end || p.to <= begin) { continue }\n      var ltr = p.level != 1;\n      var endX = measureCharPrepared(cm, preparedMeasure, ltr ? Math.min(end, p.to) - 1 : Math.max(begin, p.from)).right;\n      // Weigh against spans ending before this, so that they are only\n      // picked if nothing ends after\n      var dist = endX < x ? x - endX + 1e9 : endX - x;\n      if (!part || closestDist > dist) {\n        part = p;\n        closestDist = dist;\n      }\n    }\n    if (!part) { part = order[order.length - 1]; }\n    // Clip the part to the wrapped line.\n    if (part.from < begin) { part = {from: begin, to: part.to, level: part.level}; }\n    if (part.to > end) { part = {from: part.from, to: end, level: part.level}; }\n    return part\n  }\n\n  var measureText;\n  // Compute the default text height.\n  function textHeight(display) {\n    if (display.cachedTextHeight != null) { return display.cachedTextHeight }\n    if (measureText == null) {\n      measureText = elt(\"pre\", null, \"CodeMirror-line-like\");\n      // Measure a bunch of lines, for browsers that compute\n      // fractional heights.\n      for (var i = 0; i < 49; ++i) {\n        measureText.appendChild(document.createTextNode(\"x\"));\n        measureText.appendChild(elt(\"br\"));\n      }\n      measureText.appendChild(document.createTextNode(\"x\"));\n    }\n    removeChildrenAndAdd(display.measure, measureText);\n    var height = measureText.offsetHeight / 50;\n    if (height > 3) { display.cachedTextHeight = height; }\n    removeChildren(display.measure);\n    return height || 1\n  }\n\n  // Compute the default character width.\n  function charWidth(display) {\n    if (display.cachedCharWidth != null) { return display.cachedCharWidth }\n    var anchor = elt(\"span\", \"xxxxxxxxxx\");\n    var pre = elt(\"pre\", [anchor], \"CodeMirror-line-like\");\n    removeChildrenAndAdd(display.measure, pre);\n    var rect = anchor.getBoundingClientRect(), width = (rect.right - rect.left) / 10;\n    if (width > 2) { display.cachedCharWidth = width; }\n    return width || 10\n  }\n\n  // Do a bulk-read of the DOM positions and sizes needed to draw the\n  // view, so that we don't interleave reading and writing to the DOM.\n  function getDimensions(cm) {\n    var d = cm.display, left = {}, width = {};\n    var gutterLeft = d.gutters.clientLeft;\n    for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {\n      var id = cm.display.gutterSpecs[i].className;\n      left[id] = n.offsetLeft + n.clientLeft + gutterLeft;\n      width[id] = n.clientWidth;\n    }\n    return {fixedPos: compensateForHScroll(d),\n            gutterTotalWidth: d.gutters.offsetWidth,\n            gutterLeft: left,\n            gutterWidth: width,\n            wrapperWidth: d.wrapper.clientWidth}\n  }\n\n  // Computes display.scroller.scrollLeft + display.gutters.offsetWidth,\n  // but using getBoundingClientRect to get a sub-pixel-accurate\n  // result.\n  function compensateForHScroll(display) {\n    return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left\n  }\n\n  // Returns a function that estimates the height of a line, to use as\n  // first approximation until the line becomes visible (and is thus\n  // properly measurable).\n  function estimateHeight(cm) {\n    var th = textHeight(cm.display), wrapping = cm.options.lineWrapping;\n    var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);\n    return function (line) {\n      if (lineIsHidden(cm.doc, line)) { return 0 }\n\n      var widgetsHeight = 0;\n      if (line.widgets) { for (var i = 0; i < line.widgets.length; i++) {\n        if (line.widgets[i].height) { widgetsHeight += line.widgets[i].height; }\n      } }\n\n      if (wrapping)\n        { return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th }\n      else\n        { return widgetsHeight + th }\n    }\n  }\n\n  function estimateLineHeights(cm) {\n    var doc = cm.doc, est = estimateHeight(cm);\n    doc.iter(function (line) {\n      var estHeight = est(line);\n      if (estHeight != line.height) { updateLineHeight(line, estHeight); }\n    });\n  }\n\n  // Given a mouse event, find the corresponding position. If liberal\n  // is false, it checks whether a gutter or scrollbar was clicked,\n  // and returns null if it was. forRect is used by rectangular\n  // selections, and tries to estimate a character position even for\n  // coordinates beyond the right of the text.\n  function posFromMouse(cm, e, liberal, forRect) {\n    var display = cm.display;\n    if (!liberal && e_target(e).getAttribute(\"cm-not-content\") == \"true\") { return null }\n\n    var x, y, space = display.lineSpace.getBoundingClientRect();\n    // Fails unpredictably on IE[67] when mouse is dragged around quickly.\n    try { x = e.clientX - space.left; y = e.clientY - space.top; }\n    catch (e) { return null }\n    var coords = coordsChar(cm, x, y), line;\n    if (forRect && coords.xRel == 1 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\n      var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;\n      coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));\n    }\n    return coords\n  }\n\n  // Find the view element corresponding to a given line. Return null\n  // when the line isn't visible.\n  function findViewIndex(cm, n) {\n    if (n >= cm.display.viewTo) { return null }\n    n -= cm.display.viewFrom;\n    if (n < 0) { return null }\n    var view = cm.display.view;\n    for (var i = 0; i < view.length; i++) {\n      n -= view[i].size;\n      if (n < 0) { return i }\n    }\n  }\n\n  // Updates the display.view data structure for a given change to the\n  // document. From and to are in pre-change coordinates. Lendiff is\n  // the amount of lines added or subtracted by the change. This is\n  // used for changes that span multiple lines, or change the way\n  // lines are divided into visual lines. regLineChange (below)\n  // registers single-line changes.\n  function regChange(cm, from, to, lendiff) {\n    if (from == null) { from = cm.doc.first; }\n    if (to == null) { to = cm.doc.first + cm.doc.size; }\n    if (!lendiff) { lendiff = 0; }\n\n    var display = cm.display;\n    if (lendiff && to < display.viewTo &&\n        (display.updateLineNumbers == null || display.updateLineNumbers > from))\n      { display.updateLineNumbers = from; }\n\n    cm.curOp.viewChanged = true;\n\n    if (from >= display.viewTo) { // Change after\n      if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo)\n        { resetView(cm); }\n    } else if (to <= display.viewFrom) { // Change before\n      if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\n        resetView(cm);\n      } else {\n        display.viewFrom += lendiff;\n        display.viewTo += lendiff;\n      }\n    } else if (from <= display.viewFrom && to >= display.viewTo) { // Full overlap\n      resetView(cm);\n    } else if (from <= display.viewFrom) { // Top overlap\n      var cut = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cut) {\n        display.view = display.view.slice(cut.index);\n        display.viewFrom = cut.lineN;\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    } else if (to >= display.viewTo) { // Bottom overlap\n      var cut$1 = viewCuttingPoint(cm, from, from, -1);\n      if (cut$1) {\n        display.view = display.view.slice(0, cut$1.index);\n        display.viewTo = cut$1.lineN;\n      } else {\n        resetView(cm);\n      }\n    } else { // Gap in the middle\n      var cutTop = viewCuttingPoint(cm, from, from, -1);\n      var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cutTop && cutBot) {\n        display.view = display.view.slice(0, cutTop.index)\n          .concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN))\n          .concat(display.view.slice(cutBot.index));\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    }\n\n    var ext = display.externalMeasured;\n    if (ext) {\n      if (to < ext.lineN)\n        { ext.lineN += lendiff; }\n      else if (from < ext.lineN + ext.size)\n        { display.externalMeasured = null; }\n    }\n  }\n\n  // Register a change to a single line. Type must be one of \"text\",\n  // \"gutter\", \"class\", \"widget\"\n  function regLineChange(cm, line, type) {\n    cm.curOp.viewChanged = true;\n    var display = cm.display, ext = cm.display.externalMeasured;\n    if (ext && line >= ext.lineN && line < ext.lineN + ext.size)\n      { display.externalMeasured = null; }\n\n    if (line < display.viewFrom || line >= display.viewTo) { return }\n    var lineView = display.view[findViewIndex(cm, line)];\n    if (lineView.node == null) { return }\n    var arr = lineView.changes || (lineView.changes = []);\n    if (indexOf(arr, type) == -1) { arr.push(type); }\n  }\n\n  // Clear the view.\n  function resetView(cm) {\n    cm.display.viewFrom = cm.display.viewTo = cm.doc.first;\n    cm.display.view = [];\n    cm.display.viewOffset = 0;\n  }\n\n  function viewCuttingPoint(cm, oldN, newN, dir) {\n    var index = findViewIndex(cm, oldN), diff, view = cm.display.view;\n    if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size)\n      { return {index: index, lineN: newN} }\n    var n = cm.display.viewFrom;\n    for (var i = 0; i < index; i++)\n      { n += view[i].size; }\n    if (n != oldN) {\n      if (dir > 0) {\n        if (index == view.length - 1) { return null }\n        diff = (n + view[index].size) - oldN;\n        index++;\n      } else {\n        diff = n - oldN;\n      }\n      oldN += diff; newN += diff;\n    }\n    while (visualLineNo(cm.doc, newN) != newN) {\n      if (index == (dir < 0 ? 0 : view.length - 1)) { return null }\n      newN += dir * view[index - (dir < 0 ? 1 : 0)].size;\n      index += dir;\n    }\n    return {index: index, lineN: newN}\n  }\n\n  // Force the view to cover a given range, adding empty view element\n  // or clipping off existing ones as needed.\n  function adjustView(cm, from, to) {\n    var display = cm.display, view = display.view;\n    if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\n      display.view = buildViewArray(cm, from, to);\n      display.viewFrom = from;\n    } else {\n      if (display.viewFrom > from)\n        { display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view); }\n      else if (display.viewFrom < from)\n        { display.view = display.view.slice(findViewIndex(cm, from)); }\n      display.viewFrom = from;\n      if (display.viewTo < to)\n        { display.view = display.view.concat(buildViewArray(cm, display.viewTo, to)); }\n      else if (display.viewTo > to)\n        { display.view = display.view.slice(0, findViewIndex(cm, to)); }\n    }\n    display.viewTo = to;\n  }\n\n  // Count the number of lines in the view whose DOM representation is\n  // out of date (or nonexistent).\n  function countDirtyView(cm) {\n    var view = cm.display.view, dirty = 0;\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (!lineView.hidden && (!lineView.node || lineView.changes)) { ++dirty; }\n    }\n    return dirty\n  }\n\n  function updateSelection(cm) {\n    cm.display.input.showSelection(cm.display.input.prepareSelection());\n  }\n\n  function prepareSelection(cm, primary) {\n    if ( primary === void 0 ) primary = true;\n\n    var doc = cm.doc, result = {};\n    var curFragment = result.cursors = document.createDocumentFragment();\n    var selFragment = result.selection = document.createDocumentFragment();\n\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      if (!primary && i == doc.sel.primIndex) { continue }\n      var range$$1 = doc.sel.ranges[i];\n      if (range$$1.from().line >= cm.display.viewTo || range$$1.to().line < cm.display.viewFrom) { continue }\n      var collapsed = range$$1.empty();\n      if (collapsed || cm.options.showCursorWhenSelecting)\n        { drawSelectionCursor(cm, range$$1.head, curFragment); }\n      if (!collapsed)\n        { drawSelectionRange(cm, range$$1, selFragment); }\n    }\n    return result\n  }\n\n  // Draws a cursor for the given range\n  function drawSelectionCursor(cm, head, output) {\n    var pos = cursorCoords(cm, head, \"div\", null, null, !cm.options.singleCursorHeightPerLine);\n\n    var cursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor\"));\n    cursor.style.left = pos.left + \"px\";\n    cursor.style.top = pos.top + \"px\";\n    cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \"px\";\n\n    if (pos.other) {\n      // Secondary cursor, shown when on a 'jump' in bi-directional text\n      var otherCursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor CodeMirror-secondarycursor\"));\n      otherCursor.style.display = \"\";\n      otherCursor.style.left = pos.other.left + \"px\";\n      otherCursor.style.top = pos.other.top + \"px\";\n      otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \"px\";\n    }\n  }\n\n  function cmpCoords(a, b) { return a.top - b.top || a.left - b.left }\n\n  // Draws the given range as a highlighted selection\n  function drawSelectionRange(cm, range$$1, output) {\n    var display = cm.display, doc = cm.doc;\n    var fragment = document.createDocumentFragment();\n    var padding = paddingH(cm.display), leftSide = padding.left;\n    var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;\n    var docLTR = doc.direction == \"ltr\";\n\n    function add(left, top, width, bottom) {\n      if (top < 0) { top = 0; }\n      top = Math.round(top);\n      bottom = Math.round(bottom);\n      fragment.appendChild(elt(\"div\", null, \"CodeMirror-selected\", (\"position: absolute; left: \" + left + \"px;\\n                             top: \" + top + \"px; width: \" + (width == null ? rightSide - left : width) + \"px;\\n                             height: \" + (bottom - top) + \"px\")));\n    }\n\n    function drawForLine(line, fromArg, toArg) {\n      var lineObj = getLine(doc, line);\n      var lineLen = lineObj.text.length;\n      var start, end;\n      function coords(ch, bias) {\n        return charCoords(cm, Pos(line, ch), \"div\", lineObj, bias)\n      }\n\n      function wrapX(pos, dir, side) {\n        var extent = wrappedLineExtentChar(cm, lineObj, null, pos);\n        var prop = (dir == \"ltr\") == (side == \"after\") ? \"left\" : \"right\";\n        var ch = side == \"after\" ? extent.begin : extent.end - (/\\s/.test(lineObj.text.charAt(extent.end - 1)) ? 2 : 1);\n        return coords(ch, prop)[prop]\n      }\n\n      var order = getOrder(lineObj, doc.direction);\n      iterateBidiSections(order, fromArg || 0, toArg == null ? lineLen : toArg, function (from, to, dir, i) {\n        var ltr = dir == \"ltr\";\n        var fromPos = coords(from, ltr ? \"left\" : \"right\");\n        var toPos = coords(to - 1, ltr ? \"right\" : \"left\");\n\n        var openStart = fromArg == null && from == 0, openEnd = toArg == null && to == lineLen;\n        var first = i == 0, last = !order || i == order.length - 1;\n        if (toPos.top - fromPos.top <= 3) { // Single line\n          var openLeft = (docLTR ? openStart : openEnd) && first;\n          var openRight = (docLTR ? openEnd : openStart) && last;\n          var left = openLeft ? leftSide : (ltr ? fromPos : toPos).left;\n          var right = openRight ? rightSide : (ltr ? toPos : fromPos).right;\n          add(left, fromPos.top, right - left, fromPos.bottom);\n        } else { // Multiple lines\n          var topLeft, topRight, botLeft, botRight;\n          if (ltr) {\n            topLeft = docLTR && openStart && first ? leftSide : fromPos.left;\n            topRight = docLTR ? rightSide : wrapX(from, dir, \"before\");\n            botLeft = docLTR ? leftSide : wrapX(to, dir, \"after\");\n            botRight = docLTR && openEnd && last ? rightSide : toPos.right;\n          } else {\n            topLeft = !docLTR ? leftSide : wrapX(from, dir, \"before\");\n            topRight = !docLTR && openStart && first ? rightSide : fromPos.right;\n            botLeft = !docLTR && openEnd && last ? leftSide : toPos.left;\n            botRight = !docLTR ? rightSide : wrapX(to, dir, \"after\");\n          }\n          add(topLeft, fromPos.top, topRight - topLeft, fromPos.bottom);\n          if (fromPos.bottom < toPos.top) { add(leftSide, fromPos.bottom, null, toPos.top); }\n          add(botLeft, toPos.top, botRight - botLeft, toPos.bottom);\n        }\n\n        if (!start || cmpCoords(fromPos, start) < 0) { start = fromPos; }\n        if (cmpCoords(toPos, start) < 0) { start = toPos; }\n        if (!end || cmpCoords(fromPos, end) < 0) { end = fromPos; }\n        if (cmpCoords(toPos, end) < 0) { end = toPos; }\n      });\n      return {start: start, end: end}\n    }\n\n    var sFrom = range$$1.from(), sTo = range$$1.to();\n    if (sFrom.line == sTo.line) {\n      drawForLine(sFrom.line, sFrom.ch, sTo.ch);\n    } else {\n      var fromLine = getLine(doc, sFrom.line), toLine = getLine(doc, sTo.line);\n      var singleVLine = visualLine(fromLine) == visualLine(toLine);\n      var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;\n      var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;\n      if (singleVLine) {\n        if (leftEnd.top < rightStart.top - 2) {\n          add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);\n          add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);\n        } else {\n          add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);\n        }\n      }\n      if (leftEnd.bottom < rightStart.top)\n        { add(leftSide, leftEnd.bottom, null, rightStart.top); }\n    }\n\n    output.appendChild(fragment);\n  }\n\n  // Cursor-blinking\n  function restartBlink(cm) {\n    if (!cm.state.focused) { return }\n    var display = cm.display;\n    clearInterval(display.blinker);\n    var on = true;\n    display.cursorDiv.style.visibility = \"\";\n    if (cm.options.cursorBlinkRate > 0)\n      { display.blinker = setInterval(function () { return display.cursorDiv.style.visibility = (on = !on) ? \"\" : \"hidden\"; },\n        cm.options.cursorBlinkRate); }\n    else if (cm.options.cursorBlinkRate < 0)\n      { display.cursorDiv.style.visibility = \"hidden\"; }\n  }\n\n  function ensureFocus(cm) {\n    if (!cm.state.focused) { cm.display.input.focus(); onFocus(cm); }\n  }\n\n  function delayBlurEvent(cm) {\n    cm.state.delayingBlurEvent = true;\n    setTimeout(function () { if (cm.state.delayingBlurEvent) {\n      cm.state.delayingBlurEvent = false;\n      onBlur(cm);\n    } }, 100);\n  }\n\n  function onFocus(cm, e) {\n    if (cm.state.delayingBlurEvent) { cm.state.delayingBlurEvent = false; }\n\n    if (cm.options.readOnly == \"nocursor\") { return }\n    if (!cm.state.focused) {\n      signal(cm, \"focus\", cm, e);\n      cm.state.focused = true;\n      addClass(cm.display.wrapper, \"CodeMirror-focused\");\n      // This test prevents this from firing when a context\n      // menu is closed (since the input reset would kill the\n      // select-all detection hack)\n      if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\n        cm.display.input.reset();\n        if (webkit) { setTimeout(function () { return cm.display.input.reset(true); }, 20); } // Issue #1730\n      }\n      cm.display.input.receivedFocus();\n    }\n    restartBlink(cm);\n  }\n  function onBlur(cm, e) {\n    if (cm.state.delayingBlurEvent) { return }\n\n    if (cm.state.focused) {\n      signal(cm, \"blur\", cm, e);\n      cm.state.focused = false;\n      rmClass(cm.display.wrapper, \"CodeMirror-focused\");\n    }\n    clearInterval(cm.display.blinker);\n    setTimeout(function () { if (!cm.state.focused) { cm.display.shift = false; } }, 150);\n  }\n\n  // Read the actual heights of the rendered lines, and update their\n  // stored heights to match.\n  function updateHeightsInViewport(cm) {\n    var display = cm.display;\n    var prevBottom = display.lineDiv.offsetTop;\n    for (var i = 0; i < display.view.length; i++) {\n      var cur = display.view[i], wrapping = cm.options.lineWrapping;\n      var height = (void 0), width = 0;\n      if (cur.hidden) { continue }\n      if (ie && ie_version < 8) {\n        var bot = cur.node.offsetTop + cur.node.offsetHeight;\n        height = bot - prevBottom;\n        prevBottom = bot;\n      } else {\n        var box = cur.node.getBoundingClientRect();\n        height = box.bottom - box.top;\n        // Check that lines don't extend past the right of the current\n        // editor width\n        if (!wrapping && cur.text.firstChild)\n          { width = cur.text.firstChild.getBoundingClientRect().right - box.left - 1; }\n      }\n      var diff = cur.line.height - height;\n      if (diff > .005 || diff < -.005) {\n        updateLineHeight(cur.line, height);\n        updateWidgetHeight(cur.line);\n        if (cur.rest) { for (var j = 0; j < cur.rest.length; j++)\n          { updateWidgetHeight(cur.rest[j]); } }\n      }\n      if (width > cm.display.sizerWidth) {\n        var chWidth = Math.ceil(width / charWidth(cm.display));\n        if (chWidth > cm.display.maxLineLength) {\n          cm.display.maxLineLength = chWidth;\n          cm.display.maxLine = cur.line;\n          cm.display.maxLineChanged = true;\n        }\n      }\n    }\n  }\n\n  // Read and store the height of line widgets associated with the\n  // given line.\n  function updateWidgetHeight(line) {\n    if (line.widgets) { for (var i = 0; i < line.widgets.length; ++i) {\n      var w = line.widgets[i], parent = w.node.parentNode;\n      if (parent) { w.height = parent.offsetHeight; }\n    } }\n  }\n\n  // Compute the lines that are visible in a given viewport (defaults\n  // the the current scroll position). viewport may contain top,\n  // height, and ensure (see op.scrollToPos) properties.\n  function visibleLines(display, doc, viewport) {\n    var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;\n    top = Math.floor(top - paddingTop(display));\n    var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;\n\n    var from = lineAtHeight(doc, top), to = lineAtHeight(doc, bottom);\n    // Ensure is a {from: {line, ch}, to: {line, ch}} object, and\n    // forces those lines into the viewport (if possible).\n    if (viewport && viewport.ensure) {\n      var ensureFrom = viewport.ensure.from.line, ensureTo = viewport.ensure.to.line;\n      if (ensureFrom < from) {\n        from = ensureFrom;\n        to = lineAtHeight(doc, heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);\n      } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\n        from = lineAtHeight(doc, heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);\n        to = ensureTo;\n      }\n    }\n    return {from: from, to: Math.max(to, from + 1)}\n  }\n\n  // SCROLLING THINGS INTO VIEW\n\n  // If an editor sits on the top or bottom of the window, partially\n  // scrolled out of view, this ensures that the cursor is visible.\n  function maybeScrollWindow(cm, rect) {\n    if (signalDOMEvent(cm, \"scrollCursorIntoView\")) { return }\n\n    var display = cm.display, box = display.sizer.getBoundingClientRect(), doScroll = null;\n    if (rect.top + box.top < 0) { doScroll = true; }\n    else if (rect.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) { doScroll = false; }\n    if (doScroll != null && !phantom) {\n      var scrollNode = elt(\"div\", \"\\u200b\", null, (\"position: absolute;\\n                         top: \" + (rect.top - display.viewOffset - paddingTop(cm.display)) + \"px;\\n                         height: \" + (rect.bottom - rect.top + scrollGap(cm) + display.barHeight) + \"px;\\n                         left: \" + (rect.left) + \"px; width: \" + (Math.max(2, rect.right - rect.left)) + \"px;\"));\n      cm.display.lineSpace.appendChild(scrollNode);\n      scrollNode.scrollIntoView(doScroll);\n      cm.display.lineSpace.removeChild(scrollNode);\n    }\n  }\n\n  // Scroll a given position into view (immediately), verifying that\n  // it actually became visible (as line heights are accurately\n  // measured, the position of something may 'drift' during drawing).\n  function scrollPosIntoView(cm, pos, end, margin) {\n    if (margin == null) { margin = 0; }\n    var rect;\n    if (!cm.options.lineWrapping && pos == end) {\n      // Set pos and end to the cursor positions around the character pos sticks to\n      // If pos.sticky == \"before\", that is around pos.ch - 1, otherwise around pos.ch\n      // If pos == Pos(_, 0, \"before\"), pos and end are unchanged\n      pos = pos.ch ? Pos(pos.line, pos.sticky == \"before\" ? pos.ch - 1 : pos.ch, \"after\") : pos;\n      end = pos.sticky == \"before\" ? Pos(pos.line, pos.ch + 1, \"before\") : pos;\n    }\n    for (var limit = 0; limit < 5; limit++) {\n      var changed = false;\n      var coords = cursorCoords(cm, pos);\n      var endCoords = !end || end == pos ? coords : cursorCoords(cm, end);\n      rect = {left: Math.min(coords.left, endCoords.left),\n              top: Math.min(coords.top, endCoords.top) - margin,\n              right: Math.max(coords.left, endCoords.left),\n              bottom: Math.max(coords.bottom, endCoords.bottom) + margin};\n      var scrollPos = calculateScrollPos(cm, rect);\n      var startTop = cm.doc.scrollTop, startLeft = cm.doc.scrollLeft;\n      if (scrollPos.scrollTop != null) {\n        updateScrollTop(cm, scrollPos.scrollTop);\n        if (Math.abs(cm.doc.scrollTop - startTop) > 1) { changed = true; }\n      }\n      if (scrollPos.scrollLeft != null) {\n        setScrollLeft(cm, scrollPos.scrollLeft);\n        if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) { changed = true; }\n      }\n      if (!changed) { break }\n    }\n    return rect\n  }\n\n  // Scroll a given set of coordinates into view (immediately).\n  function scrollIntoView(cm, rect) {\n    var scrollPos = calculateScrollPos(cm, rect);\n    if (scrollPos.scrollTop != null) { updateScrollTop(cm, scrollPos.scrollTop); }\n    if (scrollPos.scrollLeft != null) { setScrollLeft(cm, scrollPos.scrollLeft); }\n  }\n\n  // Calculate a new scroll position needed to scroll the given\n  // rectangle into view. Returns an object with scrollTop and\n  // scrollLeft properties. When these are undefined, the\n  // vertical/horizontal position does not need to be adjusted.\n  function calculateScrollPos(cm, rect) {\n    var display = cm.display, snapMargin = textHeight(cm.display);\n    if (rect.top < 0) { rect.top = 0; }\n    var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;\n    var screen = displayHeight(cm), result = {};\n    if (rect.bottom - rect.top > screen) { rect.bottom = rect.top + screen; }\n    var docBottom = cm.doc.height + paddingVert(display);\n    var atTop = rect.top < snapMargin, atBottom = rect.bottom > docBottom - snapMargin;\n    if (rect.top < screentop) {\n      result.scrollTop = atTop ? 0 : rect.top;\n    } else if (rect.bottom > screentop + screen) {\n      var newTop = Math.min(rect.top, (atBottom ? docBottom : rect.bottom) - screen);\n      if (newTop != screentop) { result.scrollTop = newTop; }\n    }\n\n    var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft;\n    var screenw = displayWidth(cm) - (cm.options.fixedGutter ? display.gutters.offsetWidth : 0);\n    var tooWide = rect.right - rect.left > screenw;\n    if (tooWide) { rect.right = rect.left + screenw; }\n    if (rect.left < 10)\n      { result.scrollLeft = 0; }\n    else if (rect.left < screenleft)\n      { result.scrollLeft = Math.max(0, rect.left - (tooWide ? 0 : 10)); }\n    else if (rect.right > screenw + screenleft - 3)\n      { result.scrollLeft = rect.right + (tooWide ? 0 : 10) - screenw; }\n    return result\n  }\n\n  // Store a relative adjustment to the scroll position in the current\n  // operation (to be applied when the operation finishes).\n  function addToScrollTop(cm, top) {\n    if (top == null) { return }\n    resolveScrollToPos(cm);\n    cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;\n  }\n\n  // Make sure that at the end of the operation the current cursor is\n  // shown.\n  function ensureCursorVisible(cm) {\n    resolveScrollToPos(cm);\n    var cur = cm.getCursor();\n    cm.curOp.scrollToPos = {from: cur, to: cur, margin: cm.options.cursorScrollMargin};\n  }\n\n  function scrollToCoords(cm, x, y) {\n    if (x != null || y != null) { resolveScrollToPos(cm); }\n    if (x != null) { cm.curOp.scrollLeft = x; }\n    if (y != null) { cm.curOp.scrollTop = y; }\n  }\n\n  function scrollToRange(cm, range$$1) {\n    resolveScrollToPos(cm);\n    cm.curOp.scrollToPos = range$$1;\n  }\n\n  // When an operation has its scrollToPos property set, and another\n  // scroll action is applied before the end of the operation, this\n  // 'simulates' scrolling that position into view in a cheap way, so\n  // that the effect of intermediate scroll commands is not ignored.\n  function resolveScrollToPos(cm) {\n    var range$$1 = cm.curOp.scrollToPos;\n    if (range$$1) {\n      cm.curOp.scrollToPos = null;\n      var from = estimateCoords(cm, range$$1.from), to = estimateCoords(cm, range$$1.to);\n      scrollToCoordsRange(cm, from, to, range$$1.margin);\n    }\n  }\n\n  function scrollToCoordsRange(cm, from, to, margin) {\n    var sPos = calculateScrollPos(cm, {\n      left: Math.min(from.left, to.left),\n      top: Math.min(from.top, to.top) - margin,\n      right: Math.max(from.right, to.right),\n      bottom: Math.max(from.bottom, to.bottom) + margin\n    });\n    scrollToCoords(cm, sPos.scrollLeft, sPos.scrollTop);\n  }\n\n  // Sync the scrollable area and scrollbars, ensure the viewport\n  // covers the visible area.\n  function updateScrollTop(cm, val) {\n    if (Math.abs(cm.doc.scrollTop - val) < 2) { return }\n    if (!gecko) { updateDisplaySimple(cm, {top: val}); }\n    setScrollTop(cm, val, true);\n    if (gecko) { updateDisplaySimple(cm); }\n    startWorker(cm, 100);\n  }\n\n  function setScrollTop(cm, val, forceScroll) {\n    val = Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight, val);\n    if (cm.display.scroller.scrollTop == val && !forceScroll) { return }\n    cm.doc.scrollTop = val;\n    cm.display.scrollbars.setScrollTop(val);\n    if (cm.display.scroller.scrollTop != val) { cm.display.scroller.scrollTop = val; }\n  }\n\n  // Sync scroller and scrollbar, ensure the gutter elements are\n  // aligned.\n  function setScrollLeft(cm, val, isScroller, forceScroll) {\n    val = Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth);\n    if ((isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) && !forceScroll) { return }\n    cm.doc.scrollLeft = val;\n    alignHorizontally(cm);\n    if (cm.display.scroller.scrollLeft != val) { cm.display.scroller.scrollLeft = val; }\n    cm.display.scrollbars.setScrollLeft(val);\n  }\n\n  // SCROLLBARS\n\n  // Prepare DOM reads needed to update the scrollbars. Done in one\n  // shot to minimize update/measure roundtrips.\n  function measureForScrollbars(cm) {\n    var d = cm.display, gutterW = d.gutters.offsetWidth;\n    var docH = Math.round(cm.doc.height + paddingVert(cm.display));\n    return {\n      clientHeight: d.scroller.clientHeight,\n      viewHeight: d.wrapper.clientHeight,\n      scrollWidth: d.scroller.scrollWidth, clientWidth: d.scroller.clientWidth,\n      viewWidth: d.wrapper.clientWidth,\n      barLeft: cm.options.fixedGutter ? gutterW : 0,\n      docHeight: docH,\n      scrollHeight: docH + scrollGap(cm) + d.barHeight,\n      nativeBarWidth: d.nativeBarWidth,\n      gutterWidth: gutterW\n    }\n  }\n\n  var NativeScrollbars = function(place, scroll, cm) {\n    this.cm = cm;\n    var vert = this.vert = elt(\"div\", [elt(\"div\", null, null, \"min-width: 1px\")], \"CodeMirror-vscrollbar\");\n    var horiz = this.horiz = elt(\"div\", [elt(\"div\", null, null, \"height: 100%; min-height: 1px\")], \"CodeMirror-hscrollbar\");\n    vert.tabIndex = horiz.tabIndex = -1;\n    place(vert); place(horiz);\n\n    on(vert, \"scroll\", function () {\n      if (vert.clientHeight) { scroll(vert.scrollTop, \"vertical\"); }\n    });\n    on(horiz, \"scroll\", function () {\n      if (horiz.clientWidth) { scroll(horiz.scrollLeft, \"horizontal\"); }\n    });\n\n    this.checkedZeroWidth = false;\n    // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).\n    if (ie && ie_version < 8) { this.horiz.style.minHeight = this.vert.style.minWidth = \"18px\"; }\n  };\n\n  NativeScrollbars.prototype.update = function (measure) {\n    var needsH = measure.scrollWidth > measure.clientWidth + 1;\n    var needsV = measure.scrollHeight > measure.clientHeight + 1;\n    var sWidth = measure.nativeBarWidth;\n\n    if (needsV) {\n      this.vert.style.display = \"block\";\n      this.vert.style.bottom = needsH ? sWidth + \"px\" : \"0\";\n      var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);\n      // A bug in IE8 can cause this value to be negative, so guard it.\n      this.vert.firstChild.style.height =\n        Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \"px\";\n    } else {\n      this.vert.style.display = \"\";\n      this.vert.firstChild.style.height = \"0\";\n    }\n\n    if (needsH) {\n      this.horiz.style.display = \"block\";\n      this.horiz.style.right = needsV ? sWidth + \"px\" : \"0\";\n      this.horiz.style.left = measure.barLeft + \"px\";\n      var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);\n      this.horiz.firstChild.style.width =\n        Math.max(0, measure.scrollWidth - measure.clientWidth + totalWidth) + \"px\";\n    } else {\n      this.horiz.style.display = \"\";\n      this.horiz.firstChild.style.width = \"0\";\n    }\n\n    if (!this.checkedZeroWidth && measure.clientHeight > 0) {\n      if (sWidth == 0) { this.zeroWidthHack(); }\n      this.checkedZeroWidth = true;\n    }\n\n    return {right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0}\n  };\n\n  NativeScrollbars.prototype.setScrollLeft = function (pos) {\n    if (this.horiz.scrollLeft != pos) { this.horiz.scrollLeft = pos; }\n    if (this.disableHoriz) { this.enableZeroWidthBar(this.horiz, this.disableHoriz, \"horiz\"); }\n  };\n\n  NativeScrollbars.prototype.setScrollTop = function (pos) {\n    if (this.vert.scrollTop != pos) { this.vert.scrollTop = pos; }\n    if (this.disableVert) { this.enableZeroWidthBar(this.vert, this.disableVert, \"vert\"); }\n  };\n\n  NativeScrollbars.prototype.zeroWidthHack = function () {\n    var w = mac && !mac_geMountainLion ? \"12px\" : \"18px\";\n    this.horiz.style.height = this.vert.style.width = w;\n    this.horiz.style.pointerEvents = this.vert.style.pointerEvents = \"none\";\n    this.disableHoriz = new Delayed;\n    this.disableVert = new Delayed;\n  };\n\n  NativeScrollbars.prototype.enableZeroWidthBar = function (bar, delay, type) {\n    bar.style.pointerEvents = \"auto\";\n    function maybeDisable() {\n      // To find out whether the scrollbar is still visible, we\n      // check whether the element under the pixel in the bottom\n      // right corner of the scrollbar box is the scrollbar box\n      // itself (when the bar is still visible) or its filler child\n      // (when the bar is hidden). If it is still visible, we keep\n      // it enabled, if it's hidden, we disable pointer events.\n      var box = bar.getBoundingClientRect();\n      var elt$$1 = type == \"vert\" ? document.elementFromPoint(box.right - 1, (box.top + box.bottom) / 2)\n          : document.elementFromPoint((box.right + box.left) / 2, box.bottom - 1);\n      if (elt$$1 != bar) { bar.style.pointerEvents = \"none\"; }\n      else { delay.set(1000, maybeDisable); }\n    }\n    delay.set(1000, maybeDisable);\n  };\n\n  NativeScrollbars.prototype.clear = function () {\n    var parent = this.horiz.parentNode;\n    parent.removeChild(this.horiz);\n    parent.removeChild(this.vert);\n  };\n\n  var NullScrollbars = function () {};\n\n  NullScrollbars.prototype.update = function () { return {bottom: 0, right: 0} };\n  NullScrollbars.prototype.setScrollLeft = function () {};\n  NullScrollbars.prototype.setScrollTop = function () {};\n  NullScrollbars.prototype.clear = function () {};\n\n  function updateScrollbars(cm, measure) {\n    if (!measure) { measure = measureForScrollbars(cm); }\n    var startWidth = cm.display.barWidth, startHeight = cm.display.barHeight;\n    updateScrollbarsInner(cm, measure);\n    for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\n      if (startWidth != cm.display.barWidth && cm.options.lineWrapping)\n        { updateHeightsInViewport(cm); }\n      updateScrollbarsInner(cm, measureForScrollbars(cm));\n      startWidth = cm.display.barWidth; startHeight = cm.display.barHeight;\n    }\n  }\n\n  // Re-synchronize the fake scrollbars with the actual size of the\n  // content.\n  function updateScrollbarsInner(cm, measure) {\n    var d = cm.display;\n    var sizes = d.scrollbars.update(measure);\n\n    d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \"px\";\n    d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \"px\";\n    d.heightForcer.style.borderBottom = sizes.bottom + \"px solid transparent\";\n\n    if (sizes.right && sizes.bottom) {\n      d.scrollbarFiller.style.display = \"block\";\n      d.scrollbarFiller.style.height = sizes.bottom + \"px\";\n      d.scrollbarFiller.style.width = sizes.right + \"px\";\n    } else { d.scrollbarFiller.style.display = \"\"; }\n    if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\n      d.gutterFiller.style.display = \"block\";\n      d.gutterFiller.style.height = sizes.bottom + \"px\";\n      d.gutterFiller.style.width = measure.gutterWidth + \"px\";\n    } else { d.gutterFiller.style.display = \"\"; }\n  }\n\n  var scrollbarModel = {\"native\": NativeScrollbars, \"null\": NullScrollbars};\n\n  function initScrollbars(cm) {\n    if (cm.display.scrollbars) {\n      cm.display.scrollbars.clear();\n      if (cm.display.scrollbars.addClass)\n        { rmClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\n    }\n\n    cm.display.scrollbars = new scrollbarModel[cm.options.scrollbarStyle](function (node) {\n      cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);\n      // Prevent clicks in the scrollbars from killing focus\n      on(node, \"mousedown\", function () {\n        if (cm.state.focused) { setTimeout(function () { return cm.display.input.focus(); }, 0); }\n      });\n      node.setAttribute(\"cm-not-content\", \"true\");\n    }, function (pos, axis) {\n      if (axis == \"horizontal\") { setScrollLeft(cm, pos); }\n      else { updateScrollTop(cm, pos); }\n    }, cm);\n    if (cm.display.scrollbars.addClass)\n      { addClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\n  }\n\n  // Operations are used to wrap a series of changes to the editor\n  // state in such a way that each change won't have to update the\n  // cursor and display (which would be awkward, slow, and\n  // error-prone). Instead, display updates are batched and then all\n  // combined and executed at once.\n\n  var nextOpId = 0;\n  // Start a new operation.\n  function startOperation(cm) {\n    cm.curOp = {\n      cm: cm,\n      viewChanged: false,      // Flag that indicates that lines might need to be redrawn\n      startHeight: cm.doc.height, // Used to detect need to update scrollbar\n      forceUpdate: false,      // Used to force a redraw\n      updateInput: 0,       // Whether to reset the input textarea\n      typing: false,           // Whether this reset should be careful to leave existing text (for compositing)\n      changeObjs: null,        // Accumulated changes, for firing change events\n      cursorActivityHandlers: null, // Set of handlers to fire cursorActivity on\n      cursorActivityCalled: 0, // Tracks which cursorActivity handlers have been called already\n      selectionChanged: false, // Whether the selection needs to be redrawn\n      updateMaxLine: false,    // Set when the widest line needs to be determined anew\n      scrollLeft: null, scrollTop: null, // Intermediate scroll position, not pushed to DOM yet\n      scrollToPos: null,       // Used to scroll to a specific position\n      focus: false,\n      id: ++nextOpId           // Unique ID\n    };\n    pushOperation(cm.curOp);\n  }\n\n  // Finish an operation, updating the display and signalling delayed events\n  function endOperation(cm) {\n    var op = cm.curOp;\n    if (op) { finishOperation(op, function (group) {\n      for (var i = 0; i < group.ops.length; i++)\n        { group.ops[i].cm.curOp = null; }\n      endOperations(group);\n    }); }\n  }\n\n  // The DOM updates done when an operation finishes are batched so\n  // that the minimum number of relayouts are required.\n  function endOperations(group) {\n    var ops = group.ops;\n    for (var i = 0; i < ops.length; i++) // Read DOM\n      { endOperation_R1(ops[i]); }\n    for (var i$1 = 0; i$1 < ops.length; i$1++) // Write DOM (maybe)\n      { endOperation_W1(ops[i$1]); }\n    for (var i$2 = 0; i$2 < ops.length; i$2++) // Read DOM\n      { endOperation_R2(ops[i$2]); }\n    for (var i$3 = 0; i$3 < ops.length; i$3++) // Write DOM (maybe)\n      { endOperation_W2(ops[i$3]); }\n    for (var i$4 = 0; i$4 < ops.length; i$4++) // Read DOM\n      { endOperation_finish(ops[i$4]); }\n  }\n\n  function endOperation_R1(op) {\n    var cm = op.cm, display = cm.display;\n    maybeClipScrollbars(cm);\n    if (op.updateMaxLine) { findMaxLine(cm); }\n\n    op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null ||\n      op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom ||\n                         op.scrollToPos.to.line >= display.viewTo) ||\n      display.maxLineChanged && cm.options.lineWrapping;\n    op.update = op.mustUpdate &&\n      new DisplayUpdate(cm, op.mustUpdate && {top: op.scrollTop, ensure: op.scrollToPos}, op.forceUpdate);\n  }\n\n  function endOperation_W1(op) {\n    op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);\n  }\n\n  function endOperation_R2(op) {\n    var cm = op.cm, display = cm.display;\n    if (op.updatedDisplay) { updateHeightsInViewport(cm); }\n\n    op.barMeasure = measureForScrollbars(cm);\n\n    // If the max line changed since it was last measured, measure it,\n    // and ensure the document's width matches it.\n    // updateDisplay_W2 will use these properties to do the actual resizing\n    if (display.maxLineChanged && !cm.options.lineWrapping) {\n      op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;\n      cm.display.sizerWidth = op.adjustWidthTo;\n      op.barMeasure.scrollWidth =\n        Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);\n      op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));\n    }\n\n    if (op.updatedDisplay || op.selectionChanged)\n      { op.preparedSelection = display.input.prepareSelection(); }\n  }\n\n  function endOperation_W2(op) {\n    var cm = op.cm;\n\n    if (op.adjustWidthTo != null) {\n      cm.display.sizer.style.minWidth = op.adjustWidthTo + \"px\";\n      if (op.maxScrollLeft < cm.doc.scrollLeft)\n        { setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true); }\n      cm.display.maxLineChanged = false;\n    }\n\n    var takeFocus = op.focus && op.focus == activeElt();\n    if (op.preparedSelection)\n      { cm.display.input.showSelection(op.preparedSelection, takeFocus); }\n    if (op.updatedDisplay || op.startHeight != cm.doc.height)\n      { updateScrollbars(cm, op.barMeasure); }\n    if (op.updatedDisplay)\n      { setDocumentHeight(cm, op.barMeasure); }\n\n    if (op.selectionChanged) { restartBlink(cm); }\n\n    if (cm.state.focused && op.updateInput)\n      { cm.display.input.reset(op.typing); }\n    if (takeFocus) { ensureFocus(op.cm); }\n  }\n\n  function endOperation_finish(op) {\n    var cm = op.cm, display = cm.display, doc = cm.doc;\n\n    if (op.updatedDisplay) { postUpdateDisplay(cm, op.update); }\n\n    // Abort mouse wheel delta measurement, when scrolling explicitly\n    if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos))\n      { display.wheelStartX = display.wheelStartY = null; }\n\n    // Propagate the scroll position to the actual DOM scroller\n    if (op.scrollTop != null) { setScrollTop(cm, op.scrollTop, op.forceScroll); }\n\n    if (op.scrollLeft != null) { setScrollLeft(cm, op.scrollLeft, true, true); }\n    // If we need to scroll a specific position into view, do so.\n    if (op.scrollToPos) {\n      var rect = scrollPosIntoView(cm, clipPos(doc, op.scrollToPos.from),\n                                   clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);\n      maybeScrollWindow(cm, rect);\n    }\n\n    // Fire events for markers that are hidden/unidden by editing or\n    // undoing\n    var hidden = op.maybeHiddenMarkers, unhidden = op.maybeUnhiddenMarkers;\n    if (hidden) { for (var i = 0; i < hidden.length; ++i)\n      { if (!hidden[i].lines.length) { signal(hidden[i], \"hide\"); } } }\n    if (unhidden) { for (var i$1 = 0; i$1 < unhidden.length; ++i$1)\n      { if (unhidden[i$1].lines.length) { signal(unhidden[i$1], \"unhide\"); } } }\n\n    if (display.wrapper.offsetHeight)\n      { doc.scrollTop = cm.display.scroller.scrollTop; }\n\n    // Fire change events, and delayed event handlers\n    if (op.changeObjs)\n      { signal(cm, \"changes\", cm, op.changeObjs); }\n    if (op.update)\n      { op.update.finish(); }\n  }\n\n  // Run the given function in an operation\n  function runInOp(cm, f) {\n    if (cm.curOp) { return f() }\n    startOperation(cm);\n    try { return f() }\n    finally { endOperation(cm); }\n  }\n  // Wraps a function in an operation. Returns the wrapped function.\n  function operation(cm, f) {\n    return function() {\n      if (cm.curOp) { return f.apply(cm, arguments) }\n      startOperation(cm);\n      try { return f.apply(cm, arguments) }\n      finally { endOperation(cm); }\n    }\n  }\n  // Used to add methods to editor and doc instances, wrapping them in\n  // operations.\n  function methodOp(f) {\n    return function() {\n      if (this.curOp) { return f.apply(this, arguments) }\n      startOperation(this);\n      try { return f.apply(this, arguments) }\n      finally { endOperation(this); }\n    }\n  }\n  function docMethodOp(f) {\n    return function() {\n      var cm = this.cm;\n      if (!cm || cm.curOp) { return f.apply(this, arguments) }\n      startOperation(cm);\n      try { return f.apply(this, arguments) }\n      finally { endOperation(cm); }\n    }\n  }\n\n  // HIGHLIGHT WORKER\n\n  function startWorker(cm, time) {\n    if (cm.doc.highlightFrontier < cm.display.viewTo)\n      { cm.state.highlight.set(time, bind(highlightWorker, cm)); }\n  }\n\n  function highlightWorker(cm) {\n    var doc = cm.doc;\n    if (doc.highlightFrontier >= cm.display.viewTo) { return }\n    var end = +new Date + cm.options.workTime;\n    var context = getContextBefore(cm, doc.highlightFrontier);\n    var changedLines = [];\n\n    doc.iter(context.line, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function (line) {\n      if (context.line >= cm.display.viewFrom) { // Visible\n        var oldStyles = line.styles;\n        var resetState = line.text.length > cm.options.maxHighlightLength ? copyState(doc.mode, context.state) : null;\n        var highlighted = highlightLine(cm, line, context, true);\n        if (resetState) { context.state = resetState; }\n        line.styles = highlighted.styles;\n        var oldCls = line.styleClasses, newCls = highlighted.classes;\n        if (newCls) { line.styleClasses = newCls; }\n        else if (oldCls) { line.styleClasses = null; }\n        var ischange = !oldStyles || oldStyles.length != line.styles.length ||\n          oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);\n        for (var i = 0; !ischange && i < oldStyles.length; ++i) { ischange = oldStyles[i] != line.styles[i]; }\n        if (ischange) { changedLines.push(context.line); }\n        line.stateAfter = context.save();\n        context.nextLine();\n      } else {\n        if (line.text.length <= cm.options.maxHighlightLength)\n          { processLine(cm, line.text, context); }\n        line.stateAfter = context.line % 5 == 0 ? context.save() : null;\n        context.nextLine();\n      }\n      if (+new Date > end) {\n        startWorker(cm, cm.options.workDelay);\n        return true\n      }\n    });\n    doc.highlightFrontier = context.line;\n    doc.modeFrontier = Math.max(doc.modeFrontier, context.line);\n    if (changedLines.length) { runInOp(cm, function () {\n      for (var i = 0; i < changedLines.length; i++)\n        { regLineChange(cm, changedLines[i], \"text\"); }\n    }); }\n  }\n\n  // DISPLAY DRAWING\n\n  var DisplayUpdate = function(cm, viewport, force) {\n    var display = cm.display;\n\n    this.viewport = viewport;\n    // Store some values that we'll need later (but don't want to force a relayout for)\n    this.visible = visibleLines(display, cm.doc, viewport);\n    this.editorIsHidden = !display.wrapper.offsetWidth;\n    this.wrapperHeight = display.wrapper.clientHeight;\n    this.wrapperWidth = display.wrapper.clientWidth;\n    this.oldDisplayWidth = displayWidth(cm);\n    this.force = force;\n    this.dims = getDimensions(cm);\n    this.events = [];\n  };\n\n  DisplayUpdate.prototype.signal = function (emitter, type) {\n    if (hasHandler(emitter, type))\n      { this.events.push(arguments); }\n  };\n  DisplayUpdate.prototype.finish = function () {\n      var this$1 = this;\n\n    for (var i = 0; i < this.events.length; i++)\n      { signal.apply(null, this$1.events[i]); }\n  };\n\n  function maybeClipScrollbars(cm) {\n    var display = cm.display;\n    if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\n      display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;\n      display.heightForcer.style.height = scrollGap(cm) + \"px\";\n      display.sizer.style.marginBottom = -display.nativeBarWidth + \"px\";\n      display.sizer.style.borderRightWidth = scrollGap(cm) + \"px\";\n      display.scrollbarsClipped = true;\n    }\n  }\n\n  function selectionSnapshot(cm) {\n    if (cm.hasFocus()) { return null }\n    var active = activeElt();\n    if (!active || !contains(cm.display.lineDiv, active)) { return null }\n    var result = {activeElt: active};\n    if (window.getSelection) {\n      var sel = window.getSelection();\n      if (sel.anchorNode && sel.extend && contains(cm.display.lineDiv, sel.anchorNode)) {\n        result.anchorNode = sel.anchorNode;\n        result.anchorOffset = sel.anchorOffset;\n        result.focusNode = sel.focusNode;\n        result.focusOffset = sel.focusOffset;\n      }\n    }\n    return result\n  }\n\n  function restoreSelection(snapshot) {\n    if (!snapshot || !snapshot.activeElt || snapshot.activeElt == activeElt()) { return }\n    snapshot.activeElt.focus();\n    if (snapshot.anchorNode && contains(document.body, snapshot.anchorNode) && contains(document.body, snapshot.focusNode)) {\n      var sel = window.getSelection(), range$$1 = document.createRange();\n      range$$1.setEnd(snapshot.anchorNode, snapshot.anchorOffset);\n      range$$1.collapse(false);\n      sel.removeAllRanges();\n      sel.addRange(range$$1);\n      sel.extend(snapshot.focusNode, snapshot.focusOffset);\n    }\n  }\n\n  // Does the actual updating of the line display. Bails out\n  // (returning false) when there is nothing to be done and forced is\n  // false.\n  function updateDisplayIfNeeded(cm, update) {\n    var display = cm.display, doc = cm.doc;\n\n    if (update.editorIsHidden) {\n      resetView(cm);\n      return false\n    }\n\n    // Bail out if the visible area is already rendered and nothing changed.\n    if (!update.force &&\n        update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo &&\n        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) &&\n        display.renderedView == display.view && countDirtyView(cm) == 0)\n      { return false }\n\n    if (maybeUpdateLineNumberWidth(cm)) {\n      resetView(cm);\n      update.dims = getDimensions(cm);\n    }\n\n    // Compute a suitable new viewport (from & to)\n    var end = doc.first + doc.size;\n    var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);\n    var to = Math.min(end, update.visible.to + cm.options.viewportMargin);\n    if (display.viewFrom < from && from - display.viewFrom < 20) { from = Math.max(doc.first, display.viewFrom); }\n    if (display.viewTo > to && display.viewTo - to < 20) { to = Math.min(end, display.viewTo); }\n    if (sawCollapsedSpans) {\n      from = visualLineNo(cm.doc, from);\n      to = visualLineEndNo(cm.doc, to);\n    }\n\n    var different = from != display.viewFrom || to != display.viewTo ||\n      display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;\n    adjustView(cm, from, to);\n\n    display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom));\n    // Position the mover div to align with the current scroll position\n    cm.display.mover.style.top = display.viewOffset + \"px\";\n\n    var toUpdate = countDirtyView(cm);\n    if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view &&\n        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo))\n      { return false }\n\n    // For big changes, we hide the enclosing element during the\n    // update, since that speeds up the operations on most browsers.\n    var selSnapshot = selectionSnapshot(cm);\n    if (toUpdate > 4) { display.lineDiv.style.display = \"none\"; }\n    patchDisplay(cm, display.updateLineNumbers, update.dims);\n    if (toUpdate > 4) { display.lineDiv.style.display = \"\"; }\n    display.renderedView = display.view;\n    // There might have been a widget with a focused element that got\n    // hidden or updated, if so re-focus it.\n    restoreSelection(selSnapshot);\n\n    // Prevent selection and cursors from interfering with the scroll\n    // width and height.\n    removeChildren(display.cursorDiv);\n    removeChildren(display.selectionDiv);\n    display.gutters.style.height = display.sizer.style.minHeight = 0;\n\n    if (different) {\n      display.lastWrapHeight = update.wrapperHeight;\n      display.lastWrapWidth = update.wrapperWidth;\n      startWorker(cm, 400);\n    }\n\n    display.updateLineNumbers = null;\n\n    return true\n  }\n\n  function postUpdateDisplay(cm, update) {\n    var viewport = update.viewport;\n\n    for (var first = true;; first = false) {\n      if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\n        // Clip forced viewport to actual scrollable area.\n        if (viewport && viewport.top != null)\n          { viewport = {top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)}; }\n        // Updated line heights might result in the drawn area not\n        // actually covering the viewport. Keep looping until it does.\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\n        if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo)\n          { break }\n      }\n      if (!updateDisplayIfNeeded(cm, update)) { break }\n      updateHeightsInViewport(cm);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.force = false;\n    }\n\n    update.signal(cm, \"update\", cm);\n    if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\n      update.signal(cm, \"viewportChange\", cm, cm.display.viewFrom, cm.display.viewTo);\n      cm.display.reportedViewFrom = cm.display.viewFrom; cm.display.reportedViewTo = cm.display.viewTo;\n    }\n  }\n\n  function updateDisplaySimple(cm, viewport) {\n    var update = new DisplayUpdate(cm, viewport);\n    if (updateDisplayIfNeeded(cm, update)) {\n      updateHeightsInViewport(cm);\n      postUpdateDisplay(cm, update);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.finish();\n    }\n  }\n\n  // Sync the actual display DOM structure with display.view, removing\n  // nodes for lines that are no longer in view, and creating the ones\n  // that are not there yet, and updating the ones that are out of\n  // date.\n  function patchDisplay(cm, updateNumbersFrom, dims) {\n    var display = cm.display, lineNumbers = cm.options.lineNumbers;\n    var container = display.lineDiv, cur = container.firstChild;\n\n    function rm(node) {\n      var next = node.nextSibling;\n      // Works around a throw-scroll bug in OS X Webkit\n      if (webkit && mac && cm.display.currentWheelTarget == node)\n        { node.style.display = \"none\"; }\n      else\n        { node.parentNode.removeChild(node); }\n      return next\n    }\n\n    var view = display.view, lineN = display.viewFrom;\n    // Loop over the elements in the view, syncing cur (the DOM nodes\n    // in display.lineDiv) with the view as we go.\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (lineView.hidden) ; else if (!lineView.node || lineView.node.parentNode != container) { // Not drawn yet\n        var node = buildLineElement(cm, lineView, lineN, dims);\n        container.insertBefore(node, cur);\n      } else { // Already drawn\n        while (cur != lineView.node) { cur = rm(cur); }\n        var updateNumber = lineNumbers && updateNumbersFrom != null &&\n          updateNumbersFrom <= lineN && lineView.lineNumber;\n        if (lineView.changes) {\n          if (indexOf(lineView.changes, \"gutter\") > -1) { updateNumber = false; }\n          updateLineForChanges(cm, lineView, lineN, dims);\n        }\n        if (updateNumber) {\n          removeChildren(lineView.lineNumber);\n          lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));\n        }\n        cur = lineView.node.nextSibling;\n      }\n      lineN += lineView.size;\n    }\n    while (cur) { cur = rm(cur); }\n  }\n\n  function updateGutterSpace(display) {\n    var width = display.gutters.offsetWidth;\n    display.sizer.style.marginLeft = width + \"px\";\n  }\n\n  function setDocumentHeight(cm, measure) {\n    cm.display.sizer.style.minHeight = measure.docHeight + \"px\";\n    cm.display.heightForcer.style.top = measure.docHeight + \"px\";\n    cm.display.gutters.style.height = (measure.docHeight + cm.display.barHeight + scrollGap(cm)) + \"px\";\n  }\n\n  // Re-align line numbers and gutter marks to compensate for\n  // horizontal scrolling.\n  function alignHorizontally(cm) {\n    var display = cm.display, view = display.view;\n    if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) { return }\n    var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;\n    var gutterW = display.gutters.offsetWidth, left = comp + \"px\";\n    for (var i = 0; i < view.length; i++) { if (!view[i].hidden) {\n      if (cm.options.fixedGutter) {\n        if (view[i].gutter)\n          { view[i].gutter.style.left = left; }\n        if (view[i].gutterBackground)\n          { view[i].gutterBackground.style.left = left; }\n      }\n      var align = view[i].alignable;\n      if (align) { for (var j = 0; j < align.length; j++)\n        { align[j].style.left = left; } }\n    } }\n    if (cm.options.fixedGutter)\n      { display.gutters.style.left = (comp + gutterW) + \"px\"; }\n  }\n\n  // Used to ensure that the line number gutter is still the right\n  // size for the current document size. Returns true when an update\n  // is needed.\n  function maybeUpdateLineNumberWidth(cm) {\n    if (!cm.options.lineNumbers) { return false }\n    var doc = cm.doc, last = lineNumberFor(cm.options, doc.first + doc.size - 1), display = cm.display;\n    if (last.length != display.lineNumChars) {\n      var test = display.measure.appendChild(elt(\"div\", [elt(\"div\", last)],\n                                                 \"CodeMirror-linenumber CodeMirror-gutter-elt\"));\n      var innerW = test.firstChild.offsetWidth, padding = test.offsetWidth - innerW;\n      display.lineGutter.style.width = \"\";\n      display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;\n      display.lineNumWidth = display.lineNumInnerWidth + padding;\n      display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;\n      display.lineGutter.style.width = display.lineNumWidth + \"px\";\n      updateGutterSpace(cm.display);\n      return true\n    }\n    return false\n  }\n\n  function getGutters(gutters, lineNumbers) {\n    var result = [], sawLineNumbers = false;\n    for (var i = 0; i < gutters.length; i++) {\n      var name = gutters[i], style = null;\n      if (typeof name != \"string\") { style = name.style; name = name.className; }\n      if (name == \"CodeMirror-linenumbers\") {\n        if (!lineNumbers) { continue }\n        else { sawLineNumbers = true; }\n      }\n      result.push({className: name, style: style});\n    }\n    if (lineNumbers && !sawLineNumbers) { result.push({className: \"CodeMirror-linenumbers\", style: null}); }\n    return result\n  }\n\n  // Rebuild the gutter elements, ensure the margin to the left of the\n  // code matches their width.\n  function renderGutters(display) {\n    var gutters = display.gutters, specs = display.gutterSpecs;\n    removeChildren(gutters);\n    display.lineGutter = null;\n    for (var i = 0; i < specs.length; ++i) {\n      var ref = specs[i];\n      var className = ref.className;\n      var style = ref.style;\n      var gElt = gutters.appendChild(elt(\"div\", null, \"CodeMirror-gutter \" + className));\n      if (style) { gElt.style.cssText = style; }\n      if (className == \"CodeMirror-linenumbers\") {\n        display.lineGutter = gElt;\n        gElt.style.width = (display.lineNumWidth || 1) + \"px\";\n      }\n    }\n    gutters.style.display = specs.length ? \"\" : \"none\";\n    updateGutterSpace(display);\n  }\n\n  function updateGutters(cm) {\n    renderGutters(cm.display);\n    regChange(cm);\n    alignHorizontally(cm);\n  }\n\n  // The display handles the DOM integration, both for input reading\n  // and content drawing. It holds references to DOM nodes and\n  // display-related state.\n\n  function Display(place, doc, input, options) {\n    var d = this;\n    this.input = input;\n\n    // Covers bottom-right square when both scrollbars are present.\n    d.scrollbarFiller = elt(\"div\", null, \"CodeMirror-scrollbar-filler\");\n    d.scrollbarFiller.setAttribute(\"cm-not-content\", \"true\");\n    // Covers bottom of gutter when coverGutterNextToScrollbar is on\n    // and h scrollbar is present.\n    d.gutterFiller = elt(\"div\", null, \"CodeMirror-gutter-filler\");\n    d.gutterFiller.setAttribute(\"cm-not-content\", \"true\");\n    // Will contain the actual code, positioned to cover the viewport.\n    d.lineDiv = eltP(\"div\", null, \"CodeMirror-code\");\n    // Elements are added to these to represent selection and cursors.\n    d.selectionDiv = elt(\"div\", null, null, \"position: relative; z-index: 1\");\n    d.cursorDiv = elt(\"div\", null, \"CodeMirror-cursors\");\n    // A visibility: hidden element used to find the size of things.\n    d.measure = elt(\"div\", null, \"CodeMirror-measure\");\n    // When lines outside of the viewport are measured, they are drawn in this.\n    d.lineMeasure = elt(\"div\", null, \"CodeMirror-measure\");\n    // Wraps everything that needs to exist inside the vertically-padded coordinate system\n    d.lineSpace = eltP(\"div\", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv],\n                      null, \"position: relative; outline: none\");\n    var lines = eltP(\"div\", [d.lineSpace], \"CodeMirror-lines\");\n    // Moved around its parent to cover visible view.\n    d.mover = elt(\"div\", [lines], null, \"position: relative\");\n    // Set to the height of the document, allowing scrolling.\n    d.sizer = elt(\"div\", [d.mover], \"CodeMirror-sizer\");\n    d.sizerWidth = null;\n    // Behavior of elts with overflow: auto and padding is\n    // inconsistent across browsers. This is used to ensure the\n    // scrollable area is big enough.\n    d.heightForcer = elt(\"div\", null, null, \"position: absolute; height: \" + scrollerGap + \"px; width: 1px;\");\n    // Will contain the gutters, if any.\n    d.gutters = elt(\"div\", null, \"CodeMirror-gutters\");\n    d.lineGutter = null;\n    // Actual scrollable element.\n    d.scroller = elt(\"div\", [d.sizer, d.heightForcer, d.gutters], \"CodeMirror-scroll\");\n    d.scroller.setAttribute(\"tabIndex\", \"-1\");\n    // The element in which the editor lives.\n    d.wrapper = elt(\"div\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \"CodeMirror\");\n\n    // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)\n    if (ie && ie_version < 8) { d.gutters.style.zIndex = -1; d.scroller.style.paddingRight = 0; }\n    if (!webkit && !(gecko && mobile)) { d.scroller.draggable = true; }\n\n    if (place) {\n      if (place.appendChild) { place.appendChild(d.wrapper); }\n      else { place(d.wrapper); }\n    }\n\n    // Current rendered range (may be bigger than the view window).\n    d.viewFrom = d.viewTo = doc.first;\n    d.reportedViewFrom = d.reportedViewTo = doc.first;\n    // Information about the rendered lines.\n    d.view = [];\n    d.renderedView = null;\n    // Holds info about a single rendered line when it was rendered\n    // for measurement, while not in view.\n    d.externalMeasured = null;\n    // Empty space (in pixels) above the view\n    d.viewOffset = 0;\n    d.lastWrapHeight = d.lastWrapWidth = 0;\n    d.updateLineNumbers = null;\n\n    d.nativeBarWidth = d.barHeight = d.barWidth = 0;\n    d.scrollbarsClipped = false;\n\n    // Used to only resize the line number gutter when necessary (when\n    // the amount of lines crosses a boundary that makes its width change)\n    d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;\n    // Set to true when a non-horizontal-scrolling line widget is\n    // added. As an optimization, line widget aligning is skipped when\n    // this is false.\n    d.alignWidgets = false;\n\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n\n    // Tracks the maximum line length so that the horizontal scrollbar\n    // can be kept static when scrolling.\n    d.maxLine = null;\n    d.maxLineLength = 0;\n    d.maxLineChanged = false;\n\n    // Used for measuring wheel scrolling granularity\n    d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;\n\n    // True when shift is held down.\n    d.shift = false;\n\n    // Used to track whether anything happened since the context menu\n    // was opened.\n    d.selForContextMenu = null;\n\n    d.activeTouch = null;\n\n    d.gutterSpecs = getGutters(options.gutters, options.lineNumbers);\n    renderGutters(d);\n\n    input.init(d);\n  }\n\n  // Since the delta values reported on mouse wheel events are\n  // unstandardized between browsers and even browser versions, and\n  // generally horribly unpredictable, this code starts by measuring\n  // the scroll effect that the first few mouse wheel events have,\n  // and, from that, detects the way it can convert deltas to pixel\n  // offsets afterwards.\n  //\n  // The reason we want to know the amount a wheel event will scroll\n  // is that it gives us a chance to update the display before the\n  // actual scrolling happens, reducing flickering.\n\n  var wheelSamples = 0, wheelPixelsPerUnit = null;\n  // Fill in a browser-detected starting value on browsers where we\n  // know one. These don't have to be accurate -- the result of them\n  // being wrong would just be a slight flicker on the first wheel\n  // scroll (if it is large enough).\n  if (ie) { wheelPixelsPerUnit = -.53; }\n  else if (gecko) { wheelPixelsPerUnit = 15; }\n  else if (chrome) { wheelPixelsPerUnit = -.7; }\n  else if (safari) { wheelPixelsPerUnit = -1/3; }\n\n  function wheelEventDelta(e) {\n    var dx = e.wheelDeltaX, dy = e.wheelDeltaY;\n    if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) { dx = e.detail; }\n    if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) { dy = e.detail; }\n    else if (dy == null) { dy = e.wheelDelta; }\n    return {x: dx, y: dy}\n  }\n  function wheelEventPixels(e) {\n    var delta = wheelEventDelta(e);\n    delta.x *= wheelPixelsPerUnit;\n    delta.y *= wheelPixelsPerUnit;\n    return delta\n  }\n\n  function onScrollWheel(cm, e) {\n    var delta = wheelEventDelta(e), dx = delta.x, dy = delta.y;\n\n    var display = cm.display, scroll = display.scroller;\n    // Quit if there's nothing to scroll here\n    var canScrollX = scroll.scrollWidth > scroll.clientWidth;\n    var canScrollY = scroll.scrollHeight > scroll.clientHeight;\n    if (!(dx && canScrollX || dy && canScrollY)) { return }\n\n    // Webkit browsers on OS X abort momentum scrolls when the target\n    // of the scroll event is removed from the scrollable element.\n    // This hack (see related code in patchDisplay) makes sure the\n    // element is kept around.\n    if (dy && mac && webkit) {\n      outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {\n        for (var i = 0; i < view.length; i++) {\n          if (view[i].node == cur) {\n            cm.display.currentWheelTarget = cur;\n            break outer\n          }\n        }\n      }\n    }\n\n    // On some browsers, horizontal scrolling will cause redraws to\n    // happen before the gutter has been realigned, causing it to\n    // wriggle around in a most unseemly way. When we have an\n    // estimated pixels/delta value, we just handle horizontal\n    // scrolling entirely here. It'll be slightly off from native, but\n    // better than glitching out.\n    if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {\n      if (dy && canScrollY)\n        { updateScrollTop(cm, Math.max(0, scroll.scrollTop + dy * wheelPixelsPerUnit)); }\n      setScrollLeft(cm, Math.max(0, scroll.scrollLeft + dx * wheelPixelsPerUnit));\n      // Only prevent default scrolling if vertical scrolling is\n      // actually possible. Otherwise, it causes vertical scroll\n      // jitter on OSX trackpads when deltaX is small and deltaY\n      // is large (issue #3579)\n      if (!dy || (dy && canScrollY))\n        { e_preventDefault(e); }\n      display.wheelStartX = null; // Abort measurement, if in progress\n      return\n    }\n\n    // 'Project' the visible viewport to cover the area that is being\n    // scrolled into view (if we know enough to estimate it).\n    if (dy && wheelPixelsPerUnit != null) {\n      var pixels = dy * wheelPixelsPerUnit;\n      var top = cm.doc.scrollTop, bot = top + display.wrapper.clientHeight;\n      if (pixels < 0) { top = Math.max(0, top + pixels - 50); }\n      else { bot = Math.min(cm.doc.height, bot + pixels + 50); }\n      updateDisplaySimple(cm, {top: top, bottom: bot});\n    }\n\n    if (wheelSamples < 20) {\n      if (display.wheelStartX == null) {\n        display.wheelStartX = scroll.scrollLeft; display.wheelStartY = scroll.scrollTop;\n        display.wheelDX = dx; display.wheelDY = dy;\n        setTimeout(function () {\n          if (display.wheelStartX == null) { return }\n          var movedX = scroll.scrollLeft - display.wheelStartX;\n          var movedY = scroll.scrollTop - display.wheelStartY;\n          var sample = (movedY && display.wheelDY && movedY / display.wheelDY) ||\n            (movedX && display.wheelDX && movedX / display.wheelDX);\n          display.wheelStartX = display.wheelStartY = null;\n          if (!sample) { return }\n          wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);\n          ++wheelSamples;\n        }, 200);\n      } else {\n        display.wheelDX += dx; display.wheelDY += dy;\n      }\n    }\n  }\n\n  // Selection objects are immutable. A new one is created every time\n  // the selection changes. A selection is one or more non-overlapping\n  // (and non-touching) ranges, sorted, and an integer that indicates\n  // which one is the primary selection (the one that's scrolled into\n  // view, that getCursor returns, etc).\n  var Selection = function(ranges, primIndex) {\n    this.ranges = ranges;\n    this.primIndex = primIndex;\n  };\n\n  Selection.prototype.primary = function () { return this.ranges[this.primIndex] };\n\n  Selection.prototype.equals = function (other) {\n      var this$1 = this;\n\n    if (other == this) { return true }\n    if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) { return false }\n    for (var i = 0; i < this.ranges.length; i++) {\n      var here = this$1.ranges[i], there = other.ranges[i];\n      if (!equalCursorPos(here.anchor, there.anchor) || !equalCursorPos(here.head, there.head)) { return false }\n    }\n    return true\n  };\n\n  Selection.prototype.deepCopy = function () {\n      var this$1 = this;\n\n    var out = [];\n    for (var i = 0; i < this.ranges.length; i++)\n      { out[i] = new Range(copyPos(this$1.ranges[i].anchor), copyPos(this$1.ranges[i].head)); }\n    return new Selection(out, this.primIndex)\n  };\n\n  Selection.prototype.somethingSelected = function () {\n      var this$1 = this;\n\n    for (var i = 0; i < this.ranges.length; i++)\n      { if (!this$1.ranges[i].empty()) { return true } }\n    return false\n  };\n\n  Selection.prototype.contains = function (pos, end) {\n      var this$1 = this;\n\n    if (!end) { end = pos; }\n    for (var i = 0; i < this.ranges.length; i++) {\n      var range = this$1.ranges[i];\n      if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0)\n        { return i }\n    }\n    return -1\n  };\n\n  var Range = function(anchor, head) {\n    this.anchor = anchor; this.head = head;\n  };\n\n  Range.prototype.from = function () { return minPos(this.anchor, this.head) };\n  Range.prototype.to = function () { return maxPos(this.anchor, this.head) };\n  Range.prototype.empty = function () { return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch };\n\n  // Take an unsorted, potentially overlapping set of ranges, and\n  // build a selection out of it. 'Consumes' ranges array (modifying\n  // it).\n  function normalizeSelection(cm, ranges, primIndex) {\n    var mayTouch = cm && cm.options.selectionsMayTouch;\n    var prim = ranges[primIndex];\n    ranges.sort(function (a, b) { return cmp(a.from(), b.from()); });\n    primIndex = indexOf(ranges, prim);\n    for (var i = 1; i < ranges.length; i++) {\n      var cur = ranges[i], prev = ranges[i - 1];\n      var diff = cmp(prev.to(), cur.from());\n      if (mayTouch && !cur.empty() ? diff > 0 : diff >= 0) {\n        var from = minPos(prev.from(), cur.from()), to = maxPos(prev.to(), cur.to());\n        var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;\n        if (i <= primIndex) { --primIndex; }\n        ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));\n      }\n    }\n    return new Selection(ranges, primIndex)\n  }\n\n  function simpleSelection(anchor, head) {\n    return new Selection([new Range(anchor, head || anchor)], 0)\n  }\n\n  // Compute the position of the end of a change (its 'to' property\n  // refers to the pre-change end).\n  function changeEnd(change) {\n    if (!change.text) { return change.to }\n    return Pos(change.from.line + change.text.length - 1,\n               lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0))\n  }\n\n  // Adjust a position to refer to the post-change position of the\n  // same text, or the end of the change if the change covers it.\n  function adjustForChange(pos, change) {\n    if (cmp(pos, change.from) < 0) { return pos }\n    if (cmp(pos, change.to) <= 0) { return changeEnd(change) }\n\n    var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1, ch = pos.ch;\n    if (pos.line == change.to.line) { ch += changeEnd(change).ch - change.to.ch; }\n    return Pos(line, ch)\n  }\n\n  function computeSelAfterChange(doc, change) {\n    var out = [];\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      var range = doc.sel.ranges[i];\n      out.push(new Range(adjustForChange(range.anchor, change),\n                         adjustForChange(range.head, change)));\n    }\n    return normalizeSelection(doc.cm, out, doc.sel.primIndex)\n  }\n\n  function offsetPos(pos, old, nw) {\n    if (pos.line == old.line)\n      { return Pos(nw.line, pos.ch - old.ch + nw.ch) }\n    else\n      { return Pos(nw.line + (pos.line - old.line), pos.ch) }\n  }\n\n  // Used by replaceSelections to allow moving the selection to the\n  // start or around the replaced test. Hint may be \"start\" or \"around\".\n  function computeReplacedSel(doc, changes, hint) {\n    var out = [];\n    var oldPrev = Pos(doc.first, 0), newPrev = oldPrev;\n    for (var i = 0; i < changes.length; i++) {\n      var change = changes[i];\n      var from = offsetPos(change.from, oldPrev, newPrev);\n      var to = offsetPos(changeEnd(change), oldPrev, newPrev);\n      oldPrev = change.to;\n      newPrev = to;\n      if (hint == \"around\") {\n        var range = doc.sel.ranges[i], inv = cmp(range.head, range.anchor) < 0;\n        out[i] = new Range(inv ? to : from, inv ? from : to);\n      } else {\n        out[i] = new Range(from, from);\n      }\n    }\n    return new Selection(out, doc.sel.primIndex)\n  }\n\n  // Used to get the editor into a consistent state again when options change.\n\n  function loadMode(cm) {\n    cm.doc.mode = getMode(cm.options, cm.doc.modeOption);\n    resetModeState(cm);\n  }\n\n  function resetModeState(cm) {\n    cm.doc.iter(function (line) {\n      if (line.stateAfter) { line.stateAfter = null; }\n      if (line.styles) { line.styles = null; }\n    });\n    cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first;\n    startWorker(cm, 100);\n    cm.state.modeGen++;\n    if (cm.curOp) { regChange(cm); }\n  }\n\n  // DOCUMENT DATA STRUCTURE\n\n  // By default, updates that start and end at the beginning of a line\n  // are treated specially, in order to make the association of line\n  // widgets and marker elements with the text behave more intuitive.\n  function isWholeLineUpdate(doc, change) {\n    return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \"\" &&\n      (!doc.cm || doc.cm.options.wholeLineUpdateBefore)\n  }\n\n  // Perform a change on the document data structure.\n  function updateDoc(doc, change, markedSpans, estimateHeight$$1) {\n    function spansFor(n) {return markedSpans ? markedSpans[n] : null}\n    function update(line, text, spans) {\n      updateLine(line, text, spans, estimateHeight$$1);\n      signalLater(line, \"change\", line, change);\n    }\n    function linesFor(start, end) {\n      var result = [];\n      for (var i = start; i < end; ++i)\n        { result.push(new Line(text[i], spansFor(i), estimateHeight$$1)); }\n      return result\n    }\n\n    var from = change.from, to = change.to, text = change.text;\n    var firstLine = getLine(doc, from.line), lastLine = getLine(doc, to.line);\n    var lastText = lst(text), lastSpans = spansFor(text.length - 1), nlines = to.line - from.line;\n\n    // Adjust the line structure\n    if (change.full) {\n      doc.insert(0, linesFor(0, text.length));\n      doc.remove(text.length, doc.size - text.length);\n    } else if (isWholeLineUpdate(doc, change)) {\n      // This is a whole-line replace. Treated specially to make\n      // sure line objects move the way they are supposed to.\n      var added = linesFor(0, text.length - 1);\n      update(lastLine, lastLine.text, lastSpans);\n      if (nlines) { doc.remove(from.line, nlines); }\n      if (added.length) { doc.insert(from.line, added); }\n    } else if (firstLine == lastLine) {\n      if (text.length == 1) {\n        update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);\n      } else {\n        var added$1 = linesFor(1, text.length - 1);\n        added$1.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight$$1));\n        update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n        doc.insert(from.line + 1, added$1);\n      }\n    } else if (text.length == 1) {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));\n      doc.remove(from.line + 1, nlines);\n    } else {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n      update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);\n      var added$2 = linesFor(1, text.length - 1);\n      if (nlines > 1) { doc.remove(from.line + 1, nlines - 1); }\n      doc.insert(from.line + 1, added$2);\n    }\n\n    signalLater(doc, \"change\", doc, change);\n  }\n\n  // Call f for all linked documents.\n  function linkedDocs(doc, f, sharedHistOnly) {\n    function propagate(doc, skip, sharedHist) {\n      if (doc.linked) { for (var i = 0; i < doc.linked.length; ++i) {\n        var rel = doc.linked[i];\n        if (rel.doc == skip) { continue }\n        var shared = sharedHist && rel.sharedHist;\n        if (sharedHistOnly && !shared) { continue }\n        f(rel.doc, shared);\n        propagate(rel.doc, doc, shared);\n      } }\n    }\n    propagate(doc, null, true);\n  }\n\n  // Attach a document to an editor.\n  function attachDoc(cm, doc) {\n    if (doc.cm) { throw new Error(\"This document is already in use.\") }\n    cm.doc = doc;\n    doc.cm = cm;\n    estimateLineHeights(cm);\n    loadMode(cm);\n    setDirectionClass(cm);\n    if (!cm.options.lineWrapping) { findMaxLine(cm); }\n    cm.options.mode = doc.modeOption;\n    regChange(cm);\n  }\n\n  function setDirectionClass(cm) {\n  (cm.doc.direction == \"rtl\" ? addClass : rmClass)(cm.display.lineDiv, \"CodeMirror-rtl\");\n  }\n\n  function directionChanged(cm) {\n    runInOp(cm, function () {\n      setDirectionClass(cm);\n      regChange(cm);\n    });\n  }\n\n  function History(startGen) {\n    // Arrays of change events and selections. Doing something adds an\n    // event to done and clears undo. Undoing moves events from done\n    // to undone, redoing moves them in the other direction.\n    this.done = []; this.undone = [];\n    this.undoDepth = Infinity;\n    // Used to track when changes can be merged into a single undo\n    // event\n    this.lastModTime = this.lastSelTime = 0;\n    this.lastOp = this.lastSelOp = null;\n    this.lastOrigin = this.lastSelOrigin = null;\n    // Used by the isClean() method\n    this.generation = this.maxGeneration = startGen || 1;\n  }\n\n  // Create a history change event from an updateDoc-style change\n  // object.\n  function historyChangeFromChange(doc, change) {\n    var histChange = {from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to)};\n    attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n    linkedDocs(doc, function (doc) { return attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1); }, true);\n    return histChange\n  }\n\n  // Pop all selection events off the end of a history array. Stop at\n  // a change event.\n  function clearSelectionEvents(array) {\n    while (array.length) {\n      var last = lst(array);\n      if (last.ranges) { array.pop(); }\n      else { break }\n    }\n  }\n\n  // Find the top change event in the history. Pop off selection\n  // events that are in the way.\n  function lastChangeEvent(hist, force) {\n    if (force) {\n      clearSelectionEvents(hist.done);\n      return lst(hist.done)\n    } else if (hist.done.length && !lst(hist.done).ranges) {\n      return lst(hist.done)\n    } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\n      hist.done.pop();\n      return lst(hist.done)\n    }\n  }\n\n  // Register a change in the history. Merges changes that are within\n  // a single operation, or are close together with an origin that\n  // allows merging (starting with \"+\") into a single event.\n  function addChangeToHistory(doc, change, selAfter, opId) {\n    var hist = doc.history;\n    hist.undone.length = 0;\n    var time = +new Date, cur;\n    var last;\n\n    if ((hist.lastOp == opId ||\n         hist.lastOrigin == change.origin && change.origin &&\n         ((change.origin.charAt(0) == \"+\" && hist.lastModTime > time - (doc.cm ? doc.cm.options.historyEventDelay : 500)) ||\n          change.origin.charAt(0) == \"*\")) &&\n        (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\n      // Merge this change into the last event\n      last = lst(cur.changes);\n      if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\n        // Optimized case for simple insertion -- don't want to add\n        // new changesets for every character typed\n        last.to = changeEnd(change);\n      } else {\n        // Add new sub-event\n        cur.changes.push(historyChangeFromChange(doc, change));\n      }\n    } else {\n      // Can not be merged, start a new event.\n      var before = lst(hist.done);\n      if (!before || !before.ranges)\n        { pushSelectionToHistory(doc.sel, hist.done); }\n      cur = {changes: [historyChangeFromChange(doc, change)],\n             generation: hist.generation};\n      hist.done.push(cur);\n      while (hist.done.length > hist.undoDepth) {\n        hist.done.shift();\n        if (!hist.done[0].ranges) { hist.done.shift(); }\n      }\n    }\n    hist.done.push(selAfter);\n    hist.generation = ++hist.maxGeneration;\n    hist.lastModTime = hist.lastSelTime = time;\n    hist.lastOp = hist.lastSelOp = opId;\n    hist.lastOrigin = hist.lastSelOrigin = change.origin;\n\n    if (!last) { signal(doc, \"historyAdded\"); }\n  }\n\n  function selectionEventCanBeMerged(doc, origin, prev, sel) {\n    var ch = origin.charAt(0);\n    return ch == \"*\" ||\n      ch == \"+\" &&\n      prev.ranges.length == sel.ranges.length &&\n      prev.somethingSelected() == sel.somethingSelected() &&\n      new Date - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500)\n  }\n\n  // Called whenever the selection changes, sets the new selection as\n  // the pending selection in the history, and pushes the old pending\n  // selection into the 'done' array when it was significantly\n  // different (in number of selected ranges, emptiness, or time).\n  function addSelectionToHistory(doc, sel, opId, options) {\n    var hist = doc.history, origin = options && options.origin;\n\n    // A new event is started when the previous origin does not match\n    // the current, or the origins don't allow matching. Origins\n    // starting with * are always merged, those starting with + are\n    // merged when similar and close together in time.\n    if (opId == hist.lastSelOp ||\n        (origin && hist.lastSelOrigin == origin &&\n         (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin ||\n          selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))))\n      { hist.done[hist.done.length - 1] = sel; }\n    else\n      { pushSelectionToHistory(sel, hist.done); }\n\n    hist.lastSelTime = +new Date;\n    hist.lastSelOrigin = origin;\n    hist.lastSelOp = opId;\n    if (options && options.clearRedo !== false)\n      { clearSelectionEvents(hist.undone); }\n  }\n\n  function pushSelectionToHistory(sel, dest) {\n    var top = lst(dest);\n    if (!(top && top.ranges && top.equals(sel)))\n      { dest.push(sel); }\n  }\n\n  // Used to store marked span information in the history.\n  function attachLocalSpans(doc, change, from, to) {\n    var existing = change[\"spans_\" + doc.id], n = 0;\n    doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function (line) {\n      if (line.markedSpans)\n        { (existing || (existing = change[\"spans_\" + doc.id] = {}))[n] = line.markedSpans; }\n      ++n;\n    });\n  }\n\n  // When un/re-doing restores text containing marked spans, those\n  // that have been explicitly cleared should not be restored.\n  function removeClearedSpans(spans) {\n    if (!spans) { return null }\n    var out;\n    for (var i = 0; i < spans.length; ++i) {\n      if (spans[i].marker.explicitlyCleared) { if (!out) { out = spans.slice(0, i); } }\n      else if (out) { out.push(spans[i]); }\n    }\n    return !out ? spans : out.length ? out : null\n  }\n\n  // Retrieve and filter the old marked spans stored in a change event.\n  function getOldSpans(doc, change) {\n    var found = change[\"spans_\" + doc.id];\n    if (!found) { return null }\n    var nw = [];\n    for (var i = 0; i < change.text.length; ++i)\n      { nw.push(removeClearedSpans(found[i])); }\n    return nw\n  }\n\n  // Used for un/re-doing changes from the history. Combines the\n  // result of computing the existing spans with the set of spans that\n  // existed in the history (so that deleting around a span and then\n  // undoing brings back the span).\n  function mergeOldSpans(doc, change) {\n    var old = getOldSpans(doc, change);\n    var stretched = stretchSpansOverChange(doc, change);\n    if (!old) { return stretched }\n    if (!stretched) { return old }\n\n    for (var i = 0; i < old.length; ++i) {\n      var oldCur = old[i], stretchCur = stretched[i];\n      if (oldCur && stretchCur) {\n        spans: for (var j = 0; j < stretchCur.length; ++j) {\n          var span = stretchCur[j];\n          for (var k = 0; k < oldCur.length; ++k)\n            { if (oldCur[k].marker == span.marker) { continue spans } }\n          oldCur.push(span);\n        }\n      } else if (stretchCur) {\n        old[i] = stretchCur;\n      }\n    }\n    return old\n  }\n\n  // Used both to provide a JSON-safe object in .getHistory, and, when\n  // detaching a document, to split the history in two\n  function copyHistoryArray(events, newGroup, instantiateSel) {\n    var copy = [];\n    for (var i = 0; i < events.length; ++i) {\n      var event = events[i];\n      if (event.ranges) {\n        copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);\n        continue\n      }\n      var changes = event.changes, newChanges = [];\n      copy.push({changes: newChanges});\n      for (var j = 0; j < changes.length; ++j) {\n        var change = changes[j], m = (void 0);\n        newChanges.push({from: change.from, to: change.to, text: change.text});\n        if (newGroup) { for (var prop in change) { if (m = prop.match(/^spans_(\\d+)$/)) {\n          if (indexOf(newGroup, Number(m[1])) > -1) {\n            lst(newChanges)[prop] = change[prop];\n            delete change[prop];\n          }\n        } } }\n      }\n    }\n    return copy\n  }\n\n  // The 'scroll' parameter given to many of these indicated whether\n  // the new cursor position should be scrolled into view after\n  // modifying the selection.\n\n  // If shift is held or the extend flag is set, extends a range to\n  // include a given position (and optionally a second position).\n  // Otherwise, simply returns the range between the given positions.\n  // Used for cursor motion and such.\n  function extendRange(range, head, other, extend) {\n    if (extend) {\n      var anchor = range.anchor;\n      if (other) {\n        var posBefore = cmp(head, anchor) < 0;\n        if (posBefore != (cmp(other, anchor) < 0)) {\n          anchor = head;\n          head = other;\n        } else if (posBefore != (cmp(head, other) < 0)) {\n          head = other;\n        }\n      }\n      return new Range(anchor, head)\n    } else {\n      return new Range(other || head, head)\n    }\n  }\n\n  // Extend the primary selection range, discard the rest.\n  function extendSelection(doc, head, other, options, extend) {\n    if (extend == null) { extend = doc.cm && (doc.cm.display.shift || doc.extend); }\n    setSelection(doc, new Selection([extendRange(doc.sel.primary(), head, other, extend)], 0), options);\n  }\n\n  // Extend all selections (pos is an array of selections with length\n  // equal the number of selections)\n  function extendSelections(doc, heads, options) {\n    var out = [];\n    var extend = doc.cm && (doc.cm.display.shift || doc.extend);\n    for (var i = 0; i < doc.sel.ranges.length; i++)\n      { out[i] = extendRange(doc.sel.ranges[i], heads[i], null, extend); }\n    var newSel = normalizeSelection(doc.cm, out, doc.sel.primIndex);\n    setSelection(doc, newSel, options);\n  }\n\n  // Updates a single range in the selection.\n  function replaceOneSelection(doc, i, range, options) {\n    var ranges = doc.sel.ranges.slice(0);\n    ranges[i] = range;\n    setSelection(doc, normalizeSelection(doc.cm, ranges, doc.sel.primIndex), options);\n  }\n\n  // Reset the selection to a single range.\n  function setSimpleSelection(doc, anchor, head, options) {\n    setSelection(doc, simpleSelection(anchor, head), options);\n  }\n\n  // Give beforeSelectionChange handlers a change to influence a\n  // selection update.\n  function filterSelectionChange(doc, sel, options) {\n    var obj = {\n      ranges: sel.ranges,\n      update: function(ranges) {\n        var this$1 = this;\n\n        this.ranges = [];\n        for (var i = 0; i < ranges.length; i++)\n          { this$1.ranges[i] = new Range(clipPos(doc, ranges[i].anchor),\n                                     clipPos(doc, ranges[i].head)); }\n      },\n      origin: options && options.origin\n    };\n    signal(doc, \"beforeSelectionChange\", doc, obj);\n    if (doc.cm) { signal(doc.cm, \"beforeSelectionChange\", doc.cm, obj); }\n    if (obj.ranges != sel.ranges) { return normalizeSelection(doc.cm, obj.ranges, obj.ranges.length - 1) }\n    else { return sel }\n  }\n\n  function setSelectionReplaceHistory(doc, sel, options) {\n    var done = doc.history.done, last = lst(done);\n    if (last && last.ranges) {\n      done[done.length - 1] = sel;\n      setSelectionNoUndo(doc, sel, options);\n    } else {\n      setSelection(doc, sel, options);\n    }\n  }\n\n  // Set a new selection.\n  function setSelection(doc, sel, options) {\n    setSelectionNoUndo(doc, sel, options);\n    addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);\n  }\n\n  function setSelectionNoUndo(doc, sel, options) {\n    if (hasHandler(doc, \"beforeSelectionChange\") || doc.cm && hasHandler(doc.cm, \"beforeSelectionChange\"))\n      { sel = filterSelectionChange(doc, sel, options); }\n\n    var bias = options && options.bias ||\n      (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);\n    setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));\n\n    if (!(options && options.scroll === false) && doc.cm)\n      { ensureCursorVisible(doc.cm); }\n  }\n\n  function setSelectionInner(doc, sel) {\n    if (sel.equals(doc.sel)) { return }\n\n    doc.sel = sel;\n\n    if (doc.cm) {\n      doc.cm.curOp.updateInput = 1;\n      doc.cm.curOp.selectionChanged = true;\n      signalCursorActivity(doc.cm);\n    }\n    signalLater(doc, \"cursorActivity\", doc);\n  }\n\n  // Verify that the selection does not partially select any atomic\n  // marked ranges.\n  function reCheckSelection(doc) {\n    setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false));\n  }\n\n  // Return a selection that does not partially select any atomic\n  // ranges.\n  function skipAtomicInSelection(doc, sel, bias, mayClear) {\n    var out;\n    for (var i = 0; i < sel.ranges.length; i++) {\n      var range = sel.ranges[i];\n      var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i];\n      var newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear);\n      var newHead = skipAtomic(doc, range.head, old && old.head, bias, mayClear);\n      if (out || newAnchor != range.anchor || newHead != range.head) {\n        if (!out) { out = sel.ranges.slice(0, i); }\n        out[i] = new Range(newAnchor, newHead);\n      }\n    }\n    return out ? normalizeSelection(doc.cm, out, sel.primIndex) : sel\n  }\n\n  function skipAtomicInner(doc, pos, oldPos, dir, mayClear) {\n    var line = getLine(doc, pos.line);\n    if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n      var sp = line.markedSpans[i], m = sp.marker;\n\n      // Determine if we should prevent the cursor being placed to the left/right of an atomic marker\n      // Historically this was determined using the inclusiveLeft/Right option, but the new way to control it\n      // is with selectLeft/Right\n      var preventCursorLeft = (\"selectLeft\" in m) ? !m.selectLeft : m.inclusiveLeft;\n      var preventCursorRight = (\"selectRight\" in m) ? !m.selectRight : m.inclusiveRight;\n\n      if ((sp.from == null || (preventCursorLeft ? sp.from <= pos.ch : sp.from < pos.ch)) &&\n          (sp.to == null || (preventCursorRight ? sp.to >= pos.ch : sp.to > pos.ch))) {\n        if (mayClear) {\n          signal(m, \"beforeCursorEnter\");\n          if (m.explicitlyCleared) {\n            if (!line.markedSpans) { break }\n            else {--i; continue}\n          }\n        }\n        if (!m.atomic) { continue }\n\n        if (oldPos) {\n          var near = m.find(dir < 0 ? 1 : -1), diff = (void 0);\n          if (dir < 0 ? preventCursorRight : preventCursorLeft)\n            { near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null); }\n          if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0))\n            { return skipAtomicInner(doc, near, pos, dir, mayClear) }\n        }\n\n        var far = m.find(dir < 0 ? -1 : 1);\n        if (dir < 0 ? preventCursorLeft : preventCursorRight)\n          { far = movePos(doc, far, dir, far.line == pos.line ? line : null); }\n        return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null\n      }\n    } }\n    return pos\n  }\n\n  // Ensure a given position is not inside an atomic range.\n  function skipAtomic(doc, pos, oldPos, bias, mayClear) {\n    var dir = bias || 1;\n    var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) ||\n        (!mayClear && skipAtomicInner(doc, pos, oldPos, dir, true)) ||\n        skipAtomicInner(doc, pos, oldPos, -dir, mayClear) ||\n        (!mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true));\n    if (!found) {\n      doc.cantEdit = true;\n      return Pos(doc.first, 0)\n    }\n    return found\n  }\n\n  function movePos(doc, pos, dir, line) {\n    if (dir < 0 && pos.ch == 0) {\n      if (pos.line > doc.first) { return clipPos(doc, Pos(pos.line - 1)) }\n      else { return null }\n    } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {\n      if (pos.line < doc.first + doc.size - 1) { return Pos(pos.line + 1, 0) }\n      else { return null }\n    } else {\n      return new Pos(pos.line, pos.ch + dir)\n    }\n  }\n\n  function selectAll(cm) {\n    cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);\n  }\n\n  // UPDATING\n\n  // Allow \"beforeChange\" event handlers to influence a change\n  function filterChange(doc, change, update) {\n    var obj = {\n      canceled: false,\n      from: change.from,\n      to: change.to,\n      text: change.text,\n      origin: change.origin,\n      cancel: function () { return obj.canceled = true; }\n    };\n    if (update) { obj.update = function (from, to, text, origin) {\n      if (from) { obj.from = clipPos(doc, from); }\n      if (to) { obj.to = clipPos(doc, to); }\n      if (text) { obj.text = text; }\n      if (origin !== undefined) { obj.origin = origin; }\n    }; }\n    signal(doc, \"beforeChange\", doc, obj);\n    if (doc.cm) { signal(doc.cm, \"beforeChange\", doc.cm, obj); }\n\n    if (obj.canceled) {\n      if (doc.cm) { doc.cm.curOp.updateInput = 2; }\n      return null\n    }\n    return {from: obj.from, to: obj.to, text: obj.text, origin: obj.origin}\n  }\n\n  // Apply a change to a document, and add it to the document's\n  // history, and propagating it to all linked documents.\n  function makeChange(doc, change, ignoreReadOnly) {\n    if (doc.cm) {\n      if (!doc.cm.curOp) { return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly) }\n      if (doc.cm.state.suppressEdits) { return }\n    }\n\n    if (hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")) {\n      change = filterChange(doc, change, true);\n      if (!change) { return }\n    }\n\n    // Possibly split or suppress the update based on the presence\n    // of read-only spans in its range.\n    var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);\n    if (split) {\n      for (var i = split.length - 1; i >= 0; --i)\n        { makeChangeInner(doc, {from: split[i].from, to: split[i].to, text: i ? [\"\"] : change.text, origin: change.origin}); }\n    } else {\n      makeChangeInner(doc, change);\n    }\n  }\n\n  function makeChangeInner(doc, change) {\n    if (change.text.length == 1 && change.text[0] == \"\" && cmp(change.from, change.to) == 0) { return }\n    var selAfter = computeSelAfterChange(doc, change);\n    addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);\n\n    makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));\n    var rebased = [];\n\n    linkedDocs(doc, function (doc, sharedHist) {\n      if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n        rebaseHist(doc.history, change);\n        rebased.push(doc.history);\n      }\n      makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));\n    });\n  }\n\n  // Revert a change stored in a document's history.\n  function makeChangeFromHistory(doc, type, allowSelectionOnly) {\n    var suppress = doc.cm && doc.cm.state.suppressEdits;\n    if (suppress && !allowSelectionOnly) { return }\n\n    var hist = doc.history, event, selAfter = doc.sel;\n    var source = type == \"undo\" ? hist.done : hist.undone, dest = type == \"undo\" ? hist.undone : hist.done;\n\n    // Verify that there is a useable event (so that ctrl-z won't\n    // needlessly clear selection events)\n    var i = 0;\n    for (; i < source.length; i++) {\n      event = source[i];\n      if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges)\n        { break }\n    }\n    if (i == source.length) { return }\n    hist.lastOrigin = hist.lastSelOrigin = null;\n\n    for (;;) {\n      event = source.pop();\n      if (event.ranges) {\n        pushSelectionToHistory(event, dest);\n        if (allowSelectionOnly && !event.equals(doc.sel)) {\n          setSelection(doc, event, {clearRedo: false});\n          return\n        }\n        selAfter = event;\n      } else if (suppress) {\n        source.push(event);\n        return\n      } else { break }\n    }\n\n    // Build up a reverse change object to add to the opposite history\n    // stack (redo when undoing, and vice versa).\n    var antiChanges = [];\n    pushSelectionToHistory(selAfter, dest);\n    dest.push({changes: antiChanges, generation: hist.generation});\n    hist.generation = event.generation || ++hist.maxGeneration;\n\n    var filter = hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\");\n\n    var loop = function ( i ) {\n      var change = event.changes[i];\n      change.origin = type;\n      if (filter && !filterChange(doc, change, false)) {\n        source.length = 0;\n        return {}\n      }\n\n      antiChanges.push(historyChangeFromChange(doc, change));\n\n      var after = i ? computeSelAfterChange(doc, change) : lst(source);\n      makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));\n      if (!i && doc.cm) { doc.cm.scrollIntoView({from: change.from, to: changeEnd(change)}); }\n      var rebased = [];\n\n      // Propagate to the linked documents\n      linkedDocs(doc, function (doc, sharedHist) {\n        if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n          rebaseHist(doc.history, change);\n          rebased.push(doc.history);\n        }\n        makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));\n      });\n    };\n\n    for (var i$1 = event.changes.length - 1; i$1 >= 0; --i$1) {\n      var returned = loop( i$1 );\n\n      if ( returned ) return returned.v;\n    }\n  }\n\n  // Sub-views need their line numbers shifted when text is added\n  // above or below them in the parent document.\n  function shiftDoc(doc, distance) {\n    if (distance == 0) { return }\n    doc.first += distance;\n    doc.sel = new Selection(map(doc.sel.ranges, function (range) { return new Range(\n      Pos(range.anchor.line + distance, range.anchor.ch),\n      Pos(range.head.line + distance, range.head.ch)\n    ); }), doc.sel.primIndex);\n    if (doc.cm) {\n      regChange(doc.cm, doc.first, doc.first - distance, distance);\n      for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++)\n        { regLineChange(doc.cm, l, \"gutter\"); }\n    }\n  }\n\n  // More lower-level change function, handling only a single document\n  // (not linked ones).\n  function makeChangeSingleDoc(doc, change, selAfter, spans) {\n    if (doc.cm && !doc.cm.curOp)\n      { return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans) }\n\n    if (change.to.line < doc.first) {\n      shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));\n      return\n    }\n    if (change.from.line > doc.lastLine()) { return }\n\n    // Clip the change to the size of this doc\n    if (change.from.line < doc.first) {\n      var shift = change.text.length - 1 - (doc.first - change.from.line);\n      shiftDoc(doc, shift);\n      change = {from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),\n                text: [lst(change.text)], origin: change.origin};\n    }\n    var last = doc.lastLine();\n    if (change.to.line > last) {\n      change = {from: change.from, to: Pos(last, getLine(doc, last).text.length),\n                text: [change.text[0]], origin: change.origin};\n    }\n\n    change.removed = getBetween(doc, change.from, change.to);\n\n    if (!selAfter) { selAfter = computeSelAfterChange(doc, change); }\n    if (doc.cm) { makeChangeSingleDocInEditor(doc.cm, change, spans); }\n    else { updateDoc(doc, change, spans); }\n    setSelectionNoUndo(doc, selAfter, sel_dontScroll);\n\n    if (doc.cantEdit && skipAtomic(doc, Pos(doc.firstLine(), 0)))\n      { doc.cantEdit = false; }\n  }\n\n  // Handle the interaction of a change to a document with the editor\n  // that this document is part of.\n  function makeChangeSingleDocInEditor(cm, change, spans) {\n    var doc = cm.doc, display = cm.display, from = change.from, to = change.to;\n\n    var recomputeMaxLength = false, checkWidthStart = from.line;\n    if (!cm.options.lineWrapping) {\n      checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));\n      doc.iter(checkWidthStart, to.line + 1, function (line) {\n        if (line == display.maxLine) {\n          recomputeMaxLength = true;\n          return true\n        }\n      });\n    }\n\n    if (doc.sel.contains(change.from, change.to) > -1)\n      { signalCursorActivity(cm); }\n\n    updateDoc(doc, change, spans, estimateHeight(cm));\n\n    if (!cm.options.lineWrapping) {\n      doc.iter(checkWidthStart, from.line + change.text.length, function (line) {\n        var len = lineLength(line);\n        if (len > display.maxLineLength) {\n          display.maxLine = line;\n          display.maxLineLength = len;\n          display.maxLineChanged = true;\n          recomputeMaxLength = false;\n        }\n      });\n      if (recomputeMaxLength) { cm.curOp.updateMaxLine = true; }\n    }\n\n    retreatFrontier(doc, from.line);\n    startWorker(cm, 400);\n\n    var lendiff = change.text.length - (to.line - from.line) - 1;\n    // Remember that these lines changed, for updating the display\n    if (change.full)\n      { regChange(cm); }\n    else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change))\n      { regLineChange(cm, from.line, \"text\"); }\n    else\n      { regChange(cm, from.line, to.line + 1, lendiff); }\n\n    var changesHandler = hasHandler(cm, \"changes\"), changeHandler = hasHandler(cm, \"change\");\n    if (changeHandler || changesHandler) {\n      var obj = {\n        from: from, to: to,\n        text: change.text,\n        removed: change.removed,\n        origin: change.origin\n      };\n      if (changeHandler) { signalLater(cm, \"change\", cm, obj); }\n      if (changesHandler) { (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj); }\n    }\n    cm.display.selForContextMenu = null;\n  }\n\n  function replaceRange(doc, code, from, to, origin) {\n    var assign;\n\n    if (!to) { to = from; }\n    if (cmp(to, from) < 0) { (assign = [to, from], from = assign[0], to = assign[1]); }\n    if (typeof code == \"string\") { code = doc.splitLines(code); }\n    makeChange(doc, {from: from, to: to, text: code, origin: origin});\n  }\n\n  // Rebasing/resetting history to deal with externally-sourced changes\n\n  function rebaseHistSelSingle(pos, from, to, diff) {\n    if (to < pos.line) {\n      pos.line += diff;\n    } else if (from < pos.line) {\n      pos.line = from;\n      pos.ch = 0;\n    }\n  }\n\n  // Tries to rebase an array of history events given a change in the\n  // document. If the change touches the same lines as the event, the\n  // event, and everything 'behind' it, is discarded. If the change is\n  // before the event, the event's positions are updated. Uses a\n  // copy-on-write scheme for the positions, to avoid having to\n  // reallocate them all on every rebase, but also avoid problems with\n  // shared position objects being unsafely updated.\n  function rebaseHistArray(array, from, to, diff) {\n    for (var i = 0; i < array.length; ++i) {\n      var sub = array[i], ok = true;\n      if (sub.ranges) {\n        if (!sub.copied) { sub = array[i] = sub.deepCopy(); sub.copied = true; }\n        for (var j = 0; j < sub.ranges.length; j++) {\n          rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);\n          rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);\n        }\n        continue\n      }\n      for (var j$1 = 0; j$1 < sub.changes.length; ++j$1) {\n        var cur = sub.changes[j$1];\n        if (to < cur.from.line) {\n          cur.from = Pos(cur.from.line + diff, cur.from.ch);\n          cur.to = Pos(cur.to.line + diff, cur.to.ch);\n        } else if (from <= cur.to.line) {\n          ok = false;\n          break\n        }\n      }\n      if (!ok) {\n        array.splice(0, i + 1);\n        i = 0;\n      }\n    }\n  }\n\n  function rebaseHist(hist, change) {\n    var from = change.from.line, to = change.to.line, diff = change.text.length - (to - from) - 1;\n    rebaseHistArray(hist.done, from, to, diff);\n    rebaseHistArray(hist.undone, from, to, diff);\n  }\n\n  // Utility for applying a change to a line by handle or number,\n  // returning the number and optionally registering the line as\n  // changed.\n  function changeLine(doc, handle, changeType, op) {\n    var no = handle, line = handle;\n    if (typeof handle == \"number\") { line = getLine(doc, clipLine(doc, handle)); }\n    else { no = lineNo(handle); }\n    if (no == null) { return null }\n    if (op(line, no) && doc.cm) { regLineChange(doc.cm, no, changeType); }\n    return line\n  }\n\n  // The document is represented as a BTree consisting of leaves, with\n  // chunk of lines in them, and branches, with up to ten leaves or\n  // other branch nodes below them. The top node is always a branch\n  // node, and is the document object itself (meaning it has\n  // additional methods and properties).\n  //\n  // All nodes have parent links. The tree is used both to go from\n  // line numbers to line objects, and to go from objects to numbers.\n  // It also indexes by height, and is used to convert between height\n  // and line object, and to find the total height of the document.\n  //\n  // See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html\n\n  function LeafChunk(lines) {\n    var this$1 = this;\n\n    this.lines = lines;\n    this.parent = null;\n    var height = 0;\n    for (var i = 0; i < lines.length; ++i) {\n      lines[i].parent = this$1;\n      height += lines[i].height;\n    }\n    this.height = height;\n  }\n\n  LeafChunk.prototype = {\n    chunkSize: function() { return this.lines.length },\n\n    // Remove the n lines at offset 'at'.\n    removeInner: function(at, n) {\n      var this$1 = this;\n\n      for (var i = at, e = at + n; i < e; ++i) {\n        var line = this$1.lines[i];\n        this$1.height -= line.height;\n        cleanUpLine(line);\n        signalLater(line, \"delete\");\n      }\n      this.lines.splice(at, n);\n    },\n\n    // Helper used to collapse a small branch into a single leaf.\n    collapse: function(lines) {\n      lines.push.apply(lines, this.lines);\n    },\n\n    // Insert the given array of lines at offset 'at', count them as\n    // having the given height.\n    insertInner: function(at, lines, height) {\n      var this$1 = this;\n\n      this.height += height;\n      this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));\n      for (var i = 0; i < lines.length; ++i) { lines[i].parent = this$1; }\n    },\n\n    // Used to iterate over a part of the tree.\n    iterN: function(at, n, op) {\n      var this$1 = this;\n\n      for (var e = at + n; at < e; ++at)\n        { if (op(this$1.lines[at])) { return true } }\n    }\n  };\n\n  function BranchChunk(children) {\n    var this$1 = this;\n\n    this.children = children;\n    var size = 0, height = 0;\n    for (var i = 0; i < children.length; ++i) {\n      var ch = children[i];\n      size += ch.chunkSize(); height += ch.height;\n      ch.parent = this$1;\n    }\n    this.size = size;\n    this.height = height;\n    this.parent = null;\n  }\n\n  BranchChunk.prototype = {\n    chunkSize: function() { return this.size },\n\n    removeInner: function(at, n) {\n      var this$1 = this;\n\n      this.size -= n;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this$1.children[i], sz = child.chunkSize();\n        if (at < sz) {\n          var rm = Math.min(n, sz - at), oldHeight = child.height;\n          child.removeInner(at, rm);\n          this$1.height -= oldHeight - child.height;\n          if (sz == rm) { this$1.children.splice(i--, 1); child.parent = null; }\n          if ((n -= rm) == 0) { break }\n          at = 0;\n        } else { at -= sz; }\n      }\n      // If the result is smaller than 25 lines, ensure that it is a\n      // single leaf node.\n      if (this.size - n < 25 &&\n          (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\n        var lines = [];\n        this.collapse(lines);\n        this.children = [new LeafChunk(lines)];\n        this.children[0].parent = this;\n      }\n    },\n\n    collapse: function(lines) {\n      var this$1 = this;\n\n      for (var i = 0; i < this.children.length; ++i) { this$1.children[i].collapse(lines); }\n    },\n\n    insertInner: function(at, lines, height) {\n      var this$1 = this;\n\n      this.size += lines.length;\n      this.height += height;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this$1.children[i], sz = child.chunkSize();\n        if (at <= sz) {\n          child.insertInner(at, lines, height);\n          if (child.lines && child.lines.length > 50) {\n            // To avoid memory thrashing when child.lines is huge (e.g. first view of a large file), it's never spliced.\n            // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\n            var remaining = child.lines.length % 25 + 25;\n            for (var pos = remaining; pos < child.lines.length;) {\n              var leaf = new LeafChunk(child.lines.slice(pos, pos += 25));\n              child.height -= leaf.height;\n              this$1.children.splice(++i, 0, leaf);\n              leaf.parent = this$1;\n            }\n            child.lines = child.lines.slice(0, remaining);\n            this$1.maybeSpill();\n          }\n          break\n        }\n        at -= sz;\n      }\n    },\n\n    // When a node has grown, check whether it should be split.\n    maybeSpill: function() {\n      if (this.children.length <= 10) { return }\n      var me = this;\n      do {\n        var spilled = me.children.splice(me.children.length - 5, 5);\n        var sibling = new BranchChunk(spilled);\n        if (!me.parent) { // Become the parent node\n          var copy = new BranchChunk(me.children);\n          copy.parent = me;\n          me.children = [copy, sibling];\n          me = copy;\n       } else {\n          me.size -= sibling.size;\n          me.height -= sibling.height;\n          var myIndex = indexOf(me.parent.children, me);\n          me.parent.children.splice(myIndex + 1, 0, sibling);\n        }\n        sibling.parent = me.parent;\n      } while (me.children.length > 10)\n      me.parent.maybeSpill();\n    },\n\n    iterN: function(at, n, op) {\n      var this$1 = this;\n\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this$1.children[i], sz = child.chunkSize();\n        if (at < sz) {\n          var used = Math.min(n, sz - at);\n          if (child.iterN(at, used, op)) { return true }\n          if ((n -= used) == 0) { break }\n          at = 0;\n        } else { at -= sz; }\n      }\n    }\n  };\n\n  // Line widgets are block elements displayed above or below a line.\n\n  var LineWidget = function(doc, node, options) {\n    var this$1 = this;\n\n    if (options) { for (var opt in options) { if (options.hasOwnProperty(opt))\n      { this$1[opt] = options[opt]; } } }\n    this.doc = doc;\n    this.node = node;\n  };\n\n  LineWidget.prototype.clear = function () {\n      var this$1 = this;\n\n    var cm = this.doc.cm, ws = this.line.widgets, line = this.line, no = lineNo(line);\n    if (no == null || !ws) { return }\n    for (var i = 0; i < ws.length; ++i) { if (ws[i] == this$1) { ws.splice(i--, 1); } }\n    if (!ws.length) { line.widgets = null; }\n    var height = widgetHeight(this);\n    updateLineHeight(line, Math.max(0, line.height - height));\n    if (cm) {\n      runInOp(cm, function () {\n        adjustScrollWhenAboveVisible(cm, line, -height);\n        regLineChange(cm, no, \"widget\");\n      });\n      signalLater(cm, \"lineWidgetCleared\", cm, this, no);\n    }\n  };\n\n  LineWidget.prototype.changed = function () {\n      var this$1 = this;\n\n    var oldH = this.height, cm = this.doc.cm, line = this.line;\n    this.height = null;\n    var diff = widgetHeight(this) - oldH;\n    if (!diff) { return }\n    if (!lineIsHidden(this.doc, line)) { updateLineHeight(line, line.height + diff); }\n    if (cm) {\n      runInOp(cm, function () {\n        cm.curOp.forceUpdate = true;\n        adjustScrollWhenAboveVisible(cm, line, diff);\n        signalLater(cm, \"lineWidgetChanged\", cm, this$1, lineNo(line));\n      });\n    }\n  };\n  eventMixin(LineWidget);\n\n  function adjustScrollWhenAboveVisible(cm, line, diff) {\n    if (heightAtLine(line) < ((cm.curOp && cm.curOp.scrollTop) || cm.doc.scrollTop))\n      { addToScrollTop(cm, diff); }\n  }\n\n  function addLineWidget(doc, handle, node, options) {\n    var widget = new LineWidget(doc, node, options);\n    var cm = doc.cm;\n    if (cm && widget.noHScroll) { cm.display.alignWidgets = true; }\n    changeLine(doc, handle, \"widget\", function (line) {\n      var widgets = line.widgets || (line.widgets = []);\n      if (widget.insertAt == null) { widgets.push(widget); }\n      else { widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget); }\n      widget.line = line;\n      if (cm && !lineIsHidden(doc, line)) {\n        var aboveVisible = heightAtLine(line) < doc.scrollTop;\n        updateLineHeight(line, line.height + widgetHeight(widget));\n        if (aboveVisible) { addToScrollTop(cm, widget.height); }\n        cm.curOp.forceUpdate = true;\n      }\n      return true\n    });\n    if (cm) { signalLater(cm, \"lineWidgetAdded\", cm, widget, typeof handle == \"number\" ? handle : lineNo(handle)); }\n    return widget\n  }\n\n  // TEXTMARKERS\n\n  // Created with markText and setBookmark methods. A TextMarker is a\n  // handle that can be used to clear or find a marked position in the\n  // document. Line objects hold arrays (markedSpans) containing\n  // {from, to, marker} object pointing to such marker objects, and\n  // indicating that such a marker is present on that line. Multiple\n  // lines may point to the same marker when it spans across lines.\n  // The spans will have null for their from/to properties when the\n  // marker continues beyond the start/end of the line. Markers have\n  // links back to the lines they currently touch.\n\n  // Collapsed markers have unique ids, in order to be able to order\n  // them, which is needed for uniquely determining an outer marker\n  // when they overlap (they may nest, but not partially overlap).\n  var nextMarkerId = 0;\n\n  var TextMarker = function(doc, type) {\n    this.lines = [];\n    this.type = type;\n    this.doc = doc;\n    this.id = ++nextMarkerId;\n  };\n\n  // Clear the marker.\n  TextMarker.prototype.clear = function () {\n      var this$1 = this;\n\n    if (this.explicitlyCleared) { return }\n    var cm = this.doc.cm, withOp = cm && !cm.curOp;\n    if (withOp) { startOperation(cm); }\n    if (hasHandler(this, \"clear\")) {\n      var found = this.find();\n      if (found) { signalLater(this, \"clear\", found.from, found.to); }\n    }\n    var min = null, max = null;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this$1.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this$1);\n      if (cm && !this$1.collapsed) { regLineChange(cm, lineNo(line), \"text\"); }\n      else if (cm) {\n        if (span.to != null) { max = lineNo(line); }\n        if (span.from != null) { min = lineNo(line); }\n      }\n      line.markedSpans = removeMarkedSpan(line.markedSpans, span);\n      if (span.from == null && this$1.collapsed && !lineIsHidden(this$1.doc, line) && cm)\n        { updateLineHeight(line, textHeight(cm.display)); }\n    }\n    if (cm && this.collapsed && !cm.options.lineWrapping) { for (var i$1 = 0; i$1 < this.lines.length; ++i$1) {\n      var visual = visualLine(this$1.lines[i$1]), len = lineLength(visual);\n      if (len > cm.display.maxLineLength) {\n        cm.display.maxLine = visual;\n        cm.display.maxLineLength = len;\n        cm.display.maxLineChanged = true;\n      }\n    } }\n\n    if (min != null && cm && this.collapsed) { regChange(cm, min, max + 1); }\n    this.lines.length = 0;\n    this.explicitlyCleared = true;\n    if (this.atomic && this.doc.cantEdit) {\n      this.doc.cantEdit = false;\n      if (cm) { reCheckSelection(cm.doc); }\n    }\n    if (cm) { signalLater(cm, \"markerCleared\", cm, this, min, max); }\n    if (withOp) { endOperation(cm); }\n    if (this.parent) { this.parent.clear(); }\n  };\n\n  // Find the position of the marker in the document. Returns a {from,\n  // to} object by default. Side can be passed to get a specific side\n  // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the\n  // Pos objects returned contain a line object, rather than a line\n  // number (used to prevent looking up the same line twice).\n  TextMarker.prototype.find = function (side, lineObj) {\n      var this$1 = this;\n\n    if (side == null && this.type == \"bookmark\") { side = 1; }\n    var from, to;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this$1.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this$1);\n      if (span.from != null) {\n        from = Pos(lineObj ? line : lineNo(line), span.from);\n        if (side == -1) { return from }\n      }\n      if (span.to != null) {\n        to = Pos(lineObj ? line : lineNo(line), span.to);\n        if (side == 1) { return to }\n      }\n    }\n    return from && {from: from, to: to}\n  };\n\n  // Signals that the marker's widget changed, and surrounding layout\n  // should be recomputed.\n  TextMarker.prototype.changed = function () {\n      var this$1 = this;\n\n    var pos = this.find(-1, true), widget = this, cm = this.doc.cm;\n    if (!pos || !cm) { return }\n    runInOp(cm, function () {\n      var line = pos.line, lineN = lineNo(pos.line);\n      var view = findViewForLine(cm, lineN);\n      if (view) {\n        clearLineMeasurementCacheFor(view);\n        cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;\n      }\n      cm.curOp.updateMaxLine = true;\n      if (!lineIsHidden(widget.doc, line) && widget.height != null) {\n        var oldHeight = widget.height;\n        widget.height = null;\n        var dHeight = widgetHeight(widget) - oldHeight;\n        if (dHeight)\n          { updateLineHeight(line, line.height + dHeight); }\n      }\n      signalLater(cm, \"markerChanged\", cm, this$1);\n    });\n  };\n\n  TextMarker.prototype.attachLine = function (line) {\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp;\n      if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1)\n        { (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this); }\n    }\n    this.lines.push(line);\n  };\n\n  TextMarker.prototype.detachLine = function (line) {\n    this.lines.splice(indexOf(this.lines, line), 1);\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp\n      ;(op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);\n    }\n  };\n  eventMixin(TextMarker);\n\n  // Create a marker, wire it up to the right lines, and\n  function markText(doc, from, to, options, type) {\n    // Shared markers (across linked documents) are handled separately\n    // (markTextShared will call out to this again, once per\n    // document).\n    if (options && options.shared) { return markTextShared(doc, from, to, options, type) }\n    // Ensure we are in an operation.\n    if (doc.cm && !doc.cm.curOp) { return operation(doc.cm, markText)(doc, from, to, options, type) }\n\n    var marker = new TextMarker(doc, type), diff = cmp(from, to);\n    if (options) { copyObj(options, marker, false); }\n    // Don't connect empty markers unless clearWhenEmpty is false\n    if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false)\n      { return marker }\n    if (marker.replacedWith) {\n      // Showing up as a widget implies collapsed (widget replaces text)\n      marker.collapsed = true;\n      marker.widgetNode = eltP(\"span\", [marker.replacedWith], \"CodeMirror-widget\");\n      if (!options.handleMouseEvents) { marker.widgetNode.setAttribute(\"cm-ignore-events\", \"true\"); }\n      if (options.insertLeft) { marker.widgetNode.insertLeft = true; }\n    }\n    if (marker.collapsed) {\n      if (conflictingCollapsedRange(doc, from.line, from, to, marker) ||\n          from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker))\n        { throw new Error(\"Inserting collapsed marker partially overlapping an existing one\") }\n      seeCollapsedSpans();\n    }\n\n    if (marker.addToHistory)\n      { addChangeToHistory(doc, {from: from, to: to, origin: \"markText\"}, doc.sel, NaN); }\n\n    var curLine = from.line, cm = doc.cm, updateMaxLine;\n    doc.iter(curLine, to.line + 1, function (line) {\n      if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine)\n        { updateMaxLine = true; }\n      if (marker.collapsed && curLine != from.line) { updateLineHeight(line, 0); }\n      addMarkedSpan(line, new MarkedSpan(marker,\n                                         curLine == from.line ? from.ch : null,\n                                         curLine == to.line ? to.ch : null));\n      ++curLine;\n    });\n    // lineIsHidden depends on the presence of the spans, so needs a second pass\n    if (marker.collapsed) { doc.iter(from.line, to.line + 1, function (line) {\n      if (lineIsHidden(doc, line)) { updateLineHeight(line, 0); }\n    }); }\n\n    if (marker.clearOnEnter) { on(marker, \"beforeCursorEnter\", function () { return marker.clear(); }); }\n\n    if (marker.readOnly) {\n      seeReadOnlySpans();\n      if (doc.history.done.length || doc.history.undone.length)\n        { doc.clearHistory(); }\n    }\n    if (marker.collapsed) {\n      marker.id = ++nextMarkerId;\n      marker.atomic = true;\n    }\n    if (cm) {\n      // Sync editor state\n      if (updateMaxLine) { cm.curOp.updateMaxLine = true; }\n      if (marker.collapsed)\n        { regChange(cm, from.line, to.line + 1); }\n      else if (marker.className || marker.startStyle || marker.endStyle || marker.css ||\n               marker.attributes || marker.title)\n        { for (var i = from.line; i <= to.line; i++) { regLineChange(cm, i, \"text\"); } }\n      if (marker.atomic) { reCheckSelection(cm.doc); }\n      signalLater(cm, \"markerAdded\", cm, marker);\n    }\n    return marker\n  }\n\n  // SHARED TEXTMARKERS\n\n  // A shared marker spans multiple linked documents. It is\n  // implemented as a meta-marker-object controlling multiple normal\n  // markers.\n  var SharedTextMarker = function(markers, primary) {\n    var this$1 = this;\n\n    this.markers = markers;\n    this.primary = primary;\n    for (var i = 0; i < markers.length; ++i)\n      { markers[i].parent = this$1; }\n  };\n\n  SharedTextMarker.prototype.clear = function () {\n      var this$1 = this;\n\n    if (this.explicitlyCleared) { return }\n    this.explicitlyCleared = true;\n    for (var i = 0; i < this.markers.length; ++i)\n      { this$1.markers[i].clear(); }\n    signalLater(this, \"clear\");\n  };\n\n  SharedTextMarker.prototype.find = function (side, lineObj) {\n    return this.primary.find(side, lineObj)\n  };\n  eventMixin(SharedTextMarker);\n\n  function markTextShared(doc, from, to, options, type) {\n    options = copyObj(options);\n    options.shared = false;\n    var markers = [markText(doc, from, to, options, type)], primary = markers[0];\n    var widget = options.widgetNode;\n    linkedDocs(doc, function (doc) {\n      if (widget) { options.widgetNode = widget.cloneNode(true); }\n      markers.push(markText(doc, clipPos(doc, from), clipPos(doc, to), options, type));\n      for (var i = 0; i < doc.linked.length; ++i)\n        { if (doc.linked[i].isParent) { return } }\n      primary = lst(markers);\n    });\n    return new SharedTextMarker(markers, primary)\n  }\n\n  function findSharedMarkers(doc) {\n    return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function (m) { return m.parent; })\n  }\n\n  function copySharedMarkers(doc, markers) {\n    for (var i = 0; i < markers.length; i++) {\n      var marker = markers[i], pos = marker.find();\n      var mFrom = doc.clipPos(pos.from), mTo = doc.clipPos(pos.to);\n      if (cmp(mFrom, mTo)) {\n        var subMark = markText(doc, mFrom, mTo, marker.primary, marker.primary.type);\n        marker.markers.push(subMark);\n        subMark.parent = marker;\n      }\n    }\n  }\n\n  function detachSharedMarkers(markers) {\n    var loop = function ( i ) {\n      var marker = markers[i], linked = [marker.primary.doc];\n      linkedDocs(marker.primary.doc, function (d) { return linked.push(d); });\n      for (var j = 0; j < marker.markers.length; j++) {\n        var subMarker = marker.markers[j];\n        if (indexOf(linked, subMarker.doc) == -1) {\n          subMarker.parent = null;\n          marker.markers.splice(j--, 1);\n        }\n      }\n    };\n\n    for (var i = 0; i < markers.length; i++) loop( i );\n  }\n\n  var nextDocId = 0;\n  var Doc = function(text, mode, firstLine, lineSep, direction) {\n    if (!(this instanceof Doc)) { return new Doc(text, mode, firstLine, lineSep, direction) }\n    if (firstLine == null) { firstLine = 0; }\n\n    BranchChunk.call(this, [new LeafChunk([new Line(\"\", null)])]);\n    this.first = firstLine;\n    this.scrollTop = this.scrollLeft = 0;\n    this.cantEdit = false;\n    this.cleanGeneration = 1;\n    this.modeFrontier = this.highlightFrontier = firstLine;\n    var start = Pos(firstLine, 0);\n    this.sel = simpleSelection(start);\n    this.history = new History(null);\n    this.id = ++nextDocId;\n    this.modeOption = mode;\n    this.lineSep = lineSep;\n    this.direction = (direction == \"rtl\") ? \"rtl\" : \"ltr\";\n    this.extend = false;\n\n    if (typeof text == \"string\") { text = this.splitLines(text); }\n    updateDoc(this, {from: start, to: start, text: text});\n    setSelection(this, simpleSelection(start), sel_dontScroll);\n  };\n\n  Doc.prototype = createObj(BranchChunk.prototype, {\n    constructor: Doc,\n    // Iterate over the document. Supports two forms -- with only one\n    // argument, it calls that for each line in the document. With\n    // three, it iterates over the range given by the first two (with\n    // the second being non-inclusive).\n    iter: function(from, to, op) {\n      if (op) { this.iterN(from - this.first, to - from, op); }\n      else { this.iterN(this.first, this.first + this.size, from); }\n    },\n\n    // Non-public interface for adding and removing lines.\n    insert: function(at, lines) {\n      var height = 0;\n      for (var i = 0; i < lines.length; ++i) { height += lines[i].height; }\n      this.insertInner(at - this.first, lines, height);\n    },\n    remove: function(at, n) { this.removeInner(at - this.first, n); },\n\n    // From here, the methods are part of the public interface. Most\n    // are also available from CodeMirror (editor) instances.\n\n    getValue: function(lineSep) {\n      var lines = getLines(this, this.first, this.first + this.size);\n      if (lineSep === false) { return lines }\n      return lines.join(lineSep || this.lineSeparator())\n    },\n    setValue: docMethodOp(function(code) {\n      var top = Pos(this.first, 0), last = this.first + this.size - 1;\n      makeChange(this, {from: top, to: Pos(last, getLine(this, last).text.length),\n                        text: this.splitLines(code), origin: \"setValue\", full: true}, true);\n      if (this.cm) { scrollToCoords(this.cm, 0, 0); }\n      setSelection(this, simpleSelection(top), sel_dontScroll);\n    }),\n    replaceRange: function(code, from, to, origin) {\n      from = clipPos(this, from);\n      to = to ? clipPos(this, to) : from;\n      replaceRange(this, code, from, to, origin);\n    },\n    getRange: function(from, to, lineSep) {\n      var lines = getBetween(this, clipPos(this, from), clipPos(this, to));\n      if (lineSep === false) { return lines }\n      return lines.join(lineSep || this.lineSeparator())\n    },\n\n    getLine: function(line) {var l = this.getLineHandle(line); return l && l.text},\n\n    getLineHandle: function(line) {if (isLine(this, line)) { return getLine(this, line) }},\n    getLineNumber: function(line) {return lineNo(line)},\n\n    getLineHandleVisualStart: function(line) {\n      if (typeof line == \"number\") { line = getLine(this, line); }\n      return visualLine(line)\n    },\n\n    lineCount: function() {return this.size},\n    firstLine: function() {return this.first},\n    lastLine: function() {return this.first + this.size - 1},\n\n    clipPos: function(pos) {return clipPos(this, pos)},\n\n    getCursor: function(start) {\n      var range$$1 = this.sel.primary(), pos;\n      if (start == null || start == \"head\") { pos = range$$1.head; }\n      else if (start == \"anchor\") { pos = range$$1.anchor; }\n      else if (start == \"end\" || start == \"to\" || start === false) { pos = range$$1.to(); }\n      else { pos = range$$1.from(); }\n      return pos\n    },\n    listSelections: function() { return this.sel.ranges },\n    somethingSelected: function() {return this.sel.somethingSelected()},\n\n    setCursor: docMethodOp(function(line, ch, options) {\n      setSimpleSelection(this, clipPos(this, typeof line == \"number\" ? Pos(line, ch || 0) : line), null, options);\n    }),\n    setSelection: docMethodOp(function(anchor, head, options) {\n      setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options);\n    }),\n    extendSelection: docMethodOp(function(head, other, options) {\n      extendSelection(this, clipPos(this, head), other && clipPos(this, other), options);\n    }),\n    extendSelections: docMethodOp(function(heads, options) {\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    extendSelectionsBy: docMethodOp(function(f, options) {\n      var heads = map(this.sel.ranges, f);\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    setSelections: docMethodOp(function(ranges, primary, options) {\n      var this$1 = this;\n\n      if (!ranges.length) { return }\n      var out = [];\n      for (var i = 0; i < ranges.length; i++)\n        { out[i] = new Range(clipPos(this$1, ranges[i].anchor),\n                           clipPos(this$1, ranges[i].head)); }\n      if (primary == null) { primary = Math.min(ranges.length - 1, this.sel.primIndex); }\n      setSelection(this, normalizeSelection(this.cm, out, primary), options);\n    }),\n    addSelection: docMethodOp(function(anchor, head, options) {\n      var ranges = this.sel.ranges.slice(0);\n      ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor)));\n      setSelection(this, normalizeSelection(this.cm, ranges, ranges.length - 1), options);\n    }),\n\n    getSelection: function(lineSep) {\n      var this$1 = this;\n\n      var ranges = this.sel.ranges, lines;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this$1, ranges[i].from(), ranges[i].to());\n        lines = lines ? lines.concat(sel) : sel;\n      }\n      if (lineSep === false) { return lines }\n      else { return lines.join(lineSep || this.lineSeparator()) }\n    },\n    getSelections: function(lineSep) {\n      var this$1 = this;\n\n      var parts = [], ranges = this.sel.ranges;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this$1, ranges[i].from(), ranges[i].to());\n        if (lineSep !== false) { sel = sel.join(lineSep || this$1.lineSeparator()); }\n        parts[i] = sel;\n      }\n      return parts\n    },\n    replaceSelection: function(code, collapse, origin) {\n      var dup = [];\n      for (var i = 0; i < this.sel.ranges.length; i++)\n        { dup[i] = code; }\n      this.replaceSelections(dup, collapse, origin || \"+input\");\n    },\n    replaceSelections: docMethodOp(function(code, collapse, origin) {\n      var this$1 = this;\n\n      var changes = [], sel = this.sel;\n      for (var i = 0; i < sel.ranges.length; i++) {\n        var range$$1 = sel.ranges[i];\n        changes[i] = {from: range$$1.from(), to: range$$1.to(), text: this$1.splitLines(code[i]), origin: origin};\n      }\n      var newSel = collapse && collapse != \"end\" && computeReplacedSel(this, changes, collapse);\n      for (var i$1 = changes.length - 1; i$1 >= 0; i$1--)\n        { makeChange(this$1, changes[i$1]); }\n      if (newSel) { setSelectionReplaceHistory(this, newSel); }\n      else if (this.cm) { ensureCursorVisible(this.cm); }\n    }),\n    undo: docMethodOp(function() {makeChangeFromHistory(this, \"undo\");}),\n    redo: docMethodOp(function() {makeChangeFromHistory(this, \"redo\");}),\n    undoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"undo\", true);}),\n    redoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"redo\", true);}),\n\n    setExtending: function(val) {this.extend = val;},\n    getExtending: function() {return this.extend},\n\n    historySize: function() {\n      var hist = this.history, done = 0, undone = 0;\n      for (var i = 0; i < hist.done.length; i++) { if (!hist.done[i].ranges) { ++done; } }\n      for (var i$1 = 0; i$1 < hist.undone.length; i$1++) { if (!hist.undone[i$1].ranges) { ++undone; } }\n      return {undo: done, redo: undone}\n    },\n    clearHistory: function() {this.history = new History(this.history.maxGeneration);},\n\n    markClean: function() {\n      this.cleanGeneration = this.changeGeneration(true);\n    },\n    changeGeneration: function(forceSplit) {\n      if (forceSplit)\n        { this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null; }\n      return this.history.generation\n    },\n    isClean: function (gen) {\n      return this.history.generation == (gen || this.cleanGeneration)\n    },\n\n    getHistory: function() {\n      return {done: copyHistoryArray(this.history.done),\n              undone: copyHistoryArray(this.history.undone)}\n    },\n    setHistory: function(histData) {\n      var hist = this.history = new History(this.history.maxGeneration);\n      hist.done = copyHistoryArray(histData.done.slice(0), null, true);\n      hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);\n    },\n\n    setGutterMarker: docMethodOp(function(line, gutterID, value) {\n      return changeLine(this, line, \"gutter\", function (line) {\n        var markers = line.gutterMarkers || (line.gutterMarkers = {});\n        markers[gutterID] = value;\n        if (!value && isEmpty(markers)) { line.gutterMarkers = null; }\n        return true\n      })\n    }),\n\n    clearGutter: docMethodOp(function(gutterID) {\n      var this$1 = this;\n\n      this.iter(function (line) {\n        if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\n          changeLine(this$1, line, \"gutter\", function () {\n            line.gutterMarkers[gutterID] = null;\n            if (isEmpty(line.gutterMarkers)) { line.gutterMarkers = null; }\n            return true\n          });\n        }\n      });\n    }),\n\n    lineInfo: function(line) {\n      var n;\n      if (typeof line == \"number\") {\n        if (!isLine(this, line)) { return null }\n        n = line;\n        line = getLine(this, line);\n        if (!line) { return null }\n      } else {\n        n = lineNo(line);\n        if (n == null) { return null }\n      }\n      return {line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,\n              textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,\n              widgets: line.widgets}\n    },\n\n    addLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\"\n                 : where == \"background\" ? \"bgClass\"\n                 : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        if (!line[prop]) { line[prop] = cls; }\n        else if (classTest(cls).test(line[prop])) { return false }\n        else { line[prop] += \" \" + cls; }\n        return true\n      })\n    }),\n    removeLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\"\n                 : where == \"background\" ? \"bgClass\"\n                 : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        var cur = line[prop];\n        if (!cur) { return false }\n        else if (cls == null) { line[prop] = null; }\n        else {\n          var found = cur.match(classTest(cls));\n          if (!found) { return false }\n          var end = found.index + found[0].length;\n          line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \"\" : \" \") + cur.slice(end) || null;\n        }\n        return true\n      })\n    }),\n\n    addLineWidget: docMethodOp(function(handle, node, options) {\n      return addLineWidget(this, handle, node, options)\n    }),\n    removeLineWidget: function(widget) { widget.clear(); },\n\n    markText: function(from, to, options) {\n      return markText(this, clipPos(this, from), clipPos(this, to), options, options && options.type || \"range\")\n    },\n    setBookmark: function(pos, options) {\n      var realOpts = {replacedWith: options && (options.nodeType == null ? options.widget : options),\n                      insertLeft: options && options.insertLeft,\n                      clearWhenEmpty: false, shared: options && options.shared,\n                      handleMouseEvents: options && options.handleMouseEvents};\n      pos = clipPos(this, pos);\n      return markText(this, pos, pos, realOpts, \"bookmark\")\n    },\n    findMarksAt: function(pos) {\n      pos = clipPos(this, pos);\n      var markers = [], spans = getLine(this, pos.line).markedSpans;\n      if (spans) { for (var i = 0; i < spans.length; ++i) {\n        var span = spans[i];\n        if ((span.from == null || span.from <= pos.ch) &&\n            (span.to == null || span.to >= pos.ch))\n          { markers.push(span.marker.parent || span.marker); }\n      } }\n      return markers\n    },\n    findMarks: function(from, to, filter) {\n      from = clipPos(this, from); to = clipPos(this, to);\n      var found = [], lineNo$$1 = from.line;\n      this.iter(from.line, to.line + 1, function (line) {\n        var spans = line.markedSpans;\n        if (spans) { for (var i = 0; i < spans.length; i++) {\n          var span = spans[i];\n          if (!(span.to != null && lineNo$$1 == from.line && from.ch >= span.to ||\n                span.from == null && lineNo$$1 != from.line ||\n                span.from != null && lineNo$$1 == to.line && span.from >= to.ch) &&\n              (!filter || filter(span.marker)))\n            { found.push(span.marker.parent || span.marker); }\n        } }\n        ++lineNo$$1;\n      });\n      return found\n    },\n    getAllMarks: function() {\n      var markers = [];\n      this.iter(function (line) {\n        var sps = line.markedSpans;\n        if (sps) { for (var i = 0; i < sps.length; ++i)\n          { if (sps[i].from != null) { markers.push(sps[i].marker); } } }\n      });\n      return markers\n    },\n\n    posFromIndex: function(off) {\n      var ch, lineNo$$1 = this.first, sepSize = this.lineSeparator().length;\n      this.iter(function (line) {\n        var sz = line.text.length + sepSize;\n        if (sz > off) { ch = off; return true }\n        off -= sz;\n        ++lineNo$$1;\n      });\n      return clipPos(this, Pos(lineNo$$1, ch))\n    },\n    indexFromPos: function (coords) {\n      coords = clipPos(this, coords);\n      var index = coords.ch;\n      if (coords.line < this.first || coords.ch < 0) { return 0 }\n      var sepSize = this.lineSeparator().length;\n      this.iter(this.first, coords.line, function (line) { // iter aborts when callback returns a truthy value\n        index += line.text.length + sepSize;\n      });\n      return index\n    },\n\n    copy: function(copyHistory) {\n      var doc = new Doc(getLines(this, this.first, this.first + this.size),\n                        this.modeOption, this.first, this.lineSep, this.direction);\n      doc.scrollTop = this.scrollTop; doc.scrollLeft = this.scrollLeft;\n      doc.sel = this.sel;\n      doc.extend = false;\n      if (copyHistory) {\n        doc.history.undoDepth = this.history.undoDepth;\n        doc.setHistory(this.getHistory());\n      }\n      return doc\n    },\n\n    linkedDoc: function(options) {\n      if (!options) { options = {}; }\n      var from = this.first, to = this.first + this.size;\n      if (options.from != null && options.from > from) { from = options.from; }\n      if (options.to != null && options.to < to) { to = options.to; }\n      var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep, this.direction);\n      if (options.sharedHist) { copy.history = this.history\n      ; }(this.linked || (this.linked = [])).push({doc: copy, sharedHist: options.sharedHist});\n      copy.linked = [{doc: this, isParent: true, sharedHist: options.sharedHist}];\n      copySharedMarkers(copy, findSharedMarkers(this));\n      return copy\n    },\n    unlinkDoc: function(other) {\n      var this$1 = this;\n\n      if (other instanceof CodeMirror) { other = other.doc; }\n      if (this.linked) { for (var i = 0; i < this.linked.length; ++i) {\n        var link = this$1.linked[i];\n        if (link.doc != other) { continue }\n        this$1.linked.splice(i, 1);\n        other.unlinkDoc(this$1);\n        detachSharedMarkers(findSharedMarkers(this$1));\n        break\n      } }\n      // If the histories were shared, split them again\n      if (other.history == this.history) {\n        var splitIds = [other.id];\n        linkedDocs(other, function (doc) { return splitIds.push(doc.id); }, true);\n        other.history = new History(null);\n        other.history.done = copyHistoryArray(this.history.done, splitIds);\n        other.history.undone = copyHistoryArray(this.history.undone, splitIds);\n      }\n    },\n    iterLinkedDocs: function(f) {linkedDocs(this, f);},\n\n    getMode: function() {return this.mode},\n    getEditor: function() {return this.cm},\n\n    splitLines: function(str) {\n      if (this.lineSep) { return str.split(this.lineSep) }\n      return splitLinesAuto(str)\n    },\n    lineSeparator: function() { return this.lineSep || \"\\n\" },\n\n    setDirection: docMethodOp(function (dir) {\n      if (dir != \"rtl\") { dir = \"ltr\"; }\n      if (dir == this.direction) { return }\n      this.direction = dir;\n      this.iter(function (line) { return line.order = null; });\n      if (this.cm) { directionChanged(this.cm); }\n    })\n  });\n\n  // Public alias.\n  Doc.prototype.eachLine = Doc.prototype.iter;\n\n  // Kludge to work around strange IE behavior where it'll sometimes\n  // re-fire a series of drag-related events right after the drop (#1551)\n  var lastDrop = 0;\n\n  function onDrop(e) {\n    var cm = this;\n    clearDragCursor(cm);\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e))\n      { return }\n    e_preventDefault(e);\n    if (ie) { lastDrop = +new Date; }\n    var pos = posFromMouse(cm, e, true), files = e.dataTransfer.files;\n    if (!pos || cm.isReadOnly()) { return }\n    // Might be a file drop, in which case we simply extract the text\n    // and insert it.\n    if (files && files.length && window.FileReader && window.File) {\n      var n = files.length, text = Array(n), read = 0;\n      var loadFile = function (file, i) {\n        if (cm.options.allowDropFileTypes &&\n            indexOf(cm.options.allowDropFileTypes, file.type) == -1)\n          { return }\n\n        var reader = new FileReader;\n        reader.onload = operation(cm, function () {\n          var content = reader.result;\n          if (/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(content)) { content = \"\"; }\n          text[i] = content;\n          if (++read == n) {\n            pos = clipPos(cm.doc, pos);\n            var change = {from: pos, to: pos,\n                          text: cm.doc.splitLines(text.join(cm.doc.lineSeparator())),\n                          origin: \"paste\"};\n            makeChange(cm.doc, change);\n            setSelectionReplaceHistory(cm.doc, simpleSelection(pos, changeEnd(change)));\n          }\n        });\n        reader.readAsText(file);\n      };\n      for (var i = 0; i < n; ++i) { loadFile(files[i], i); }\n    } else { // Normal drop\n      // Don't do a replace if the drop happened inside of the selected text.\n      if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\n        cm.state.draggingText(e);\n        // Ensure the editor is re-focused\n        setTimeout(function () { return cm.display.input.focus(); }, 20);\n        return\n      }\n      try {\n        var text$1 = e.dataTransfer.getData(\"Text\");\n        if (text$1) {\n          var selected;\n          if (cm.state.draggingText && !cm.state.draggingText.copy)\n            { selected = cm.listSelections(); }\n          setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));\n          if (selected) { for (var i$1 = 0; i$1 < selected.length; ++i$1)\n            { replaceRange(cm.doc, \"\", selected[i$1].anchor, selected[i$1].head, \"drag\"); } }\n          cm.replaceSelection(text$1, \"around\", \"paste\");\n          cm.display.input.focus();\n        }\n      }\n      catch(e){}\n    }\n  }\n\n  function onDragStart(cm, e) {\n    if (ie && (!cm.state.draggingText || +new Date - lastDrop < 100)) { e_stop(e); return }\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) { return }\n\n    e.dataTransfer.setData(\"Text\", cm.getSelection());\n    e.dataTransfer.effectAllowed = \"copyMove\";\n\n    // Use dummy image instead of default browsers image.\n    // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.\n    if (e.dataTransfer.setDragImage && !safari) {\n      var img = elt(\"img\", null, null, \"position: fixed; left: 0; top: 0;\");\n      img.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n      if (presto) {\n        img.width = img.height = 1;\n        cm.display.wrapper.appendChild(img);\n        // Force a relayout, or Opera won't use our image for some obscure reason\n        img._top = img.offsetTop;\n      }\n      e.dataTransfer.setDragImage(img, 0, 0);\n      if (presto) { img.parentNode.removeChild(img); }\n    }\n  }\n\n  function onDragOver(cm, e) {\n    var pos = posFromMouse(cm, e);\n    if (!pos) { return }\n    var frag = document.createDocumentFragment();\n    drawSelectionCursor(cm, pos, frag);\n    if (!cm.display.dragCursor) {\n      cm.display.dragCursor = elt(\"div\", null, \"CodeMirror-cursors CodeMirror-dragcursors\");\n      cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);\n    }\n    removeChildrenAndAdd(cm.display.dragCursor, frag);\n  }\n\n  function clearDragCursor(cm) {\n    if (cm.display.dragCursor) {\n      cm.display.lineSpace.removeChild(cm.display.dragCursor);\n      cm.display.dragCursor = null;\n    }\n  }\n\n  // These must be handled carefully, because naively registering a\n  // handler for each editor will cause the editors to never be\n  // garbage collected.\n\n  function forEachCodeMirror(f) {\n    if (!document.getElementsByClassName) { return }\n    var byClass = document.getElementsByClassName(\"CodeMirror\"), editors = [];\n    for (var i = 0; i < byClass.length; i++) {\n      var cm = byClass[i].CodeMirror;\n      if (cm) { editors.push(cm); }\n    }\n    if (editors.length) { editors[0].operation(function () {\n      for (var i = 0; i < editors.length; i++) { f(editors[i]); }\n    }); }\n  }\n\n  var globalsRegistered = false;\n  function ensureGlobalHandlers() {\n    if (globalsRegistered) { return }\n    registerGlobalHandlers();\n    globalsRegistered = true;\n  }\n  function registerGlobalHandlers() {\n    // When the window resizes, we need to refresh active editors.\n    var resizeTimer;\n    on(window, \"resize\", function () {\n      if (resizeTimer == null) { resizeTimer = setTimeout(function () {\n        resizeTimer = null;\n        forEachCodeMirror(onResize);\n      }, 100); }\n    });\n    // When the window loses focus, we want to show the editor as blurred\n    on(window, \"blur\", function () { return forEachCodeMirror(onBlur); });\n  }\n  // Called when the window resizes\n  function onResize(cm) {\n    var d = cm.display;\n    // Might be a text scaling operation, clear size caches.\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n    d.scrollbarsClipped = false;\n    cm.setSize();\n  }\n\n  var keyNames = {\n    3: \"Pause\", 8: \"Backspace\", 9: \"Tab\", 13: \"Enter\", 16: \"Shift\", 17: \"Ctrl\", 18: \"Alt\",\n    19: \"Pause\", 20: \"CapsLock\", 27: \"Esc\", 32: \"Space\", 33: \"PageUp\", 34: \"PageDown\", 35: \"End\",\n    36: \"Home\", 37: \"Left\", 38: \"Up\", 39: \"Right\", 40: \"Down\", 44: \"PrintScrn\", 45: \"Insert\",\n    46: \"Delete\", 59: \";\", 61: \"=\", 91: \"Mod\", 92: \"Mod\", 93: \"Mod\",\n    106: \"*\", 107: \"=\", 109: \"-\", 110: \".\", 111: \"/\", 145: \"ScrollLock\",\n    173: \"-\", 186: \";\", 187: \"=\", 188: \",\", 189: \"-\", 190: \".\", 191: \"/\", 192: \"`\", 219: \"[\", 220: \"\\\\\",\n    221: \"]\", 222: \"'\", 63232: \"Up\", 63233: \"Down\", 63234: \"Left\", 63235: \"Right\", 63272: \"Delete\",\n    63273: \"Home\", 63275: \"End\", 63276: \"PageUp\", 63277: \"PageDown\", 63302: \"Insert\"\n  };\n\n  // Number keys\n  for (var i = 0; i < 10; i++) { keyNames[i + 48] = keyNames[i + 96] = String(i); }\n  // Alphabetic keys\n  for (var i$1 = 65; i$1 <= 90; i$1++) { keyNames[i$1] = String.fromCharCode(i$1); }\n  // Function keys\n  for (var i$2 = 1; i$2 <= 12; i$2++) { keyNames[i$2 + 111] = keyNames[i$2 + 63235] = \"F\" + i$2; }\n\n  var keyMap = {};\n\n  keyMap.basic = {\n    \"Left\": \"goCharLeft\", \"Right\": \"goCharRight\", \"Up\": \"goLineUp\", \"Down\": \"goLineDown\",\n    \"End\": \"goLineEnd\", \"Home\": \"goLineStartSmart\", \"PageUp\": \"goPageUp\", \"PageDown\": \"goPageDown\",\n    \"Delete\": \"delCharAfter\", \"Backspace\": \"delCharBefore\", \"Shift-Backspace\": \"delCharBefore\",\n    \"Tab\": \"defaultTab\", \"Shift-Tab\": \"indentAuto\",\n    \"Enter\": \"newlineAndIndent\", \"Insert\": \"toggleOverwrite\",\n    \"Esc\": \"singleSelection\"\n  };\n  // Note that the save and find-related commands aren't defined by\n  // default. User code or addons can define them. Unknown commands\n  // are simply ignored.\n  keyMap.pcDefault = {\n    \"Ctrl-A\": \"selectAll\", \"Ctrl-D\": \"deleteLine\", \"Ctrl-Z\": \"undo\", \"Shift-Ctrl-Z\": \"redo\", \"Ctrl-Y\": \"redo\",\n    \"Ctrl-Home\": \"goDocStart\", \"Ctrl-End\": \"goDocEnd\", \"Ctrl-Up\": \"goLineUp\", \"Ctrl-Down\": \"goLineDown\",\n    \"Ctrl-Left\": \"goGroupLeft\", \"Ctrl-Right\": \"goGroupRight\", \"Alt-Left\": \"goLineStart\", \"Alt-Right\": \"goLineEnd\",\n    \"Ctrl-Backspace\": \"delGroupBefore\", \"Ctrl-Delete\": \"delGroupAfter\", \"Ctrl-S\": \"save\", \"Ctrl-F\": \"find\",\n    \"Ctrl-G\": \"findNext\", \"Shift-Ctrl-G\": \"findPrev\", \"Shift-Ctrl-F\": \"replace\", \"Shift-Ctrl-R\": \"replaceAll\",\n    \"Ctrl-[\": \"indentLess\", \"Ctrl-]\": \"indentMore\",\n    \"Ctrl-U\": \"undoSelection\", \"Shift-Ctrl-U\": \"redoSelection\", \"Alt-U\": \"redoSelection\",\n    \"fallthrough\": \"basic\"\n  };\n  // Very basic readline/emacs-style bindings, which are standard on Mac.\n  keyMap.emacsy = {\n    \"Ctrl-F\": \"goCharRight\", \"Ctrl-B\": \"goCharLeft\", \"Ctrl-P\": \"goLineUp\", \"Ctrl-N\": \"goLineDown\",\n    \"Alt-F\": \"goWordRight\", \"Alt-B\": \"goWordLeft\", \"Ctrl-A\": \"goLineStart\", \"Ctrl-E\": \"goLineEnd\",\n    \"Ctrl-V\": \"goPageDown\", \"Shift-Ctrl-V\": \"goPageUp\", \"Ctrl-D\": \"delCharAfter\", \"Ctrl-H\": \"delCharBefore\",\n    \"Alt-D\": \"delWordAfter\", \"Alt-Backspace\": \"delWordBefore\", \"Ctrl-K\": \"killLine\", \"Ctrl-T\": \"transposeChars\",\n    \"Ctrl-O\": \"openLine\"\n  };\n  keyMap.macDefault = {\n    \"Cmd-A\": \"selectAll\", \"Cmd-D\": \"deleteLine\", \"Cmd-Z\": \"undo\", \"Shift-Cmd-Z\": \"redo\", \"Cmd-Y\": \"redo\",\n    \"Cmd-Home\": \"goDocStart\", \"Cmd-Up\": \"goDocStart\", \"Cmd-End\": \"goDocEnd\", \"Cmd-Down\": \"goDocEnd\", \"Alt-Left\": \"goGroupLeft\",\n    \"Alt-Right\": \"goGroupRight\", \"Cmd-Left\": \"goLineLeft\", \"Cmd-Right\": \"goLineRight\", \"Alt-Backspace\": \"delGroupBefore\",\n    \"Ctrl-Alt-Backspace\": \"delGroupAfter\", \"Alt-Delete\": \"delGroupAfter\", \"Cmd-S\": \"save\", \"Cmd-F\": \"find\",\n    \"Cmd-G\": \"findNext\", \"Shift-Cmd-G\": \"findPrev\", \"Cmd-Alt-F\": \"replace\", \"Shift-Cmd-Alt-F\": \"replaceAll\",\n    \"Cmd-[\": \"indentLess\", \"Cmd-]\": \"indentMore\", \"Cmd-Backspace\": \"delWrappedLineLeft\", \"Cmd-Delete\": \"delWrappedLineRight\",\n    \"Cmd-U\": \"undoSelection\", \"Shift-Cmd-U\": \"redoSelection\", \"Ctrl-Up\": \"goDocStart\", \"Ctrl-Down\": \"goDocEnd\",\n    \"fallthrough\": [\"basic\", \"emacsy\"]\n  };\n  keyMap[\"default\"] = mac ? keyMap.macDefault : keyMap.pcDefault;\n\n  // KEYMAP DISPATCH\n\n  function normalizeKeyName(name) {\n    var parts = name.split(/-(?!$)/);\n    name = parts[parts.length - 1];\n    var alt, ctrl, shift, cmd;\n    for (var i = 0; i < parts.length - 1; i++) {\n      var mod = parts[i];\n      if (/^(cmd|meta|m)$/i.test(mod)) { cmd = true; }\n      else if (/^a(lt)?$/i.test(mod)) { alt = true; }\n      else if (/^(c|ctrl|control)$/i.test(mod)) { ctrl = true; }\n      else if (/^s(hift)?$/i.test(mod)) { shift = true; }\n      else { throw new Error(\"Unrecognized modifier name: \" + mod) }\n    }\n    if (alt) { name = \"Alt-\" + name; }\n    if (ctrl) { name = \"Ctrl-\" + name; }\n    if (cmd) { name = \"Cmd-\" + name; }\n    if (shift) { name = \"Shift-\" + name; }\n    return name\n  }\n\n  // This is a kludge to keep keymaps mostly working as raw objects\n  // (backwards compatibility) while at the same time support features\n  // like normalization and multi-stroke key bindings. It compiles a\n  // new normalized keymap, and then updates the old object to reflect\n  // this.\n  function normalizeKeyMap(keymap) {\n    var copy = {};\n    for (var keyname in keymap) { if (keymap.hasOwnProperty(keyname)) {\n      var value = keymap[keyname];\n      if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) { continue }\n      if (value == \"...\") { delete keymap[keyname]; continue }\n\n      var keys = map(keyname.split(\" \"), normalizeKeyName);\n      for (var i = 0; i < keys.length; i++) {\n        var val = (void 0), name = (void 0);\n        if (i == keys.length - 1) {\n          name = keys.join(\" \");\n          val = value;\n        } else {\n          name = keys.slice(0, i + 1).join(\" \");\n          val = \"...\";\n        }\n        var prev = copy[name];\n        if (!prev) { copy[name] = val; }\n        else if (prev != val) { throw new Error(\"Inconsistent bindings for \" + name) }\n      }\n      delete keymap[keyname];\n    } }\n    for (var prop in copy) { keymap[prop] = copy[prop]; }\n    return keymap\n  }\n\n  function lookupKey(key, map$$1, handle, context) {\n    map$$1 = getKeyMap(map$$1);\n    var found = map$$1.call ? map$$1.call(key, context) : map$$1[key];\n    if (found === false) { return \"nothing\" }\n    if (found === \"...\") { return \"multi\" }\n    if (found != null && handle(found)) { return \"handled\" }\n\n    if (map$$1.fallthrough) {\n      if (Object.prototype.toString.call(map$$1.fallthrough) != \"[object Array]\")\n        { return lookupKey(key, map$$1.fallthrough, handle, context) }\n      for (var i = 0; i < map$$1.fallthrough.length; i++) {\n        var result = lookupKey(key, map$$1.fallthrough[i], handle, context);\n        if (result) { return result }\n      }\n    }\n  }\n\n  // Modifier key presses don't count as 'real' key presses for the\n  // purpose of keymap fallthrough.\n  function isModifierKey(value) {\n    var name = typeof value == \"string\" ? value : keyNames[value.keyCode];\n    return name == \"Ctrl\" || name == \"Alt\" || name == \"Shift\" || name == \"Mod\"\n  }\n\n  function addModifierNames(name, event, noShift) {\n    var base = name;\n    if (event.altKey && base != \"Alt\") { name = \"Alt-\" + name; }\n    if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \"Ctrl\") { name = \"Ctrl-\" + name; }\n    if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \"Cmd\") { name = \"Cmd-\" + name; }\n    if (!noShift && event.shiftKey && base != \"Shift\") { name = \"Shift-\" + name; }\n    return name\n  }\n\n  // Look up the name of a key as indicated by an event object.\n  function keyName(event, noShift) {\n    if (presto && event.keyCode == 34 && event[\"char\"]) { return false }\n    var name = keyNames[event.keyCode];\n    if (name == null || event.altGraphKey) { return false }\n    // Ctrl-ScrollLock has keyCode 3, same as Ctrl-Pause,\n    // so we'll use event.code when available (Chrome 48+, FF 38+, Safari 10.1+)\n    if (event.keyCode == 3 && event.code) { name = event.code; }\n    return addModifierNames(name, event, noShift)\n  }\n\n  function getKeyMap(val) {\n    return typeof val == \"string\" ? keyMap[val] : val\n  }\n\n  // Helper for deleting text near the selection(s), used to implement\n  // backspace, delete, and similar functionality.\n  function deleteNearSelection(cm, compute) {\n    var ranges = cm.doc.sel.ranges, kill = [];\n    // Build up a set of ranges to kill first, merging overlapping\n    // ranges.\n    for (var i = 0; i < ranges.length; i++) {\n      var toKill = compute(ranges[i]);\n      while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\n        var replaced = kill.pop();\n        if (cmp(replaced.from, toKill.from) < 0) {\n          toKill.from = replaced.from;\n          break\n        }\n      }\n      kill.push(toKill);\n    }\n    // Next, remove those actual ranges.\n    runInOp(cm, function () {\n      for (var i = kill.length - 1; i >= 0; i--)\n        { replaceRange(cm.doc, \"\", kill[i].from, kill[i].to, \"+delete\"); }\n      ensureCursorVisible(cm);\n    });\n  }\n\n  function moveCharLogically(line, ch, dir) {\n    var target = skipExtendingChars(line.text, ch + dir, dir);\n    return target < 0 || target > line.text.length ? null : target\n  }\n\n  function moveLogically(line, start, dir) {\n    var ch = moveCharLogically(line, start.ch, dir);\n    return ch == null ? null : new Pos(start.line, ch, dir < 0 ? \"after\" : \"before\")\n  }\n\n  function endOfLine(visually, cm, lineObj, lineNo, dir) {\n    if (visually) {\n      var order = getOrder(lineObj, cm.doc.direction);\n      if (order) {\n        var part = dir < 0 ? lst(order) : order[0];\n        var moveInStorageOrder = (dir < 0) == (part.level == 1);\n        var sticky = moveInStorageOrder ? \"after\" : \"before\";\n        var ch;\n        // With a wrapped rtl chunk (possibly spanning multiple bidi parts),\n        // it could be that the last bidi part is not on the last visual line,\n        // since visual lines contain content order-consecutive chunks.\n        // Thus, in rtl, we are looking for the first (content-order) character\n        // in the rtl chunk that is on the last line (that is, the same line\n        // as the last (content-order) character).\n        if (part.level > 0 || cm.doc.direction == \"rtl\") {\n          var prep = prepareMeasureForLine(cm, lineObj);\n          ch = dir < 0 ? lineObj.text.length - 1 : 0;\n          var targetTop = measureCharPrepared(cm, prep, ch).top;\n          ch = findFirst(function (ch) { return measureCharPrepared(cm, prep, ch).top == targetTop; }, (dir < 0) == (part.level == 1) ? part.from : part.to - 1, ch);\n          if (sticky == \"before\") { ch = moveCharLogically(lineObj, ch, 1); }\n        } else { ch = dir < 0 ? part.to : part.from; }\n        return new Pos(lineNo, ch, sticky)\n      }\n    }\n    return new Pos(lineNo, dir < 0 ? lineObj.text.length : 0, dir < 0 ? \"before\" : \"after\")\n  }\n\n  function moveVisually(cm, line, start, dir) {\n    var bidi = getOrder(line, cm.doc.direction);\n    if (!bidi) { return moveLogically(line, start, dir) }\n    if (start.ch >= line.text.length) {\n      start.ch = line.text.length;\n      start.sticky = \"before\";\n    } else if (start.ch <= 0) {\n      start.ch = 0;\n      start.sticky = \"after\";\n    }\n    var partPos = getBidiPartAt(bidi, start.ch, start.sticky), part = bidi[partPos];\n    if (cm.doc.direction == \"ltr\" && part.level % 2 == 0 && (dir > 0 ? part.to > start.ch : part.from < start.ch)) {\n      // Case 1: We move within an ltr part in an ltr editor. Even with wrapped lines,\n      // nothing interesting happens.\n      return moveLogically(line, start, dir)\n    }\n\n    var mv = function (pos, dir) { return moveCharLogically(line, pos instanceof Pos ? pos.ch : pos, dir); };\n    var prep;\n    var getWrappedLineExtent = function (ch) {\n      if (!cm.options.lineWrapping) { return {begin: 0, end: line.text.length} }\n      prep = prep || prepareMeasureForLine(cm, line);\n      return wrappedLineExtentChar(cm, line, prep, ch)\n    };\n    var wrappedLineExtent = getWrappedLineExtent(start.sticky == \"before\" ? mv(start, -1) : start.ch);\n\n    if (cm.doc.direction == \"rtl\" || part.level == 1) {\n      var moveInStorageOrder = (part.level == 1) == (dir < 0);\n      var ch = mv(start, moveInStorageOrder ? 1 : -1);\n      if (ch != null && (!moveInStorageOrder ? ch >= part.from && ch >= wrappedLineExtent.begin : ch <= part.to && ch <= wrappedLineExtent.end)) {\n        // Case 2: We move within an rtl part or in an rtl editor on the same visual line\n        var sticky = moveInStorageOrder ? \"before\" : \"after\";\n        return new Pos(start.line, ch, sticky)\n      }\n    }\n\n    // Case 3: Could not move within this bidi part in this visual line, so leave\n    // the current bidi part\n\n    var searchInVisualLine = function (partPos, dir, wrappedLineExtent) {\n      var getRes = function (ch, moveInStorageOrder) { return moveInStorageOrder\n        ? new Pos(start.line, mv(ch, 1), \"before\")\n        : new Pos(start.line, ch, \"after\"); };\n\n      for (; partPos >= 0 && partPos < bidi.length; partPos += dir) {\n        var part = bidi[partPos];\n        var moveInStorageOrder = (dir > 0) == (part.level != 1);\n        var ch = moveInStorageOrder ? wrappedLineExtent.begin : mv(wrappedLineExtent.end, -1);\n        if (part.from <= ch && ch < part.to) { return getRes(ch, moveInStorageOrder) }\n        ch = moveInStorageOrder ? part.from : mv(part.to, -1);\n        if (wrappedLineExtent.begin <= ch && ch < wrappedLineExtent.end) { return getRes(ch, moveInStorageOrder) }\n      }\n    };\n\n    // Case 3a: Look for other bidi parts on the same visual line\n    var res = searchInVisualLine(partPos + dir, dir, wrappedLineExtent);\n    if (res) { return res }\n\n    // Case 3b: Look for other bidi parts on the next visual line\n    var nextCh = dir > 0 ? wrappedLineExtent.end : mv(wrappedLineExtent.begin, -1);\n    if (nextCh != null && !(dir > 0 && nextCh == line.text.length)) {\n      res = searchInVisualLine(dir > 0 ? 0 : bidi.length - 1, dir, getWrappedLineExtent(nextCh));\n      if (res) { return res }\n    }\n\n    // Case 4: Nowhere to move\n    return null\n  }\n\n  // Commands are parameter-less actions that can be performed on an\n  // editor, mostly used for keybindings.\n  var commands = {\n    selectAll: selectAll,\n    singleSelection: function (cm) { return cm.setSelection(cm.getCursor(\"anchor\"), cm.getCursor(\"head\"), sel_dontScroll); },\n    killLine: function (cm) { return deleteNearSelection(cm, function (range) {\n      if (range.empty()) {\n        var len = getLine(cm.doc, range.head.line).text.length;\n        if (range.head.ch == len && range.head.line < cm.lastLine())\n          { return {from: range.head, to: Pos(range.head.line + 1, 0)} }\n        else\n          { return {from: range.head, to: Pos(range.head.line, len)} }\n      } else {\n        return {from: range.from(), to: range.to()}\n      }\n    }); },\n    deleteLine: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n      from: Pos(range.from().line, 0),\n      to: clipPos(cm.doc, Pos(range.to().line + 1, 0))\n    }); }); },\n    delLineLeft: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n      from: Pos(range.from().line, 0), to: range.from()\n    }); }); },\n    delWrappedLineLeft: function (cm) { return deleteNearSelection(cm, function (range) {\n      var top = cm.charCoords(range.head, \"div\").top + 5;\n      var leftPos = cm.coordsChar({left: 0, top: top}, \"div\");\n      return {from: leftPos, to: range.from()}\n    }); },\n    delWrappedLineRight: function (cm) { return deleteNearSelection(cm, function (range) {\n      var top = cm.charCoords(range.head, \"div\").top + 5;\n      var rightPos = cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\");\n      return {from: range.from(), to: rightPos }\n    }); },\n    undo: function (cm) { return cm.undo(); },\n    redo: function (cm) { return cm.redo(); },\n    undoSelection: function (cm) { return cm.undoSelection(); },\n    redoSelection: function (cm) { return cm.redoSelection(); },\n    goDocStart: function (cm) { return cm.extendSelection(Pos(cm.firstLine(), 0)); },\n    goDocEnd: function (cm) { return cm.extendSelection(Pos(cm.lastLine())); },\n    goLineStart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStart(cm, range.head.line); },\n      {origin: \"+move\", bias: 1}\n    ); },\n    goLineStartSmart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStartSmart(cm, range.head); },\n      {origin: \"+move\", bias: 1}\n    ); },\n    goLineEnd: function (cm) { return cm.extendSelectionsBy(function (range) { return lineEnd(cm, range.head.line); },\n      {origin: \"+move\", bias: -1}\n    ); },\n    goLineRight: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      return cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\")\n    }, sel_move); },\n    goLineLeft: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      return cm.coordsChar({left: 0, top: top}, \"div\")\n    }, sel_move); },\n    goLineLeftSmart: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      var pos = cm.coordsChar({left: 0, top: top}, \"div\");\n      if (pos.ch < cm.getLine(pos.line).search(/\\S/)) { return lineStartSmart(cm, range.head) }\n      return pos\n    }, sel_move); },\n    goLineUp: function (cm) { return cm.moveV(-1, \"line\"); },\n    goLineDown: function (cm) { return cm.moveV(1, \"line\"); },\n    goPageUp: function (cm) { return cm.moveV(-1, \"page\"); },\n    goPageDown: function (cm) { return cm.moveV(1, \"page\"); },\n    goCharLeft: function (cm) { return cm.moveH(-1, \"char\"); },\n    goCharRight: function (cm) { return cm.moveH(1, \"char\"); },\n    goColumnLeft: function (cm) { return cm.moveH(-1, \"column\"); },\n    goColumnRight: function (cm) { return cm.moveH(1, \"column\"); },\n    goWordLeft: function (cm) { return cm.moveH(-1, \"word\"); },\n    goGroupRight: function (cm) { return cm.moveH(1, \"group\"); },\n    goGroupLeft: function (cm) { return cm.moveH(-1, \"group\"); },\n    goWordRight: function (cm) { return cm.moveH(1, \"word\"); },\n    delCharBefore: function (cm) { return cm.deleteH(-1, \"char\"); },\n    delCharAfter: function (cm) { return cm.deleteH(1, \"char\"); },\n    delWordBefore: function (cm) { return cm.deleteH(-1, \"word\"); },\n    delWordAfter: function (cm) { return cm.deleteH(1, \"word\"); },\n    delGroupBefore: function (cm) { return cm.deleteH(-1, \"group\"); },\n    delGroupAfter: function (cm) { return cm.deleteH(1, \"group\"); },\n    indentAuto: function (cm) { return cm.indentSelection(\"smart\"); },\n    indentMore: function (cm) { return cm.indentSelection(\"add\"); },\n    indentLess: function (cm) { return cm.indentSelection(\"subtract\"); },\n    insertTab: function (cm) { return cm.replaceSelection(\"\\t\"); },\n    insertSoftTab: function (cm) {\n      var spaces = [], ranges = cm.listSelections(), tabSize = cm.options.tabSize;\n      for (var i = 0; i < ranges.length; i++) {\n        var pos = ranges[i].from();\n        var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);\n        spaces.push(spaceStr(tabSize - col % tabSize));\n      }\n      cm.replaceSelections(spaces);\n    },\n    defaultTab: function (cm) {\n      if (cm.somethingSelected()) { cm.indentSelection(\"add\"); }\n      else { cm.execCommand(\"insertTab\"); }\n    },\n    // Swap the two chars left and right of each selection's head.\n    // Move cursor behind the two swapped characters afterwards.\n    //\n    // Doesn't consider line feeds a character.\n    // Doesn't scan more than one line above to find a character.\n    // Doesn't do anything on an empty line.\n    // Doesn't do anything with non-empty selections.\n    transposeChars: function (cm) { return runInOp(cm, function () {\n      var ranges = cm.listSelections(), newSel = [];\n      for (var i = 0; i < ranges.length; i++) {\n        if (!ranges[i].empty()) { continue }\n        var cur = ranges[i].head, line = getLine(cm.doc, cur.line).text;\n        if (line) {\n          if (cur.ch == line.length) { cur = new Pos(cur.line, cur.ch - 1); }\n          if (cur.ch > 0) {\n            cur = new Pos(cur.line, cur.ch + 1);\n            cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2),\n                            Pos(cur.line, cur.ch - 2), cur, \"+transpose\");\n          } else if (cur.line > cm.doc.first) {\n            var prev = getLine(cm.doc, cur.line - 1).text;\n            if (prev) {\n              cur = new Pos(cur.line, 1);\n              cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() +\n                              prev.charAt(prev.length - 1),\n                              Pos(cur.line - 1, prev.length - 1), cur, \"+transpose\");\n            }\n          }\n        }\n        newSel.push(new Range(cur, cur));\n      }\n      cm.setSelections(newSel);\n    }); },\n    newlineAndIndent: function (cm) { return runInOp(cm, function () {\n      var sels = cm.listSelections();\n      for (var i = sels.length - 1; i >= 0; i--)\n        { cm.replaceRange(cm.doc.lineSeparator(), sels[i].anchor, sels[i].head, \"+input\"); }\n      sels = cm.listSelections();\n      for (var i$1 = 0; i$1 < sels.length; i$1++)\n        { cm.indentLine(sels[i$1].from().line, null, true); }\n      ensureCursorVisible(cm);\n    }); },\n    openLine: function (cm) { return cm.replaceSelection(\"\\n\", \"start\"); },\n    toggleOverwrite: function (cm) { return cm.toggleOverwrite(); }\n  };\n\n\n  function lineStart(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLine(line);\n    if (visual != line) { lineN = lineNo(visual); }\n    return endOfLine(true, cm, visual, lineN, 1)\n  }\n  function lineEnd(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLineEnd(line);\n    if (visual != line) { lineN = lineNo(visual); }\n    return endOfLine(true, cm, line, lineN, -1)\n  }\n  function lineStartSmart(cm, pos) {\n    var start = lineStart(cm, pos.line);\n    var line = getLine(cm.doc, start.line);\n    var order = getOrder(line, cm.doc.direction);\n    if (!order || order[0].level == 0) {\n      var firstNonWS = Math.max(0, line.text.search(/\\S/));\n      var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;\n      return Pos(start.line, inWS ? 0 : firstNonWS, start.sticky)\n    }\n    return start\n  }\n\n  // Run a handler that was bound to a key.\n  function doHandleBinding(cm, bound, dropShift) {\n    if (typeof bound == \"string\") {\n      bound = commands[bound];\n      if (!bound) { return false }\n    }\n    // Ensure previous input has been read, so that the handler sees a\n    // consistent view of the document\n    cm.display.input.ensurePolled();\n    var prevShift = cm.display.shift, done = false;\n    try {\n      if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\n      if (dropShift) { cm.display.shift = false; }\n      done = bound(cm) != Pass;\n    } finally {\n      cm.display.shift = prevShift;\n      cm.state.suppressEdits = false;\n    }\n    return done\n  }\n\n  function lookupKeyForEditor(cm, name, handle) {\n    for (var i = 0; i < cm.state.keyMaps.length; i++) {\n      var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);\n      if (result) { return result }\n    }\n    return (cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm))\n      || lookupKey(name, cm.options.keyMap, handle, cm)\n  }\n\n  // Note that, despite the name, this function is also used to check\n  // for bound mouse clicks.\n\n  var stopSeq = new Delayed;\n\n  function dispatchKey(cm, name, e, handle) {\n    var seq = cm.state.keySeq;\n    if (seq) {\n      if (isModifierKey(name)) { return \"handled\" }\n      if (/\\'$/.test(name))\n        { cm.state.keySeq = null; }\n      else\n        { stopSeq.set(50, function () {\n          if (cm.state.keySeq == seq) {\n            cm.state.keySeq = null;\n            cm.display.input.reset();\n          }\n        }); }\n      if (dispatchKeyInner(cm, seq + \" \" + name, e, handle)) { return true }\n    }\n    return dispatchKeyInner(cm, name, e, handle)\n  }\n\n  function dispatchKeyInner(cm, name, e, handle) {\n    var result = lookupKeyForEditor(cm, name, handle);\n\n    if (result == \"multi\")\n      { cm.state.keySeq = name; }\n    if (result == \"handled\")\n      { signalLater(cm, \"keyHandled\", cm, name, e); }\n\n    if (result == \"handled\" || result == \"multi\") {\n      e_preventDefault(e);\n      restartBlink(cm);\n    }\n\n    return !!result\n  }\n\n  // Handle a key from the keydown event.\n  function handleKeyBinding(cm, e) {\n    var name = keyName(e, true);\n    if (!name) { return false }\n\n    if (e.shiftKey && !cm.state.keySeq) {\n      // First try to resolve full name (including 'Shift-'). Failing\n      // that, see if there is a cursor-motion command (starting with\n      // 'go') bound to the keyname without 'Shift-'.\n      return dispatchKey(cm, \"Shift-\" + name, e, function (b) { return doHandleBinding(cm, b, true); })\n          || dispatchKey(cm, name, e, function (b) {\n               if (typeof b == \"string\" ? /^go[A-Z]/.test(b) : b.motion)\n                 { return doHandleBinding(cm, b) }\n             })\n    } else {\n      return dispatchKey(cm, name, e, function (b) { return doHandleBinding(cm, b); })\n    }\n  }\n\n  // Handle a key from the keypress event\n  function handleCharBinding(cm, e, ch) {\n    return dispatchKey(cm, \"'\" + ch + \"'\", e, function (b) { return doHandleBinding(cm, b, true); })\n  }\n\n  var lastStoppedKey = null;\n  function onKeyDown(e) {\n    var cm = this;\n    cm.curOp.focus = activeElt();\n    if (signalDOMEvent(cm, e)) { return }\n    // IE does strange things with escape.\n    if (ie && ie_version < 11 && e.keyCode == 27) { e.returnValue = false; }\n    var code = e.keyCode;\n    cm.display.shift = code == 16 || e.shiftKey;\n    var handled = handleKeyBinding(cm, e);\n    if (presto) {\n      lastStoppedKey = handled ? code : null;\n      // Opera has no cut event... we try to at least catch the key combo\n      if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey))\n        { cm.replaceSelection(\"\", null, \"cut\"); }\n    }\n\n    // Turn mouse into crosshair when Alt is held on Mac.\n    if (code == 18 && !/\\bCodeMirror-crosshair\\b/.test(cm.display.lineDiv.className))\n      { showCrossHair(cm); }\n  }\n\n  function showCrossHair(cm) {\n    var lineDiv = cm.display.lineDiv;\n    addClass(lineDiv, \"CodeMirror-crosshair\");\n\n    function up(e) {\n      if (e.keyCode == 18 || !e.altKey) {\n        rmClass(lineDiv, \"CodeMirror-crosshair\");\n        off(document, \"keyup\", up);\n        off(document, \"mouseover\", up);\n      }\n    }\n    on(document, \"keyup\", up);\n    on(document, \"mouseover\", up);\n  }\n\n  function onKeyUp(e) {\n    if (e.keyCode == 16) { this.doc.sel.shift = false; }\n    signalDOMEvent(this, e);\n  }\n\n  function onKeyPress(e) {\n    var cm = this;\n    if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) { return }\n    var keyCode = e.keyCode, charCode = e.charCode;\n    if (presto && keyCode == lastStoppedKey) {lastStoppedKey = null; e_preventDefault(e); return}\n    if ((presto && (!e.which || e.which < 10)) && handleKeyBinding(cm, e)) { return }\n    var ch = String.fromCharCode(charCode == null ? keyCode : charCode);\n    // Some browsers fire keypress events for backspace\n    if (ch == \"\\x08\") { return }\n    if (handleCharBinding(cm, e, ch)) { return }\n    cm.display.input.onKeyPress(e);\n  }\n\n  var DOUBLECLICK_DELAY = 400;\n\n  var PastClick = function(time, pos, button) {\n    this.time = time;\n    this.pos = pos;\n    this.button = button;\n  };\n\n  PastClick.prototype.compare = function (time, pos, button) {\n    return this.time + DOUBLECLICK_DELAY > time &&\n      cmp(pos, this.pos) == 0 && button == this.button\n  };\n\n  var lastClick, lastDoubleClick;\n  function clickRepeat(pos, button) {\n    var now = +new Date;\n    if (lastDoubleClick && lastDoubleClick.compare(now, pos, button)) {\n      lastClick = lastDoubleClick = null;\n      return \"triple\"\n    } else if (lastClick && lastClick.compare(now, pos, button)) {\n      lastDoubleClick = new PastClick(now, pos, button);\n      lastClick = null;\n      return \"double\"\n    } else {\n      lastClick = new PastClick(now, pos, button);\n      lastDoubleClick = null;\n      return \"single\"\n    }\n  }\n\n  // A mouse down can be a single click, double click, triple click,\n  // start of selection drag, start of text drag, new cursor\n  // (ctrl-click), rectangle drag (alt-drag), or xwin\n  // middle-click-paste. Or it might be a click on something we should\n  // not interfere with, such as a scrollbar or widget.\n  function onMouseDown(e) {\n    var cm = this, display = cm.display;\n    if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) { return }\n    display.input.ensurePolled();\n    display.shift = e.shiftKey;\n\n    if (eventInWidget(display, e)) {\n      if (!webkit) {\n        // Briefly turn off draggability, to allow widgets to do\n        // normal dragging things.\n        display.scroller.draggable = false;\n        setTimeout(function () { return display.scroller.draggable = true; }, 100);\n      }\n      return\n    }\n    if (clickInGutter(cm, e)) { return }\n    var pos = posFromMouse(cm, e), button = e_button(e), repeat = pos ? clickRepeat(pos, button) : \"single\";\n    window.focus();\n\n    // #3261: make sure, that we're not starting a second selection\n    if (button == 1 && cm.state.selectingText)\n      { cm.state.selectingText(e); }\n\n    if (pos && handleMappedButton(cm, button, pos, repeat, e)) { return }\n\n    if (button == 1) {\n      if (pos) { leftButtonDown(cm, pos, repeat, e); }\n      else if (e_target(e) == display.scroller) { e_preventDefault(e); }\n    } else if (button == 2) {\n      if (pos) { extendSelection(cm.doc, pos); }\n      setTimeout(function () { return display.input.focus(); }, 20);\n    } else if (button == 3) {\n      if (captureRightClick) { cm.display.input.onContextMenu(e); }\n      else { delayBlurEvent(cm); }\n    }\n  }\n\n  function handleMappedButton(cm, button, pos, repeat, event) {\n    var name = \"Click\";\n    if (repeat == \"double\") { name = \"Double\" + name; }\n    else if (repeat == \"triple\") { name = \"Triple\" + name; }\n    name = (button == 1 ? \"Left\" : button == 2 ? \"Middle\" : \"Right\") + name;\n\n    return dispatchKey(cm,  addModifierNames(name, event), event, function (bound) {\n      if (typeof bound == \"string\") { bound = commands[bound]; }\n      if (!bound) { return false }\n      var done = false;\n      try {\n        if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\n        done = bound(cm, pos) != Pass;\n      } finally {\n        cm.state.suppressEdits = false;\n      }\n      return done\n    })\n  }\n\n  function configureMouse(cm, repeat, event) {\n    var option = cm.getOption(\"configureMouse\");\n    var value = option ? option(cm, repeat, event) : {};\n    if (value.unit == null) {\n      var rect = chromeOS ? event.shiftKey && event.metaKey : event.altKey;\n      value.unit = rect ? \"rectangle\" : repeat == \"single\" ? \"char\" : repeat == \"double\" ? \"word\" : \"line\";\n    }\n    if (value.extend == null || cm.doc.extend) { value.extend = cm.doc.extend || event.shiftKey; }\n    if (value.addNew == null) { value.addNew = mac ? event.metaKey : event.ctrlKey; }\n    if (value.moveOnDrag == null) { value.moveOnDrag = !(mac ? event.altKey : event.ctrlKey); }\n    return value\n  }\n\n  function leftButtonDown(cm, pos, repeat, event) {\n    if (ie) { setTimeout(bind(ensureFocus, cm), 0); }\n    else { cm.curOp.focus = activeElt(); }\n\n    var behavior = configureMouse(cm, repeat, event);\n\n    var sel = cm.doc.sel, contained;\n    if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() &&\n        repeat == \"single\" && (contained = sel.contains(pos)) > -1 &&\n        (cmp((contained = sel.ranges[contained]).from(), pos) < 0 || pos.xRel > 0) &&\n        (cmp(contained.to(), pos) > 0 || pos.xRel < 0))\n      { leftButtonStartDrag(cm, event, pos, behavior); }\n    else\n      { leftButtonSelect(cm, event, pos, behavior); }\n  }\n\n  // Start a text drag. When it ends, see if any dragging actually\n  // happen, and treat as a click if it didn't.\n  function leftButtonStartDrag(cm, event, pos, behavior) {\n    var display = cm.display, moved = false;\n    var dragEnd = operation(cm, function (e) {\n      if (webkit) { display.scroller.draggable = false; }\n      cm.state.draggingText = false;\n      off(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n      off(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n      off(display.scroller, \"dragstart\", dragStart);\n      off(display.scroller, \"drop\", dragEnd);\n      if (!moved) {\n        e_preventDefault(e);\n        if (!behavior.addNew)\n          { extendSelection(cm.doc, pos, null, null, behavior.extend); }\n        // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)\n        if (webkit || ie && ie_version == 9)\n          { setTimeout(function () {display.wrapper.ownerDocument.body.focus(); display.input.focus();}, 20); }\n        else\n          { display.input.focus(); }\n      }\n    });\n    var mouseMove = function(e2) {\n      moved = moved || Math.abs(event.clientX - e2.clientX) + Math.abs(event.clientY - e2.clientY) >= 10;\n    };\n    var dragStart = function () { return moved = true; };\n    // Let the drag handler handle this.\n    if (webkit) { display.scroller.draggable = true; }\n    cm.state.draggingText = dragEnd;\n    dragEnd.copy = !behavior.moveOnDrag;\n    // IE's approach to draggable\n    if (display.scroller.dragDrop) { display.scroller.dragDrop(); }\n    on(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n    on(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n    on(display.scroller, \"dragstart\", dragStart);\n    on(display.scroller, \"drop\", dragEnd);\n\n    delayBlurEvent(cm);\n    setTimeout(function () { return display.input.focus(); }, 20);\n  }\n\n  function rangeForUnit(cm, pos, unit) {\n    if (unit == \"char\") { return new Range(pos, pos) }\n    if (unit == \"word\") { return cm.findWordAt(pos) }\n    if (unit == \"line\") { return new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))) }\n    var result = unit(cm, pos);\n    return new Range(result.from, result.to)\n  }\n\n  // Normal selection, as opposed to text dragging.\n  function leftButtonSelect(cm, event, start, behavior) {\n    var display = cm.display, doc = cm.doc;\n    e_preventDefault(event);\n\n    var ourRange, ourIndex, startSel = doc.sel, ranges = startSel.ranges;\n    if (behavior.addNew && !behavior.extend) {\n      ourIndex = doc.sel.contains(start);\n      if (ourIndex > -1)\n        { ourRange = ranges[ourIndex]; }\n      else\n        { ourRange = new Range(start, start); }\n    } else {\n      ourRange = doc.sel.primary();\n      ourIndex = doc.sel.primIndex;\n    }\n\n    if (behavior.unit == \"rectangle\") {\n      if (!behavior.addNew) { ourRange = new Range(start, start); }\n      start = posFromMouse(cm, event, true, true);\n      ourIndex = -1;\n    } else {\n      var range$$1 = rangeForUnit(cm, start, behavior.unit);\n      if (behavior.extend)\n        { ourRange = extendRange(ourRange, range$$1.anchor, range$$1.head, behavior.extend); }\n      else\n        { ourRange = range$$1; }\n    }\n\n    if (!behavior.addNew) {\n      ourIndex = 0;\n      setSelection(doc, new Selection([ourRange], 0), sel_mouse);\n      startSel = doc.sel;\n    } else if (ourIndex == -1) {\n      ourIndex = ranges.length;\n      setSelection(doc, normalizeSelection(cm, ranges.concat([ourRange]), ourIndex),\n                   {scroll: false, origin: \"*mouse\"});\n    } else if (ranges.length > 1 && ranges[ourIndex].empty() && behavior.unit == \"char\" && !behavior.extend) {\n      setSelection(doc, normalizeSelection(cm, ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0),\n                   {scroll: false, origin: \"*mouse\"});\n      startSel = doc.sel;\n    } else {\n      replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);\n    }\n\n    var lastPos = start;\n    function extendTo(pos) {\n      if (cmp(lastPos, pos) == 0) { return }\n      lastPos = pos;\n\n      if (behavior.unit == \"rectangle\") {\n        var ranges = [], tabSize = cm.options.tabSize;\n        var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);\n        var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);\n        var left = Math.min(startCol, posCol), right = Math.max(startCol, posCol);\n        for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line));\n             line <= end; line++) {\n          var text = getLine(doc, line).text, leftPos = findColumn(text, left, tabSize);\n          if (left == right)\n            { ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos))); }\n          else if (text.length > leftPos)\n            { ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize)))); }\n        }\n        if (!ranges.length) { ranges.push(new Range(start, start)); }\n        setSelection(doc, normalizeSelection(cm, startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex),\n                     {origin: \"*mouse\", scroll: false});\n        cm.scrollIntoView(pos);\n      } else {\n        var oldRange = ourRange;\n        var range$$1 = rangeForUnit(cm, pos, behavior.unit);\n        var anchor = oldRange.anchor, head;\n        if (cmp(range$$1.anchor, anchor) > 0) {\n          head = range$$1.head;\n          anchor = minPos(oldRange.from(), range$$1.anchor);\n        } else {\n          head = range$$1.anchor;\n          anchor = maxPos(oldRange.to(), range$$1.head);\n        }\n        var ranges$1 = startSel.ranges.slice(0);\n        ranges$1[ourIndex] = bidiSimplify(cm, new Range(clipPos(doc, anchor), head));\n        setSelection(doc, normalizeSelection(cm, ranges$1, ourIndex), sel_mouse);\n      }\n    }\n\n    var editorSize = display.wrapper.getBoundingClientRect();\n    // Used to ensure timeout re-tries don't fire when another extend\n    // happened in the meantime (clearTimeout isn't reliable -- at\n    // least on Chrome, the timeouts still happen even when cleared,\n    // if the clear happens after their scheduled firing time).\n    var counter = 0;\n\n    function extend(e) {\n      var curCount = ++counter;\n      var cur = posFromMouse(cm, e, true, behavior.unit == \"rectangle\");\n      if (!cur) { return }\n      if (cmp(cur, lastPos) != 0) {\n        cm.curOp.focus = activeElt();\n        extendTo(cur);\n        var visible = visibleLines(display, doc);\n        if (cur.line >= visible.to || cur.line < visible.from)\n          { setTimeout(operation(cm, function () {if (counter == curCount) { extend(e); }}), 150); }\n      } else {\n        var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;\n        if (outside) { setTimeout(operation(cm, function () {\n          if (counter != curCount) { return }\n          display.scroller.scrollTop += outside;\n          extend(e);\n        }), 50); }\n      }\n    }\n\n    function done(e) {\n      cm.state.selectingText = false;\n      counter = Infinity;\n      // If e is null or undefined we interpret this as someone trying\n      // to explicitly cancel the selection rather than the user\n      // letting go of the mouse button.\n      if (e) {\n        e_preventDefault(e);\n        display.input.focus();\n      }\n      off(display.wrapper.ownerDocument, \"mousemove\", move);\n      off(display.wrapper.ownerDocument, \"mouseup\", up);\n      doc.history.lastSelOrigin = null;\n    }\n\n    var move = operation(cm, function (e) {\n      if (e.buttons === 0 || !e_button(e)) { done(e); }\n      else { extend(e); }\n    });\n    var up = operation(cm, done);\n    cm.state.selectingText = up;\n    on(display.wrapper.ownerDocument, \"mousemove\", move);\n    on(display.wrapper.ownerDocument, \"mouseup\", up);\n  }\n\n  // Used when mouse-selecting to adjust the anchor to the proper side\n  // of a bidi jump depending on the visual position of the head.\n  function bidiSimplify(cm, range$$1) {\n    var anchor = range$$1.anchor;\n    var head = range$$1.head;\n    var anchorLine = getLine(cm.doc, anchor.line);\n    if (cmp(anchor, head) == 0 && anchor.sticky == head.sticky) { return range$$1 }\n    var order = getOrder(anchorLine);\n    if (!order) { return range$$1 }\n    var index = getBidiPartAt(order, anchor.ch, anchor.sticky), part = order[index];\n    if (part.from != anchor.ch && part.to != anchor.ch) { return range$$1 }\n    var boundary = index + ((part.from == anchor.ch) == (part.level != 1) ? 0 : 1);\n    if (boundary == 0 || boundary == order.length) { return range$$1 }\n\n    // Compute the relative visual position of the head compared to the\n    // anchor (<0 is to the left, >0 to the right)\n    var leftSide;\n    if (head.line != anchor.line) {\n      leftSide = (head.line - anchor.line) * (cm.doc.direction == \"ltr\" ? 1 : -1) > 0;\n    } else {\n      var headIndex = getBidiPartAt(order, head.ch, head.sticky);\n      var dir = headIndex - index || (head.ch - anchor.ch) * (part.level == 1 ? -1 : 1);\n      if (headIndex == boundary - 1 || headIndex == boundary)\n        { leftSide = dir < 0; }\n      else\n        { leftSide = dir > 0; }\n    }\n\n    var usePart = order[boundary + (leftSide ? -1 : 0)];\n    var from = leftSide == (usePart.level == 1);\n    var ch = from ? usePart.from : usePart.to, sticky = from ? \"after\" : \"before\";\n    return anchor.ch == ch && anchor.sticky == sticky ? range$$1 : new Range(new Pos(anchor.line, ch, sticky), head)\n  }\n\n\n  // Determines whether an event happened in the gutter, and fires the\n  // handlers for the corresponding event.\n  function gutterEvent(cm, e, type, prevent) {\n    var mX, mY;\n    if (e.touches) {\n      mX = e.touches[0].clientX;\n      mY = e.touches[0].clientY;\n    } else {\n      try { mX = e.clientX; mY = e.clientY; }\n      catch(e) { return false }\n    }\n    if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) { return false }\n    if (prevent) { e_preventDefault(e); }\n\n    var display = cm.display;\n    var lineBox = display.lineDiv.getBoundingClientRect();\n\n    if (mY > lineBox.bottom || !hasHandler(cm, type)) { return e_defaultPrevented(e) }\n    mY -= lineBox.top - display.viewOffset;\n\n    for (var i = 0; i < cm.display.gutterSpecs.length; ++i) {\n      var g = display.gutters.childNodes[i];\n      if (g && g.getBoundingClientRect().right >= mX) {\n        var line = lineAtHeight(cm.doc, mY);\n        var gutter = cm.display.gutterSpecs[i];\n        signal(cm, type, cm, line, gutter.className, e);\n        return e_defaultPrevented(e)\n      }\n    }\n  }\n\n  function clickInGutter(cm, e) {\n    return gutterEvent(cm, e, \"gutterClick\", true)\n  }\n\n  // CONTEXT MENU HANDLING\n\n  // To make the context menu work, we need to briefly unhide the\n  // textarea (making it as unobtrusive as possible) to let the\n  // right-click take effect on it.\n  function onContextMenu(cm, e) {\n    if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) { return }\n    if (signalDOMEvent(cm, e, \"contextmenu\")) { return }\n    if (!captureRightClick) { cm.display.input.onContextMenu(e); }\n  }\n\n  function contextMenuInGutter(cm, e) {\n    if (!hasHandler(cm, \"gutterContextMenu\")) { return false }\n    return gutterEvent(cm, e, \"gutterContextMenu\", false)\n  }\n\n  function themeChanged(cm) {\n    cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") +\n      cm.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\");\n    clearCaches(cm);\n  }\n\n  var Init = {toString: function(){return \"CodeMirror.Init\"}};\n\n  var defaults = {};\n  var optionHandlers = {};\n\n  function defineOptions(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n\n    function option(name, deflt, handle, notOnInit) {\n      CodeMirror.defaults[name] = deflt;\n      if (handle) { optionHandlers[name] =\n        notOnInit ? function (cm, val, old) {if (old != Init) { handle(cm, val, old); }} : handle; }\n    }\n\n    CodeMirror.defineOption = option;\n\n    // Passed to option handlers when there is no old value.\n    CodeMirror.Init = Init;\n\n    // These two are, on init, called from the constructor because they\n    // have to be initialized before the editor can start at all.\n    option(\"value\", \"\", function (cm, val) { return cm.setValue(val); }, true);\n    option(\"mode\", null, function (cm, val) {\n      cm.doc.modeOption = val;\n      loadMode(cm);\n    }, true);\n\n    option(\"indentUnit\", 2, loadMode, true);\n    option(\"indentWithTabs\", false);\n    option(\"smartIndent\", true);\n    option(\"tabSize\", 4, function (cm) {\n      resetModeState(cm);\n      clearCaches(cm);\n      regChange(cm);\n    }, true);\n\n    option(\"lineSeparator\", null, function (cm, val) {\n      cm.doc.lineSep = val;\n      if (!val) { return }\n      var newBreaks = [], lineNo = cm.doc.first;\n      cm.doc.iter(function (line) {\n        for (var pos = 0;;) {\n          var found = line.text.indexOf(val, pos);\n          if (found == -1) { break }\n          pos = found + val.length;\n          newBreaks.push(Pos(lineNo, found));\n        }\n        lineNo++;\n      });\n      for (var i = newBreaks.length - 1; i >= 0; i--)\n        { replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length)); }\n    });\n    option(\"specialChars\", /[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b-\\u200f\\u2028\\u2029\\ufeff\\ufff9-\\ufffc]/g, function (cm, val, old) {\n      cm.state.specialChars = new RegExp(val.source + (val.test(\"\\t\") ? \"\" : \"|\\t\"), \"g\");\n      if (old != Init) { cm.refresh(); }\n    });\n    option(\"specialCharPlaceholder\", defaultSpecialCharPlaceholder, function (cm) { return cm.refresh(); }, true);\n    option(\"electricChars\", true);\n    option(\"inputStyle\", mobile ? \"contenteditable\" : \"textarea\", function () {\n      throw new Error(\"inputStyle can not (yet) be changed in a running editor\") // FIXME\n    }, true);\n    option(\"spellcheck\", false, function (cm, val) { return cm.getInputField().spellcheck = val; }, true);\n    option(\"autocorrect\", false, function (cm, val) { return cm.getInputField().autocorrect = val; }, true);\n    option(\"autocapitalize\", false, function (cm, val) { return cm.getInputField().autocapitalize = val; }, true);\n    option(\"rtlMoveVisually\", !windows);\n    option(\"wholeLineUpdateBefore\", true);\n\n    option(\"theme\", \"default\", function (cm) {\n      themeChanged(cm);\n      updateGutters(cm);\n    }, true);\n    option(\"keyMap\", \"default\", function (cm, val, old) {\n      var next = getKeyMap(val);\n      var prev = old != Init && getKeyMap(old);\n      if (prev && prev.detach) { prev.detach(cm, next); }\n      if (next.attach) { next.attach(cm, prev || null); }\n    });\n    option(\"extraKeys\", null);\n    option(\"configureMouse\", null);\n\n    option(\"lineWrapping\", false, wrappingChanged, true);\n    option(\"gutters\", [], function (cm, val) {\n      cm.display.gutterSpecs = getGutters(val, cm.options.lineNumbers);\n      updateGutters(cm);\n    }, true);\n    option(\"fixedGutter\", true, function (cm, val) {\n      cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \"px\" : \"0\";\n      cm.refresh();\n    }, true);\n    option(\"coverGutterNextToScrollbar\", false, function (cm) { return updateScrollbars(cm); }, true);\n    option(\"scrollbarStyle\", \"native\", function (cm) {\n      initScrollbars(cm);\n      updateScrollbars(cm);\n      cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);\n      cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);\n    }, true);\n    option(\"lineNumbers\", false, function (cm, val) {\n      cm.display.gutterSpecs = getGutters(cm.options.gutters, val);\n      updateGutters(cm);\n    }, true);\n    option(\"firstLineNumber\", 1, updateGutters, true);\n    option(\"lineNumberFormatter\", function (integer) { return integer; }, updateGutters, true);\n    option(\"showCursorWhenSelecting\", false, updateSelection, true);\n\n    option(\"resetSelectionOnContextMenu\", true);\n    option(\"lineWiseCopyCut\", true);\n    option(\"pasteLinesPerSelection\", true);\n    option(\"selectionsMayTouch\", false);\n\n    option(\"readOnly\", false, function (cm, val) {\n      if (val == \"nocursor\") {\n        onBlur(cm);\n        cm.display.input.blur();\n      }\n      cm.display.input.readOnlyChanged(val);\n    });\n    option(\"disableInput\", false, function (cm, val) {if (!val) { cm.display.input.reset(); }}, true);\n    option(\"dragDrop\", true, dragDropChanged);\n    option(\"allowDropFileTypes\", null);\n\n    option(\"cursorBlinkRate\", 530);\n    option(\"cursorScrollMargin\", 0);\n    option(\"cursorHeight\", 1, updateSelection, true);\n    option(\"singleCursorHeightPerLine\", true, updateSelection, true);\n    option(\"workTime\", 100);\n    option(\"workDelay\", 100);\n    option(\"flattenSpans\", true, resetModeState, true);\n    option(\"addModeClass\", false, resetModeState, true);\n    option(\"pollInterval\", 100);\n    option(\"undoDepth\", 200, function (cm, val) { return cm.doc.history.undoDepth = val; });\n    option(\"historyEventDelay\", 1250);\n    option(\"viewportMargin\", 10, function (cm) { return cm.refresh(); }, true);\n    option(\"maxHighlightLength\", 10000, resetModeState, true);\n    option(\"moveInputWithCursor\", true, function (cm, val) {\n      if (!val) { cm.display.input.resetPosition(); }\n    });\n\n    option(\"tabindex\", null, function (cm, val) { return cm.display.input.getField().tabIndex = val || \"\"; });\n    option(\"autofocus\", null);\n    option(\"direction\", \"ltr\", function (cm, val) { return cm.doc.setDirection(val); }, true);\n    option(\"phrases\", null);\n  }\n\n  function dragDropChanged(cm, value, old) {\n    var wasOn = old && old != Init;\n    if (!value != !wasOn) {\n      var funcs = cm.display.dragFunctions;\n      var toggle = value ? on : off;\n      toggle(cm.display.scroller, \"dragstart\", funcs.start);\n      toggle(cm.display.scroller, \"dragenter\", funcs.enter);\n      toggle(cm.display.scroller, \"dragover\", funcs.over);\n      toggle(cm.display.scroller, \"dragleave\", funcs.leave);\n      toggle(cm.display.scroller, \"drop\", funcs.drop);\n    }\n  }\n\n  function wrappingChanged(cm) {\n    if (cm.options.lineWrapping) {\n      addClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      cm.display.sizer.style.minWidth = \"\";\n      cm.display.sizerWidth = null;\n    } else {\n      rmClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      findMaxLine(cm);\n    }\n    estimateLineHeights(cm);\n    regChange(cm);\n    clearCaches(cm);\n    setTimeout(function () { return updateScrollbars(cm); }, 100);\n  }\n\n  // A CodeMirror instance represents an editor. This is the object\n  // that user code is usually dealing with.\n\n  function CodeMirror(place, options) {\n    var this$1 = this;\n\n    if (!(this instanceof CodeMirror)) { return new CodeMirror(place, options) }\n\n    this.options = options = options ? copyObj(options) : {};\n    // Determine effective options based on given values and defaults.\n    copyObj(defaults, options, false);\n\n    var doc = options.value;\n    if (typeof doc == \"string\") { doc = new Doc(doc, options.mode, null, options.lineSeparator, options.direction); }\n    else if (options.mode) { doc.modeOption = options.mode; }\n    this.doc = doc;\n\n    var input = new CodeMirror.inputStyles[options.inputStyle](this);\n    var display = this.display = new Display(place, doc, input, options);\n    display.wrapper.CodeMirror = this;\n    themeChanged(this);\n    if (options.lineWrapping)\n      { this.display.wrapper.className += \" CodeMirror-wrap\"; }\n    initScrollbars(this);\n\n    this.state = {\n      keyMaps: [],  // stores maps added by addKeyMap\n      overlays: [], // highlighting overlays, as added by addOverlay\n      modeGen: 0,   // bumped when mode/overlay changes, used to invalidate highlighting info\n      overwrite: false,\n      delayingBlurEvent: false,\n      focused: false,\n      suppressEdits: false, // used to disable editing during key handlers when in readOnly mode\n      pasteIncoming: -1, cutIncoming: -1, // help recognize paste/cut edits in input.poll\n      selectingText: false,\n      draggingText: false,\n      highlight: new Delayed(), // stores highlight worker timeout\n      keySeq: null,  // Unfinished key sequence\n      specialChars: null\n    };\n\n    if (options.autofocus && !mobile) { display.input.focus(); }\n\n    // Override magic textarea content restore that IE sometimes does\n    // on our hidden textarea on reload\n    if (ie && ie_version < 11) { setTimeout(function () { return this$1.display.input.reset(true); }, 20); }\n\n    registerEventHandlers(this);\n    ensureGlobalHandlers();\n\n    startOperation(this);\n    this.curOp.forceUpdate = true;\n    attachDoc(this, doc);\n\n    if ((options.autofocus && !mobile) || this.hasFocus())\n      { setTimeout(bind(onFocus, this), 20); }\n    else\n      { onBlur(this); }\n\n    for (var opt in optionHandlers) { if (optionHandlers.hasOwnProperty(opt))\n      { optionHandlers[opt](this$1, options[opt], Init); } }\n    maybeUpdateLineNumberWidth(this);\n    if (options.finishInit) { options.finishInit(this); }\n    for (var i = 0; i < initHooks.length; ++i) { initHooks[i](this$1); }\n    endOperation(this);\n    // Suppress optimizelegibility in Webkit, since it breaks text\n    // measuring on line wrapping boundaries.\n    if (webkit && options.lineWrapping &&\n        getComputedStyle(display.lineDiv).textRendering == \"optimizelegibility\")\n      { display.lineDiv.style.textRendering = \"auto\"; }\n  }\n\n  // The default configuration options.\n  CodeMirror.defaults = defaults;\n  // Functions to run when options are changed.\n  CodeMirror.optionHandlers = optionHandlers;\n\n  // Attach the necessary event handlers when initializing the editor\n  function registerEventHandlers(cm) {\n    var d = cm.display;\n    on(d.scroller, \"mousedown\", operation(cm, onMouseDown));\n    // Older IE's will not fire a second mousedown for a double click\n    if (ie && ie_version < 11)\n      { on(d.scroller, \"dblclick\", operation(cm, function (e) {\n        if (signalDOMEvent(cm, e)) { return }\n        var pos = posFromMouse(cm, e);\n        if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) { return }\n        e_preventDefault(e);\n        var word = cm.findWordAt(pos);\n        extendSelection(cm.doc, word.anchor, word.head);\n      })); }\n    else\n      { on(d.scroller, \"dblclick\", function (e) { return signalDOMEvent(cm, e) || e_preventDefault(e); }); }\n    // Some browsers fire contextmenu *after* opening the menu, at\n    // which point we can't mess with it anymore. Context menu is\n    // handled in onMouseDown for these browsers.\n    on(d.scroller, \"contextmenu\", function (e) { return onContextMenu(cm, e); });\n\n    // Used to suppress mouse event handling when a touch happens\n    var touchFinished, prevTouch = {end: 0};\n    function finishTouch() {\n      if (d.activeTouch) {\n        touchFinished = setTimeout(function () { return d.activeTouch = null; }, 1000);\n        prevTouch = d.activeTouch;\n        prevTouch.end = +new Date;\n      }\n    }\n    function isMouseLikeTouchEvent(e) {\n      if (e.touches.length != 1) { return false }\n      var touch = e.touches[0];\n      return touch.radiusX <= 1 && touch.radiusY <= 1\n    }\n    function farAway(touch, other) {\n      if (other.left == null) { return true }\n      var dx = other.left - touch.left, dy = other.top - touch.top;\n      return dx * dx + dy * dy > 20 * 20\n    }\n    on(d.scroller, \"touchstart\", function (e) {\n      if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e) && !clickInGutter(cm, e)) {\n        d.input.ensurePolled();\n        clearTimeout(touchFinished);\n        var now = +new Date;\n        d.activeTouch = {start: now, moved: false,\n                         prev: now - prevTouch.end <= 300 ? prevTouch : null};\n        if (e.touches.length == 1) {\n          d.activeTouch.left = e.touches[0].pageX;\n          d.activeTouch.top = e.touches[0].pageY;\n        }\n      }\n    });\n    on(d.scroller, \"touchmove\", function () {\n      if (d.activeTouch) { d.activeTouch.moved = true; }\n    });\n    on(d.scroller, \"touchend\", function (e) {\n      var touch = d.activeTouch;\n      if (touch && !eventInWidget(d, e) && touch.left != null &&\n          !touch.moved && new Date - touch.start < 300) {\n        var pos = cm.coordsChar(d.activeTouch, \"page\"), range;\n        if (!touch.prev || farAway(touch, touch.prev)) // Single tap\n          { range = new Range(pos, pos); }\n        else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap\n          { range = cm.findWordAt(pos); }\n        else // Triple tap\n          { range = new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))); }\n        cm.setSelection(range.anchor, range.head);\n        cm.focus();\n        e_preventDefault(e);\n      }\n      finishTouch();\n    });\n    on(d.scroller, \"touchcancel\", finishTouch);\n\n    // Sync scrolling between fake scrollbars and real scrollable\n    // area, ensure viewport is updated when scrolling.\n    on(d.scroller, \"scroll\", function () {\n      if (d.scroller.clientHeight) {\n        updateScrollTop(cm, d.scroller.scrollTop);\n        setScrollLeft(cm, d.scroller.scrollLeft, true);\n        signal(cm, \"scroll\", cm);\n      }\n    });\n\n    // Listen to wheel events in order to try and update the viewport on time.\n    on(d.scroller, \"mousewheel\", function (e) { return onScrollWheel(cm, e); });\n    on(d.scroller, \"DOMMouseScroll\", function (e) { return onScrollWheel(cm, e); });\n\n    // Prevent wrapper from ever scrolling\n    on(d.wrapper, \"scroll\", function () { return d.wrapper.scrollTop = d.wrapper.scrollLeft = 0; });\n\n    d.dragFunctions = {\n      enter: function (e) {if (!signalDOMEvent(cm, e)) { e_stop(e); }},\n      over: function (e) {if (!signalDOMEvent(cm, e)) { onDragOver(cm, e); e_stop(e); }},\n      start: function (e) { return onDragStart(cm, e); },\n      drop: operation(cm, onDrop),\n      leave: function (e) {if (!signalDOMEvent(cm, e)) { clearDragCursor(cm); }}\n    };\n\n    var inp = d.input.getField();\n    on(inp, \"keyup\", function (e) { return onKeyUp.call(cm, e); });\n    on(inp, \"keydown\", operation(cm, onKeyDown));\n    on(inp, \"keypress\", operation(cm, onKeyPress));\n    on(inp, \"focus\", function (e) { return onFocus(cm, e); });\n    on(inp, \"blur\", function (e) { return onBlur(cm, e); });\n  }\n\n  var initHooks = [];\n  CodeMirror.defineInitHook = function (f) { return initHooks.push(f); };\n\n  // Indent the given line. The how parameter can be \"smart\",\n  // \"add\"/null, \"subtract\", or \"prev\". When aggressive is false\n  // (typically set to true for forced single-line indents), empty\n  // lines are not indented, and places where the mode returns Pass\n  // are left alone.\n  function indentLine(cm, n, how, aggressive) {\n    var doc = cm.doc, state;\n    if (how == null) { how = \"add\"; }\n    if (how == \"smart\") {\n      // Fall back to \"prev\" when the mode doesn't have an indentation\n      // method.\n      if (!doc.mode.indent) { how = \"prev\"; }\n      else { state = getContextBefore(cm, n).state; }\n    }\n\n    var tabSize = cm.options.tabSize;\n    var line = getLine(doc, n), curSpace = countColumn(line.text, null, tabSize);\n    if (line.stateAfter) { line.stateAfter = null; }\n    var curSpaceString = line.text.match(/^\\s*/)[0], indentation;\n    if (!aggressive && !/\\S/.test(line.text)) {\n      indentation = 0;\n      how = \"not\";\n    } else if (how == \"smart\") {\n      indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);\n      if (indentation == Pass || indentation > 150) {\n        if (!aggressive) { return }\n        how = \"prev\";\n      }\n    }\n    if (how == \"prev\") {\n      if (n > doc.first) { indentation = countColumn(getLine(doc, n-1).text, null, tabSize); }\n      else { indentation = 0; }\n    } else if (how == \"add\") {\n      indentation = curSpace + cm.options.indentUnit;\n    } else if (how == \"subtract\") {\n      indentation = curSpace - cm.options.indentUnit;\n    } else if (typeof how == \"number\") {\n      indentation = curSpace + how;\n    }\n    indentation = Math.max(0, indentation);\n\n    var indentString = \"\", pos = 0;\n    if (cm.options.indentWithTabs)\n      { for (var i = Math.floor(indentation / tabSize); i; --i) {pos += tabSize; indentString += \"\\t\";} }\n    if (pos < indentation) { indentString += spaceStr(indentation - pos); }\n\n    if (indentString != curSpaceString) {\n      replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \"+input\");\n      line.stateAfter = null;\n      return true\n    } else {\n      // Ensure that, if the cursor was in the whitespace at the start\n      // of the line, it is moved to the end of that space.\n      for (var i$1 = 0; i$1 < doc.sel.ranges.length; i$1++) {\n        var range = doc.sel.ranges[i$1];\n        if (range.head.line == n && range.head.ch < curSpaceString.length) {\n          var pos$1 = Pos(n, curSpaceString.length);\n          replaceOneSelection(doc, i$1, new Range(pos$1, pos$1));\n          break\n        }\n      }\n    }\n  }\n\n  // This will be set to a {lineWise: bool, text: [string]} object, so\n  // that, when pasting, we know what kind of selections the copied\n  // text was made out of.\n  var lastCopied = null;\n\n  function setLastCopied(newLastCopied) {\n    lastCopied = newLastCopied;\n  }\n\n  function applyTextInput(cm, inserted, deleted, sel, origin) {\n    var doc = cm.doc;\n    cm.display.shift = false;\n    if (!sel) { sel = doc.sel; }\n\n    var recent = +new Date - 200;\n    var paste = origin == \"paste\" || cm.state.pasteIncoming > recent;\n    var textLines = splitLinesAuto(inserted), multiPaste = null;\n    // When pasting N lines into N selections, insert one line per selection\n    if (paste && sel.ranges.length > 1) {\n      if (lastCopied && lastCopied.text.join(\"\\n\") == inserted) {\n        if (sel.ranges.length % lastCopied.text.length == 0) {\n          multiPaste = [];\n          for (var i = 0; i < lastCopied.text.length; i++)\n            { multiPaste.push(doc.splitLines(lastCopied.text[i])); }\n        }\n      } else if (textLines.length == sel.ranges.length && cm.options.pasteLinesPerSelection) {\n        multiPaste = map(textLines, function (l) { return [l]; });\n      }\n    }\n\n    var updateInput = cm.curOp.updateInput;\n    // Normal behavior is to insert the new text into every selection\n    for (var i$1 = sel.ranges.length - 1; i$1 >= 0; i$1--) {\n      var range$$1 = sel.ranges[i$1];\n      var from = range$$1.from(), to = range$$1.to();\n      if (range$$1.empty()) {\n        if (deleted && deleted > 0) // Handle deletion\n          { from = Pos(from.line, from.ch - deleted); }\n        else if (cm.state.overwrite && !paste) // Handle overwrite\n          { to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length)); }\n        else if (paste && lastCopied && lastCopied.lineWise && lastCopied.text.join(\"\\n\") == inserted)\n          { from = to = Pos(from.line, 0); }\n      }\n      var changeEvent = {from: from, to: to, text: multiPaste ? multiPaste[i$1 % multiPaste.length] : textLines,\n                         origin: origin || (paste ? \"paste\" : cm.state.cutIncoming > recent ? \"cut\" : \"+input\")};\n      makeChange(cm.doc, changeEvent);\n      signalLater(cm, \"inputRead\", cm, changeEvent);\n    }\n    if (inserted && !paste)\n      { triggerElectric(cm, inserted); }\n\n    ensureCursorVisible(cm);\n    if (cm.curOp.updateInput < 2) { cm.curOp.updateInput = updateInput; }\n    cm.curOp.typing = true;\n    cm.state.pasteIncoming = cm.state.cutIncoming = -1;\n  }\n\n  function handlePaste(e, cm) {\n    var pasted = e.clipboardData && e.clipboardData.getData(\"Text\");\n    if (pasted) {\n      e.preventDefault();\n      if (!cm.isReadOnly() && !cm.options.disableInput)\n        { runInOp(cm, function () { return applyTextInput(cm, pasted, 0, null, \"paste\"); }); }\n      return true\n    }\n  }\n\n  function triggerElectric(cm, inserted) {\n    // When an 'electric' character is inserted, immediately trigger a reindent\n    if (!cm.options.electricChars || !cm.options.smartIndent) { return }\n    var sel = cm.doc.sel;\n\n    for (var i = sel.ranges.length - 1; i >= 0; i--) {\n      var range$$1 = sel.ranges[i];\n      if (range$$1.head.ch > 100 || (i && sel.ranges[i - 1].head.line == range$$1.head.line)) { continue }\n      var mode = cm.getModeAt(range$$1.head);\n      var indented = false;\n      if (mode.electricChars) {\n        for (var j = 0; j < mode.electricChars.length; j++)\n          { if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\n            indented = indentLine(cm, range$$1.head.line, \"smart\");\n            break\n          } }\n      } else if (mode.electricInput) {\n        if (mode.electricInput.test(getLine(cm.doc, range$$1.head.line).text.slice(0, range$$1.head.ch)))\n          { indented = indentLine(cm, range$$1.head.line, \"smart\"); }\n      }\n      if (indented) { signalLater(cm, \"electricInput\", cm, range$$1.head.line); }\n    }\n  }\n\n  function copyableRanges(cm) {\n    var text = [], ranges = [];\n    for (var i = 0; i < cm.doc.sel.ranges.length; i++) {\n      var line = cm.doc.sel.ranges[i].head.line;\n      var lineRange = {anchor: Pos(line, 0), head: Pos(line + 1, 0)};\n      ranges.push(lineRange);\n      text.push(cm.getRange(lineRange.anchor, lineRange.head));\n    }\n    return {text: text, ranges: ranges}\n  }\n\n  function disableBrowserMagic(field, spellcheck, autocorrect, autocapitalize) {\n    field.setAttribute(\"autocorrect\", autocorrect ? \"\" : \"off\");\n    field.setAttribute(\"autocapitalize\", autocapitalize ? \"\" : \"off\");\n    field.setAttribute(\"spellcheck\", !!spellcheck);\n  }\n\n  function hiddenTextarea() {\n    var te = elt(\"textarea\", null, null, \"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none\");\n    var div = elt(\"div\", [te], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\");\n    // The textarea is kept positioned near the cursor to prevent the\n    // fact that it'll be scrolled into view on input from scrolling\n    // our fake cursor out of view. On webkit, when wrap=off, paste is\n    // very slow. So make the area wide instead.\n    if (webkit) { te.style.width = \"1000px\"; }\n    else { te.setAttribute(\"wrap\", \"off\"); }\n    // If border: 0; -- iOS fails to open keyboard (issue #1287)\n    if (ios) { te.style.border = \"1px solid black\"; }\n    disableBrowserMagic(te);\n    return div\n  }\n\n  // The publicly visible API. Note that methodOp(f) means\n  // 'wrap f in an operation, performed on its `this` parameter'.\n\n  // This is not the complete set of editor methods. Most of the\n  // methods defined on the Doc type are also injected into\n  // CodeMirror.prototype, for backwards compatibility and\n  // convenience.\n\n  function addEditorMethods(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n\n    var helpers = CodeMirror.helpers = {};\n\n    CodeMirror.prototype = {\n      constructor: CodeMirror,\n      focus: function(){window.focus(); this.display.input.focus();},\n\n      setOption: function(option, value) {\n        var options = this.options, old = options[option];\n        if (options[option] == value && option != \"mode\") { return }\n        options[option] = value;\n        if (optionHandlers.hasOwnProperty(option))\n          { operation(this, optionHandlers[option])(this, value, old); }\n        signal(this, \"optionChange\", this, option);\n      },\n\n      getOption: function(option) {return this.options[option]},\n      getDoc: function() {return this.doc},\n\n      addKeyMap: function(map$$1, bottom) {\n        this.state.keyMaps[bottom ? \"push\" : \"unshift\"](getKeyMap(map$$1));\n      },\n      removeKeyMap: function(map$$1) {\n        var maps = this.state.keyMaps;\n        for (var i = 0; i < maps.length; ++i)\n          { if (maps[i] == map$$1 || maps[i].name == map$$1) {\n            maps.splice(i, 1);\n            return true\n          } }\n      },\n\n      addOverlay: methodOp(function(spec, options) {\n        var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);\n        if (mode.startState) { throw new Error(\"Overlays may not be stateful.\") }\n        insertSorted(this.state.overlays,\n                     {mode: mode, modeSpec: spec, opaque: options && options.opaque,\n                      priority: (options && options.priority) || 0},\n                     function (overlay) { return overlay.priority; });\n        this.state.modeGen++;\n        regChange(this);\n      }),\n      removeOverlay: methodOp(function(spec) {\n        var this$1 = this;\n\n        var overlays = this.state.overlays;\n        for (var i = 0; i < overlays.length; ++i) {\n          var cur = overlays[i].modeSpec;\n          if (cur == spec || typeof spec == \"string\" && cur.name == spec) {\n            overlays.splice(i, 1);\n            this$1.state.modeGen++;\n            regChange(this$1);\n            return\n          }\n        }\n      }),\n\n      indentLine: methodOp(function(n, dir, aggressive) {\n        if (typeof dir != \"string\" && typeof dir != \"number\") {\n          if (dir == null) { dir = this.options.smartIndent ? \"smart\" : \"prev\"; }\n          else { dir = dir ? \"add\" : \"subtract\"; }\n        }\n        if (isLine(this.doc, n)) { indentLine(this, n, dir, aggressive); }\n      }),\n      indentSelection: methodOp(function(how) {\n        var this$1 = this;\n\n        var ranges = this.doc.sel.ranges, end = -1;\n        for (var i = 0; i < ranges.length; i++) {\n          var range$$1 = ranges[i];\n          if (!range$$1.empty()) {\n            var from = range$$1.from(), to = range$$1.to();\n            var start = Math.max(end, from.line);\n            end = Math.min(this$1.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;\n            for (var j = start; j < end; ++j)\n              { indentLine(this$1, j, how); }\n            var newRanges = this$1.doc.sel.ranges;\n            if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0)\n              { replaceOneSelection(this$1.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll); }\n          } else if (range$$1.head.line > end) {\n            indentLine(this$1, range$$1.head.line, how, true);\n            end = range$$1.head.line;\n            if (i == this$1.doc.sel.primIndex) { ensureCursorVisible(this$1); }\n          }\n        }\n      }),\n\n      // Fetch the parser token for a given character. Useful for hacks\n      // that want to inspect the mode state (say, for completion).\n      getTokenAt: function(pos, precise) {\n        return takeToken(this, pos, precise)\n      },\n\n      getLineTokens: function(line, precise) {\n        return takeToken(this, Pos(line), precise, true)\n      },\n\n      getTokenTypeAt: function(pos) {\n        pos = clipPos(this.doc, pos);\n        var styles = getLineStyles(this, getLine(this.doc, pos.line));\n        var before = 0, after = (styles.length - 1) / 2, ch = pos.ch;\n        var type;\n        if (ch == 0) { type = styles[2]; }\n        else { for (;;) {\n          var mid = (before + after) >> 1;\n          if ((mid ? styles[mid * 2 - 1] : 0) >= ch) { after = mid; }\n          else if (styles[mid * 2 + 1] < ch) { before = mid + 1; }\n          else { type = styles[mid * 2 + 2]; break }\n        } }\n        var cut = type ? type.indexOf(\"overlay \") : -1;\n        return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1)\n      },\n\n      getModeAt: function(pos) {\n        var mode = this.doc.mode;\n        if (!mode.innerMode) { return mode }\n        return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode\n      },\n\n      getHelper: function(pos, type) {\n        return this.getHelpers(pos, type)[0]\n      },\n\n      getHelpers: function(pos, type) {\n        var this$1 = this;\n\n        var found = [];\n        if (!helpers.hasOwnProperty(type)) { return found }\n        var help = helpers[type], mode = this.getModeAt(pos);\n        if (typeof mode[type] == \"string\") {\n          if (help[mode[type]]) { found.push(help[mode[type]]); }\n        } else if (mode[type]) {\n          for (var i = 0; i < mode[type].length; i++) {\n            var val = help[mode[type][i]];\n            if (val) { found.push(val); }\n          }\n        } else if (mode.helperType && help[mode.helperType]) {\n          found.push(help[mode.helperType]);\n        } else if (help[mode.name]) {\n          found.push(help[mode.name]);\n        }\n        for (var i$1 = 0; i$1 < help._global.length; i$1++) {\n          var cur = help._global[i$1];\n          if (cur.pred(mode, this$1) && indexOf(found, cur.val) == -1)\n            { found.push(cur.val); }\n        }\n        return found\n      },\n\n      getStateAfter: function(line, precise) {\n        var doc = this.doc;\n        line = clipLine(doc, line == null ? doc.first + doc.size - 1: line);\n        return getContextBefore(this, line + 1, precise).state\n      },\n\n      cursorCoords: function(start, mode) {\n        var pos, range$$1 = this.doc.sel.primary();\n        if (start == null) { pos = range$$1.head; }\n        else if (typeof start == \"object\") { pos = clipPos(this.doc, start); }\n        else { pos = start ? range$$1.from() : range$$1.to(); }\n        return cursorCoords(this, pos, mode || \"page\")\n      },\n\n      charCoords: function(pos, mode) {\n        return charCoords(this, clipPos(this.doc, pos), mode || \"page\")\n      },\n\n      coordsChar: function(coords, mode) {\n        coords = fromCoordSystem(this, coords, mode || \"page\");\n        return coordsChar(this, coords.left, coords.top)\n      },\n\n      lineAtHeight: function(height, mode) {\n        height = fromCoordSystem(this, {top: height, left: 0}, mode || \"page\").top;\n        return lineAtHeight(this.doc, height + this.display.viewOffset)\n      },\n      heightAtLine: function(line, mode, includeWidgets) {\n        var end = false, lineObj;\n        if (typeof line == \"number\") {\n          var last = this.doc.first + this.doc.size - 1;\n          if (line < this.doc.first) { line = this.doc.first; }\n          else if (line > last) { line = last; end = true; }\n          lineObj = getLine(this.doc, line);\n        } else {\n          lineObj = line;\n        }\n        return intoCoordSystem(this, lineObj, {top: 0, left: 0}, mode || \"page\", includeWidgets || end).top +\n          (end ? this.doc.height - heightAtLine(lineObj) : 0)\n      },\n\n      defaultTextHeight: function() { return textHeight(this.display) },\n      defaultCharWidth: function() { return charWidth(this.display) },\n\n      getViewport: function() { return {from: this.display.viewFrom, to: this.display.viewTo}},\n\n      addWidget: function(pos, node, scroll, vert, horiz) {\n        var display = this.display;\n        pos = cursorCoords(this, clipPos(this.doc, pos));\n        var top = pos.bottom, left = pos.left;\n        node.style.position = \"absolute\";\n        node.setAttribute(\"cm-ignore-events\", \"true\");\n        this.display.input.setUneditable(node);\n        display.sizer.appendChild(node);\n        if (vert == \"over\") {\n          top = pos.top;\n        } else if (vert == \"above\" || vert == \"near\") {\n          var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\n          hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);\n          // Default to positioning above (if specified and possible); otherwise default to positioning below\n          if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight)\n            { top = pos.top - node.offsetHeight; }\n          else if (pos.bottom + node.offsetHeight <= vspace)\n            { top = pos.bottom; }\n          if (left + node.offsetWidth > hspace)\n            { left = hspace - node.offsetWidth; }\n        }\n        node.style.top = top + \"px\";\n        node.style.left = node.style.right = \"\";\n        if (horiz == \"right\") {\n          left = display.sizer.clientWidth - node.offsetWidth;\n          node.style.right = \"0px\";\n        } else {\n          if (horiz == \"left\") { left = 0; }\n          else if (horiz == \"middle\") { left = (display.sizer.clientWidth - node.offsetWidth) / 2; }\n          node.style.left = left + \"px\";\n        }\n        if (scroll)\n          { scrollIntoView(this, {left: left, top: top, right: left + node.offsetWidth, bottom: top + node.offsetHeight}); }\n      },\n\n      triggerOnKeyDown: methodOp(onKeyDown),\n      triggerOnKeyPress: methodOp(onKeyPress),\n      triggerOnKeyUp: onKeyUp,\n      triggerOnMouseDown: methodOp(onMouseDown),\n\n      execCommand: function(cmd) {\n        if (commands.hasOwnProperty(cmd))\n          { return commands[cmd].call(null, this) }\n      },\n\n      triggerElectric: methodOp(function(text) { triggerElectric(this, text); }),\n\n      findPosH: function(from, amount, unit, visually) {\n        var this$1 = this;\n\n        var dir = 1;\n        if (amount < 0) { dir = -1; amount = -amount; }\n        var cur = clipPos(this.doc, from);\n        for (var i = 0; i < amount; ++i) {\n          cur = findPosH(this$1.doc, cur, dir, unit, visually);\n          if (cur.hitSide) { break }\n        }\n        return cur\n      },\n\n      moveH: methodOp(function(dir, unit) {\n        var this$1 = this;\n\n        this.extendSelectionsBy(function (range$$1) {\n          if (this$1.display.shift || this$1.doc.extend || range$$1.empty())\n            { return findPosH(this$1.doc, range$$1.head, dir, unit, this$1.options.rtlMoveVisually) }\n          else\n            { return dir < 0 ? range$$1.from() : range$$1.to() }\n        }, sel_move);\n      }),\n\n      deleteH: methodOp(function(dir, unit) {\n        var sel = this.doc.sel, doc = this.doc;\n        if (sel.somethingSelected())\n          { doc.replaceSelection(\"\", null, \"+delete\"); }\n        else\n          { deleteNearSelection(this, function (range$$1) {\n            var other = findPosH(doc, range$$1.head, dir, unit, false);\n            return dir < 0 ? {from: other, to: range$$1.head} : {from: range$$1.head, to: other}\n          }); }\n      }),\n\n      findPosV: function(from, amount, unit, goalColumn) {\n        var this$1 = this;\n\n        var dir = 1, x = goalColumn;\n        if (amount < 0) { dir = -1; amount = -amount; }\n        var cur = clipPos(this.doc, from);\n        for (var i = 0; i < amount; ++i) {\n          var coords = cursorCoords(this$1, cur, \"div\");\n          if (x == null) { x = coords.left; }\n          else { coords.left = x; }\n          cur = findPosV(this$1, coords, dir, unit);\n          if (cur.hitSide) { break }\n        }\n        return cur\n      },\n\n      moveV: methodOp(function(dir, unit) {\n        var this$1 = this;\n\n        var doc = this.doc, goals = [];\n        var collapse = !this.display.shift && !doc.extend && doc.sel.somethingSelected();\n        doc.extendSelectionsBy(function (range$$1) {\n          if (collapse)\n            { return dir < 0 ? range$$1.from() : range$$1.to() }\n          var headPos = cursorCoords(this$1, range$$1.head, \"div\");\n          if (range$$1.goalColumn != null) { headPos.left = range$$1.goalColumn; }\n          goals.push(headPos.left);\n          var pos = findPosV(this$1, headPos, dir, unit);\n          if (unit == \"page\" && range$$1 == doc.sel.primary())\n            { addToScrollTop(this$1, charCoords(this$1, pos, \"div\").top - headPos.top); }\n          return pos\n        }, sel_move);\n        if (goals.length) { for (var i = 0; i < doc.sel.ranges.length; i++)\n          { doc.sel.ranges[i].goalColumn = goals[i]; } }\n      }),\n\n      // Find the word at the given position (as returned by coordsChar).\n      findWordAt: function(pos) {\n        var doc = this.doc, line = getLine(doc, pos.line).text;\n        var start = pos.ch, end = pos.ch;\n        if (line) {\n          var helper = this.getHelper(pos, \"wordChars\");\n          if ((pos.sticky == \"before\" || end == line.length) && start) { --start; } else { ++end; }\n          var startChar = line.charAt(start);\n          var check = isWordChar(startChar, helper)\n            ? function (ch) { return isWordChar(ch, helper); }\n            : /\\s/.test(startChar) ? function (ch) { return /\\s/.test(ch); }\n            : function (ch) { return (!/\\s/.test(ch) && !isWordChar(ch)); };\n          while (start > 0 && check(line.charAt(start - 1))) { --start; }\n          while (end < line.length && check(line.charAt(end))) { ++end; }\n        }\n        return new Range(Pos(pos.line, start), Pos(pos.line, end))\n      },\n\n      toggleOverwrite: function(value) {\n        if (value != null && value == this.state.overwrite) { return }\n        if (this.state.overwrite = !this.state.overwrite)\n          { addClass(this.display.cursorDiv, \"CodeMirror-overwrite\"); }\n        else\n          { rmClass(this.display.cursorDiv, \"CodeMirror-overwrite\"); }\n\n        signal(this, \"overwriteToggle\", this, this.state.overwrite);\n      },\n      hasFocus: function() { return this.display.input.getField() == activeElt() },\n      isReadOnly: function() { return !!(this.options.readOnly || this.doc.cantEdit) },\n\n      scrollTo: methodOp(function (x, y) { scrollToCoords(this, x, y); }),\n      getScrollInfo: function() {\n        var scroller = this.display.scroller;\n        return {left: scroller.scrollLeft, top: scroller.scrollTop,\n                height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\n                width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\n                clientHeight: displayHeight(this), clientWidth: displayWidth(this)}\n      },\n\n      scrollIntoView: methodOp(function(range$$1, margin) {\n        if (range$$1 == null) {\n          range$$1 = {from: this.doc.sel.primary().head, to: null};\n          if (margin == null) { margin = this.options.cursorScrollMargin; }\n        } else if (typeof range$$1 == \"number\") {\n          range$$1 = {from: Pos(range$$1, 0), to: null};\n        } else if (range$$1.from == null) {\n          range$$1 = {from: range$$1, to: null};\n        }\n        if (!range$$1.to) { range$$1.to = range$$1.from; }\n        range$$1.margin = margin || 0;\n\n        if (range$$1.from.line != null) {\n          scrollToRange(this, range$$1);\n        } else {\n          scrollToCoordsRange(this, range$$1.from, range$$1.to, range$$1.margin);\n        }\n      }),\n\n      setSize: methodOp(function(width, height) {\n        var this$1 = this;\n\n        var interpret = function (val) { return typeof val == \"number\" || /^\\d+$/.test(String(val)) ? val + \"px\" : val; };\n        if (width != null) { this.display.wrapper.style.width = interpret(width); }\n        if (height != null) { this.display.wrapper.style.height = interpret(height); }\n        if (this.options.lineWrapping) { clearLineMeasurementCache(this); }\n        var lineNo$$1 = this.display.viewFrom;\n        this.doc.iter(lineNo$$1, this.display.viewTo, function (line) {\n          if (line.widgets) { for (var i = 0; i < line.widgets.length; i++)\n            { if (line.widgets[i].noHScroll) { regLineChange(this$1, lineNo$$1, \"widget\"); break } } }\n          ++lineNo$$1;\n        });\n        this.curOp.forceUpdate = true;\n        signal(this, \"refresh\", this);\n      }),\n\n      operation: function(f){return runInOp(this, f)},\n      startOperation: function(){return startOperation(this)},\n      endOperation: function(){return endOperation(this)},\n\n      refresh: methodOp(function() {\n        var oldHeight = this.display.cachedTextHeight;\n        regChange(this);\n        this.curOp.forceUpdate = true;\n        clearCaches(this);\n        scrollToCoords(this, this.doc.scrollLeft, this.doc.scrollTop);\n        updateGutterSpace(this.display);\n        if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5)\n          { estimateLineHeights(this); }\n        signal(this, \"refresh\", this);\n      }),\n\n      swapDoc: methodOp(function(doc) {\n        var old = this.doc;\n        old.cm = null;\n        // Cancel the current text selection if any (#5821)\n        if (this.state.selectingText) { this.state.selectingText(); }\n        attachDoc(this, doc);\n        clearCaches(this);\n        this.display.input.reset();\n        scrollToCoords(this, doc.scrollLeft, doc.scrollTop);\n        this.curOp.forceScroll = true;\n        signalLater(this, \"swapDoc\", this, old);\n        return old\n      }),\n\n      phrase: function(phraseText) {\n        var phrases = this.options.phrases;\n        return phrases && Object.prototype.hasOwnProperty.call(phrases, phraseText) ? phrases[phraseText] : phraseText\n      },\n\n      getInputField: function(){return this.display.input.getField()},\n      getWrapperElement: function(){return this.display.wrapper},\n      getScrollerElement: function(){return this.display.scroller},\n      getGutterElement: function(){return this.display.gutters}\n    };\n    eventMixin(CodeMirror);\n\n    CodeMirror.registerHelper = function(type, name, value) {\n      if (!helpers.hasOwnProperty(type)) { helpers[type] = CodeMirror[type] = {_global: []}; }\n      helpers[type][name] = value;\n    };\n    CodeMirror.registerGlobalHelper = function(type, name, predicate, value) {\n      CodeMirror.registerHelper(type, name, value);\n      helpers[type]._global.push({pred: predicate, val: value});\n    };\n  }\n\n  // Used for horizontal relative motion. Dir is -1 or 1 (left or\n  // right), unit can be \"char\", \"column\" (like char, but doesn't\n  // cross line boundaries), \"word\" (across next word), or \"group\" (to\n  // the start of next group of word or non-word-non-whitespace\n  // chars). The visually param controls whether, in right-to-left\n  // text, direction 1 means to move towards the next index in the\n  // string, or towards the character to the right of the current\n  // position. The resulting position will have a hitSide=true\n  // property if it reached the end of the document.\n  function findPosH(doc, pos, dir, unit, visually) {\n    var oldPos = pos;\n    var origDir = dir;\n    var lineObj = getLine(doc, pos.line);\n    function findNextLine() {\n      var l = pos.line + dir;\n      if (l < doc.first || l >= doc.first + doc.size) { return false }\n      pos = new Pos(l, pos.ch, pos.sticky);\n      return lineObj = getLine(doc, l)\n    }\n    function moveOnce(boundToLine) {\n      var next;\n      if (visually) {\n        next = moveVisually(doc.cm, lineObj, pos, dir);\n      } else {\n        next = moveLogically(lineObj, pos, dir);\n      }\n      if (next == null) {\n        if (!boundToLine && findNextLine())\n          { pos = endOfLine(visually, doc.cm, lineObj, pos.line, dir); }\n        else\n          { return false }\n      } else {\n        pos = next;\n      }\n      return true\n    }\n\n    if (unit == \"char\") {\n      moveOnce();\n    } else if (unit == \"column\") {\n      moveOnce(true);\n    } else if (unit == \"word\" || unit == \"group\") {\n      var sawType = null, group = unit == \"group\";\n      var helper = doc.cm && doc.cm.getHelper(pos, \"wordChars\");\n      for (var first = true;; first = false) {\n        if (dir < 0 && !moveOnce(!first)) { break }\n        var cur = lineObj.text.charAt(pos.ch) || \"\\n\";\n        var type = isWordChar(cur, helper) ? \"w\"\n          : group && cur == \"\\n\" ? \"n\"\n          : !group || /\\s/.test(cur) ? null\n          : \"p\";\n        if (group && !first && !type) { type = \"s\"; }\n        if (sawType && sawType != type) {\n          if (dir < 0) {dir = 1; moveOnce(); pos.sticky = \"after\";}\n          break\n        }\n\n        if (type) { sawType = type; }\n        if (dir > 0 && !moveOnce(!first)) { break }\n      }\n    }\n    var result = skipAtomic(doc, pos, oldPos, origDir, true);\n    if (equalCursorPos(oldPos, result)) { result.hitSide = true; }\n    return result\n  }\n\n  // For relative vertical movement. Dir may be -1 or 1. Unit can be\n  // \"page\" or \"line\". The resulting position will have a hitSide=true\n  // property if it reached the end of the document.\n  function findPosV(cm, pos, dir, unit) {\n    var doc = cm.doc, x = pos.left, y;\n    if (unit == \"page\") {\n      var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);\n      var moveAmount = Math.max(pageSize - .5 * textHeight(cm.display), 3);\n      y = (dir > 0 ? pos.bottom : pos.top) + dir * moveAmount;\n\n    } else if (unit == \"line\") {\n      y = dir > 0 ? pos.bottom + 3 : pos.top - 3;\n    }\n    var target;\n    for (;;) {\n      target = coordsChar(cm, x, y);\n      if (!target.outside) { break }\n      if (dir < 0 ? y <= 0 : y >= doc.height) { target.hitSide = true; break }\n      y += dir * 5;\n    }\n    return target\n  }\n\n  // CONTENTEDITABLE INPUT STYLE\n\n  var ContentEditableInput = function(cm) {\n    this.cm = cm;\n    this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;\n    this.polling = new Delayed();\n    this.composing = null;\n    this.gracePeriod = false;\n    this.readDOMTimeout = null;\n  };\n\n  ContentEditableInput.prototype.init = function (display) {\n      var this$1 = this;\n\n    var input = this, cm = input.cm;\n    var div = input.div = display.lineDiv;\n    disableBrowserMagic(div, cm.options.spellcheck, cm.options.autocorrect, cm.options.autocapitalize);\n\n    on(div, \"paste\", function (e) {\n      if (signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n      // IE doesn't fire input events, so we schedule a read for the pasted content in this way\n      if (ie_version <= 11) { setTimeout(operation(cm, function () { return this$1.updateFromDOM(); }), 20); }\n    });\n\n    on(div, \"compositionstart\", function (e) {\n      this$1.composing = {data: e.data, done: false};\n    });\n    on(div, \"compositionupdate\", function (e) {\n      if (!this$1.composing) { this$1.composing = {data: e.data, done: false}; }\n    });\n    on(div, \"compositionend\", function (e) {\n      if (this$1.composing) {\n        if (e.data != this$1.composing.data) { this$1.readFromDOMSoon(); }\n        this$1.composing.done = true;\n      }\n    });\n\n    on(div, \"touchstart\", function () { return input.forceCompositionEnd(); });\n\n    on(div, \"input\", function () {\n      if (!this$1.composing) { this$1.readFromDOMSoon(); }\n    });\n\n    function onCopyCut(e) {\n      if (signalDOMEvent(cm, e)) { return }\n      if (cm.somethingSelected()) {\n        setLastCopied({lineWise: false, text: cm.getSelections()});\n        if (e.type == \"cut\") { cm.replaceSelection(\"\", null, \"cut\"); }\n      } else if (!cm.options.lineWiseCopyCut) {\n        return\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({lineWise: true, text: ranges.text});\n        if (e.type == \"cut\") {\n          cm.operation(function () {\n            cm.setSelections(ranges.ranges, 0, sel_dontScroll);\n            cm.replaceSelection(\"\", null, \"cut\");\n          });\n        }\n      }\n      if (e.clipboardData) {\n        e.clipboardData.clearData();\n        var content = lastCopied.text.join(\"\\n\");\n        // iOS exposes the clipboard API, but seems to discard content inserted into it\n        e.clipboardData.setData(\"Text\", content);\n        if (e.clipboardData.getData(\"Text\") == content) {\n          e.preventDefault();\n          return\n        }\n      }\n      // Old-fashioned briefly-focus-a-textarea hack\n      var kludge = hiddenTextarea(), te = kludge.firstChild;\n      cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);\n      te.value = lastCopied.text.join(\"\\n\");\n      var hadFocus = document.activeElement;\n      selectInput(te);\n      setTimeout(function () {\n        cm.display.lineSpace.removeChild(kludge);\n        hadFocus.focus();\n        if (hadFocus == div) { input.showPrimarySelection(); }\n      }, 50);\n    }\n    on(div, \"copy\", onCopyCut);\n    on(div, \"cut\", onCopyCut);\n  };\n\n  ContentEditableInput.prototype.prepareSelection = function () {\n    var result = prepareSelection(this.cm, false);\n    result.focus = this.cm.state.focused;\n    return result\n  };\n\n  ContentEditableInput.prototype.showSelection = function (info, takeFocus) {\n    if (!info || !this.cm.display.view.length) { return }\n    if (info.focus || takeFocus) { this.showPrimarySelection(); }\n    this.showMultipleSelections(info);\n  };\n\n  ContentEditableInput.prototype.getSelection = function () {\n    return this.cm.display.wrapper.ownerDocument.getSelection()\n  };\n\n  ContentEditableInput.prototype.showPrimarySelection = function () {\n    var sel = this.getSelection(), cm = this.cm, prim = cm.doc.sel.primary();\n    var from = prim.from(), to = prim.to();\n\n    if (cm.display.viewTo == cm.display.viewFrom || from.line >= cm.display.viewTo || to.line < cm.display.viewFrom) {\n      sel.removeAllRanges();\n      return\n    }\n\n    var curAnchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var curFocus = domToPos(cm, sel.focusNode, sel.focusOffset);\n    if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad &&\n        cmp(minPos(curAnchor, curFocus), from) == 0 &&\n        cmp(maxPos(curAnchor, curFocus), to) == 0)\n      { return }\n\n    var view = cm.display.view;\n    var start = (from.line >= cm.display.viewFrom && posToDOM(cm, from)) ||\n        {node: view[0].measure.map[2], offset: 0};\n    var end = to.line < cm.display.viewTo && posToDOM(cm, to);\n    if (!end) {\n      var measure = view[view.length - 1].measure;\n      var map$$1 = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;\n      end = {node: map$$1[map$$1.length - 1], offset: map$$1[map$$1.length - 2] - map$$1[map$$1.length - 3]};\n    }\n\n    if (!start || !end) {\n      sel.removeAllRanges();\n      return\n    }\n\n    var old = sel.rangeCount && sel.getRangeAt(0), rng;\n    try { rng = range(start.node, start.offset, end.offset, end.node); }\n    catch(e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible\n    if (rng) {\n      if (!gecko && cm.state.focused) {\n        sel.collapse(start.node, start.offset);\n        if (!rng.collapsed) {\n          sel.removeAllRanges();\n          sel.addRange(rng);\n        }\n      } else {\n        sel.removeAllRanges();\n        sel.addRange(rng);\n      }\n      if (old && sel.anchorNode == null) { sel.addRange(old); }\n      else if (gecko) { this.startGracePeriod(); }\n    }\n    this.rememberSelection();\n  };\n\n  ContentEditableInput.prototype.startGracePeriod = function () {\n      var this$1 = this;\n\n    clearTimeout(this.gracePeriod);\n    this.gracePeriod = setTimeout(function () {\n      this$1.gracePeriod = false;\n      if (this$1.selectionChanged())\n        { this$1.cm.operation(function () { return this$1.cm.curOp.selectionChanged = true; }); }\n    }, 20);\n  };\n\n  ContentEditableInput.prototype.showMultipleSelections = function (info) {\n    removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);\n    removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);\n  };\n\n  ContentEditableInput.prototype.rememberSelection = function () {\n    var sel = this.getSelection();\n    this.lastAnchorNode = sel.anchorNode; this.lastAnchorOffset = sel.anchorOffset;\n    this.lastFocusNode = sel.focusNode; this.lastFocusOffset = sel.focusOffset;\n  };\n\n  ContentEditableInput.prototype.selectionInEditor = function () {\n    var sel = this.getSelection();\n    if (!sel.rangeCount) { return false }\n    var node = sel.getRangeAt(0).commonAncestorContainer;\n    return contains(this.div, node)\n  };\n\n  ContentEditableInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\") {\n      if (!this.selectionInEditor())\n        { this.showSelection(this.prepareSelection(), true); }\n      this.div.focus();\n    }\n  };\n  ContentEditableInput.prototype.blur = function () { this.div.blur(); };\n  ContentEditableInput.prototype.getField = function () { return this.div };\n\n  ContentEditableInput.prototype.supportsTouch = function () { return true };\n\n  ContentEditableInput.prototype.receivedFocus = function () {\n    var input = this;\n    if (this.selectionInEditor())\n      { this.pollSelection(); }\n    else\n      { runInOp(this.cm, function () { return input.cm.curOp.selectionChanged = true; }); }\n\n    function poll() {\n      if (input.cm.state.focused) {\n        input.pollSelection();\n        input.polling.set(input.cm.options.pollInterval, poll);\n      }\n    }\n    this.polling.set(this.cm.options.pollInterval, poll);\n  };\n\n  ContentEditableInput.prototype.selectionChanged = function () {\n    var sel = this.getSelection();\n    return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset ||\n      sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset\n  };\n\n  ContentEditableInput.prototype.pollSelection = function () {\n    if (this.readDOMTimeout != null || this.gracePeriod || !this.selectionChanged()) { return }\n    var sel = this.getSelection(), cm = this.cm;\n    // On Android Chrome (version 56, at least), backspacing into an\n    // uneditable block element will put the cursor in that element,\n    // and then, because it's not editable, hide the virtual keyboard.\n    // Because Android doesn't allow us to actually detect backspace\n    // presses in a sane way, this code checks for when that happens\n    // and simulates a backspace press in this case.\n    if (android && chrome && this.cm.display.gutterSpecs.length && isInGutter(sel.anchorNode)) {\n      this.cm.triggerOnKeyDown({type: \"keydown\", keyCode: 8, preventDefault: Math.abs});\n      this.blur();\n      this.focus();\n      return\n    }\n    if (this.composing) { return }\n    this.rememberSelection();\n    var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var head = domToPos(cm, sel.focusNode, sel.focusOffset);\n    if (anchor && head) { runInOp(cm, function () {\n      setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);\n      if (anchor.bad || head.bad) { cm.curOp.selectionChanged = true; }\n    }); }\n  };\n\n  ContentEditableInput.prototype.pollContent = function () {\n    if (this.readDOMTimeout != null) {\n      clearTimeout(this.readDOMTimeout);\n      this.readDOMTimeout = null;\n    }\n\n    var cm = this.cm, display = cm.display, sel = cm.doc.sel.primary();\n    var from = sel.from(), to = sel.to();\n    if (from.ch == 0 && from.line > cm.firstLine())\n      { from = Pos(from.line - 1, getLine(cm.doc, from.line - 1).length); }\n    if (to.ch == getLine(cm.doc, to.line).text.length && to.line < cm.lastLine())\n      { to = Pos(to.line + 1, 0); }\n    if (from.line < display.viewFrom || to.line > display.viewTo - 1) { return false }\n\n    var fromIndex, fromLine, fromNode;\n    if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\n      fromLine = lineNo(display.view[0].line);\n      fromNode = display.view[0].node;\n    } else {\n      fromLine = lineNo(display.view[fromIndex].line);\n      fromNode = display.view[fromIndex - 1].node.nextSibling;\n    }\n    var toIndex = findViewIndex(cm, to.line);\n    var toLine, toNode;\n    if (toIndex == display.view.length - 1) {\n      toLine = display.viewTo - 1;\n      toNode = display.lineDiv.lastChild;\n    } else {\n      toLine = lineNo(display.view[toIndex + 1].line) - 1;\n      toNode = display.view[toIndex + 1].node.previousSibling;\n    }\n\n    if (!fromNode) { return false }\n    var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));\n    var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));\n    while (newText.length > 1 && oldText.length > 1) {\n      if (lst(newText) == lst(oldText)) { newText.pop(); oldText.pop(); toLine--; }\n      else if (newText[0] == oldText[0]) { newText.shift(); oldText.shift(); fromLine++; }\n      else { break }\n    }\n\n    var cutFront = 0, cutEnd = 0;\n    var newTop = newText[0], oldTop = oldText[0], maxCutFront = Math.min(newTop.length, oldTop.length);\n    while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront))\n      { ++cutFront; }\n    var newBot = lst(newText), oldBot = lst(oldText);\n    var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0),\n                             oldBot.length - (oldText.length == 1 ? cutFront : 0));\n    while (cutEnd < maxCutEnd &&\n           newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1))\n      { ++cutEnd; }\n    // Try to move start of change to start of selection if ambiguous\n    if (newText.length == 1 && oldText.length == 1 && fromLine == from.line) {\n      while (cutFront && cutFront > from.ch &&\n             newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n        cutFront--;\n        cutEnd++;\n      }\n    }\n\n    newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd).replace(/^\\u200b+/, \"\");\n    newText[0] = newText[0].slice(cutFront).replace(/\\u200b+$/, \"\");\n\n    var chFrom = Pos(fromLine, cutFront);\n    var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);\n    if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\n      replaceRange(cm.doc, newText, chFrom, chTo, \"+input\");\n      return true\n    }\n  };\n\n  ContentEditableInput.prototype.ensurePolled = function () {\n    this.forceCompositionEnd();\n  };\n  ContentEditableInput.prototype.reset = function () {\n    this.forceCompositionEnd();\n  };\n  ContentEditableInput.prototype.forceCompositionEnd = function () {\n    if (!this.composing) { return }\n    clearTimeout(this.readDOMTimeout);\n    this.composing = null;\n    this.updateFromDOM();\n    this.div.blur();\n    this.div.focus();\n  };\n  ContentEditableInput.prototype.readFromDOMSoon = function () {\n      var this$1 = this;\n\n    if (this.readDOMTimeout != null) { return }\n    this.readDOMTimeout = setTimeout(function () {\n      this$1.readDOMTimeout = null;\n      if (this$1.composing) {\n        if (this$1.composing.done) { this$1.composing = null; }\n        else { return }\n      }\n      this$1.updateFromDOM();\n    }, 80);\n  };\n\n  ContentEditableInput.prototype.updateFromDOM = function () {\n      var this$1 = this;\n\n    if (this.cm.isReadOnly() || !this.pollContent())\n      { runInOp(this.cm, function () { return regChange(this$1.cm); }); }\n  };\n\n  ContentEditableInput.prototype.setUneditable = function (node) {\n    node.contentEditable = \"false\";\n  };\n\n  ContentEditableInput.prototype.onKeyPress = function (e) {\n    if (e.charCode == 0 || this.composing) { return }\n    e.preventDefault();\n    if (!this.cm.isReadOnly())\n      { operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0); }\n  };\n\n  ContentEditableInput.prototype.readOnlyChanged = function (val) {\n    this.div.contentEditable = String(val != \"nocursor\");\n  };\n\n  ContentEditableInput.prototype.onContextMenu = function () {};\n  ContentEditableInput.prototype.resetPosition = function () {};\n\n  ContentEditableInput.prototype.needsContentAttribute = true;\n\n  function posToDOM(cm, pos) {\n    var view = findViewForLine(cm, pos.line);\n    if (!view || view.hidden) { return null }\n    var line = getLine(cm.doc, pos.line);\n    var info = mapFromLineView(view, line, pos.line);\n\n    var order = getOrder(line, cm.doc.direction), side = \"left\";\n    if (order) {\n      var partPos = getBidiPartAt(order, pos.ch);\n      side = partPos % 2 ? \"right\" : \"left\";\n    }\n    var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);\n    result.offset = result.collapse == \"right\" ? result.end : result.start;\n    return result\n  }\n\n  function isInGutter(node) {\n    for (var scan = node; scan; scan = scan.parentNode)\n      { if (/CodeMirror-gutter-wrapper/.test(scan.className)) { return true } }\n    return false\n  }\n\n  function badPos(pos, bad) { if (bad) { pos.bad = true; } return pos }\n\n  function domTextBetween(cm, from, to, fromLine, toLine) {\n    var text = \"\", closing = false, lineSep = cm.doc.lineSeparator(), extraLinebreak = false;\n    function recognizeMarker(id) { return function (marker) { return marker.id == id; } }\n    function close() {\n      if (closing) {\n        text += lineSep;\n        if (extraLinebreak) { text += lineSep; }\n        closing = extraLinebreak = false;\n      }\n    }\n    function addText(str) {\n      if (str) {\n        close();\n        text += str;\n      }\n    }\n    function walk(node) {\n      if (node.nodeType == 1) {\n        var cmText = node.getAttribute(\"cm-text\");\n        if (cmText) {\n          addText(cmText);\n          return\n        }\n        var markerID = node.getAttribute(\"cm-marker\"), range$$1;\n        if (markerID) {\n          var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));\n          if (found.length && (range$$1 = found[0].find(0)))\n            { addText(getBetween(cm.doc, range$$1.from, range$$1.to).join(lineSep)); }\n          return\n        }\n        if (node.getAttribute(\"contenteditable\") == \"false\") { return }\n        var isBlock = /^(pre|div|p|li|table|br)$/i.test(node.nodeName);\n        if (!/^br$/i.test(node.nodeName) && node.textContent.length == 0) { return }\n\n        if (isBlock) { close(); }\n        for (var i = 0; i < node.childNodes.length; i++)\n          { walk(node.childNodes[i]); }\n\n        if (/^(pre|p)$/i.test(node.nodeName)) { extraLinebreak = true; }\n        if (isBlock) { closing = true; }\n      } else if (node.nodeType == 3) {\n        addText(node.nodeValue.replace(/\\u200b/g, \"\").replace(/\\u00a0/g, \" \"));\n      }\n    }\n    for (;;) {\n      walk(from);\n      if (from == to) { break }\n      from = from.nextSibling;\n      extraLinebreak = false;\n    }\n    return text\n  }\n\n  function domToPos(cm, node, offset) {\n    var lineNode;\n    if (node == cm.display.lineDiv) {\n      lineNode = cm.display.lineDiv.childNodes[offset];\n      if (!lineNode) { return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true) }\n      node = null; offset = 0;\n    } else {\n      for (lineNode = node;; lineNode = lineNode.parentNode) {\n        if (!lineNode || lineNode == cm.display.lineDiv) { return null }\n        if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) { break }\n      }\n    }\n    for (var i = 0; i < cm.display.view.length; i++) {\n      var lineView = cm.display.view[i];\n      if (lineView.node == lineNode)\n        { return locateNodeInLineView(lineView, node, offset) }\n    }\n  }\n\n  function locateNodeInLineView(lineView, node, offset) {\n    var wrapper = lineView.text.firstChild, bad = false;\n    if (!node || !contains(wrapper, node)) { return badPos(Pos(lineNo(lineView.line), 0), true) }\n    if (node == wrapper) {\n      bad = true;\n      node = wrapper.childNodes[offset];\n      offset = 0;\n      if (!node) {\n        var line = lineView.rest ? lst(lineView.rest) : lineView.line;\n        return badPos(Pos(lineNo(line), line.text.length), bad)\n      }\n    }\n\n    var textNode = node.nodeType == 3 ? node : null, topNode = node;\n    if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\n      textNode = node.firstChild;\n      if (offset) { offset = textNode.nodeValue.length; }\n    }\n    while (topNode.parentNode != wrapper) { topNode = topNode.parentNode; }\n    var measure = lineView.measure, maps = measure.maps;\n\n    function find(textNode, topNode, offset) {\n      for (var i = -1; i < (maps ? maps.length : 0); i++) {\n        var map$$1 = i < 0 ? measure.map : maps[i];\n        for (var j = 0; j < map$$1.length; j += 3) {\n          var curNode = map$$1[j + 2];\n          if (curNode == textNode || curNode == topNode) {\n            var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);\n            var ch = map$$1[j] + offset;\n            if (offset < 0 || curNode != textNode) { ch = map$$1[j + (offset ? 1 : 0)]; }\n            return Pos(line, ch)\n          }\n        }\n      }\n    }\n    var found = find(textNode, topNode, offset);\n    if (found) { return badPos(found, bad) }\n\n    // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems\n    for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\n      found = find(after, after.firstChild, 0);\n      if (found)\n        { return badPos(Pos(found.line, found.ch - dist), bad) }\n      else\n        { dist += after.textContent.length; }\n    }\n    for (var before = topNode.previousSibling, dist$1 = offset; before; before = before.previousSibling) {\n      found = find(before, before.firstChild, -1);\n      if (found)\n        { return badPos(Pos(found.line, found.ch + dist$1), bad) }\n      else\n        { dist$1 += before.textContent.length; }\n    }\n  }\n\n  // TEXTAREA INPUT STYLE\n\n  var TextareaInput = function(cm) {\n    this.cm = cm;\n    // See input.poll and input.reset\n    this.prevInput = \"\";\n\n    // Flag that indicates whether we expect input to appear real soon\n    // now (after some event like 'keypress' or 'input') and are\n    // polling intensively.\n    this.pollingFast = false;\n    // Self-resetting timeout for the poller\n    this.polling = new Delayed();\n    // Used to work around IE issue with selection being forgotten when focus moves away from textarea\n    this.hasSelection = false;\n    this.composing = null;\n  };\n\n  TextareaInput.prototype.init = function (display) {\n      var this$1 = this;\n\n    var input = this, cm = this.cm;\n    this.createField(display);\n    var te = this.textarea;\n\n    display.wrapper.insertBefore(this.wrapper, display.wrapper.firstChild);\n\n    // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)\n    if (ios) { te.style.width = \"0px\"; }\n\n    on(te, \"input\", function () {\n      if (ie && ie_version >= 9 && this$1.hasSelection) { this$1.hasSelection = null; }\n      input.poll();\n    });\n\n    on(te, \"paste\", function (e) {\n      if (signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n\n      cm.state.pasteIncoming = +new Date;\n      input.fastPoll();\n    });\n\n    function prepareCopyCut(e) {\n      if (signalDOMEvent(cm, e)) { return }\n      if (cm.somethingSelected()) {\n        setLastCopied({lineWise: false, text: cm.getSelections()});\n      } else if (!cm.options.lineWiseCopyCut) {\n        return\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({lineWise: true, text: ranges.text});\n        if (e.type == \"cut\") {\n          cm.setSelections(ranges.ranges, null, sel_dontScroll);\n        } else {\n          input.prevInput = \"\";\n          te.value = ranges.text.join(\"\\n\");\n          selectInput(te);\n        }\n      }\n      if (e.type == \"cut\") { cm.state.cutIncoming = +new Date; }\n    }\n    on(te, \"cut\", prepareCopyCut);\n    on(te, \"copy\", prepareCopyCut);\n\n    on(display.scroller, \"paste\", function (e) {\n      if (eventInWidget(display, e) || signalDOMEvent(cm, e)) { return }\n      if (!te.dispatchEvent) {\n        cm.state.pasteIncoming = +new Date;\n        input.focus();\n        return\n      }\n\n      // Pass the `paste` event to the textarea so it's handled by its event listener.\n      var event = new Event(\"paste\");\n      event.clipboardData = e.clipboardData;\n      te.dispatchEvent(event);\n    });\n\n    // Prevent normal selection in the editor (we handle our own)\n    on(display.lineSpace, \"selectstart\", function (e) {\n      if (!eventInWidget(display, e)) { e_preventDefault(e); }\n    });\n\n    on(te, \"compositionstart\", function () {\n      var start = cm.getCursor(\"from\");\n      if (input.composing) { input.composing.range.clear(); }\n      input.composing = {\n        start: start,\n        range: cm.markText(start, cm.getCursor(\"to\"), {className: \"CodeMirror-composing\"})\n      };\n    });\n    on(te, \"compositionend\", function () {\n      if (input.composing) {\n        input.poll();\n        input.composing.range.clear();\n        input.composing = null;\n      }\n    });\n  };\n\n  TextareaInput.prototype.createField = function (_display) {\n    // Wraps and hides input textarea\n    this.wrapper = hiddenTextarea();\n    // The semihidden textarea that is focused when the editor is\n    // focused, and receives input.\n    this.textarea = this.wrapper.firstChild;\n  };\n\n  TextareaInput.prototype.prepareSelection = function () {\n    // Redraw the selection and/or cursor\n    var cm = this.cm, display = cm.display, doc = cm.doc;\n    var result = prepareSelection(cm);\n\n    // Move the hidden textarea near the cursor to prevent scrolling artifacts\n    if (cm.options.moveInputWithCursor) {\n      var headPos = cursorCoords(cm, doc.sel.primary().head, \"div\");\n      var wrapOff = display.wrapper.getBoundingClientRect(), lineOff = display.lineDiv.getBoundingClientRect();\n      result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10,\n                                          headPos.top + lineOff.top - wrapOff.top));\n      result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10,\n                                           headPos.left + lineOff.left - wrapOff.left));\n    }\n\n    return result\n  };\n\n  TextareaInput.prototype.showSelection = function (drawn) {\n    var cm = this.cm, display = cm.display;\n    removeChildrenAndAdd(display.cursorDiv, drawn.cursors);\n    removeChildrenAndAdd(display.selectionDiv, drawn.selection);\n    if (drawn.teTop != null) {\n      this.wrapper.style.top = drawn.teTop + \"px\";\n      this.wrapper.style.left = drawn.teLeft + \"px\";\n    }\n  };\n\n  // Reset the input to correspond to the selection (or to be empty,\n  // when not typing and nothing is selected)\n  TextareaInput.prototype.reset = function (typing) {\n    if (this.contextMenuPending || this.composing) { return }\n    var cm = this.cm;\n    if (cm.somethingSelected()) {\n      this.prevInput = \"\";\n      var content = cm.getSelection();\n      this.textarea.value = content;\n      if (cm.state.focused) { selectInput(this.textarea); }\n      if (ie && ie_version >= 9) { this.hasSelection = content; }\n    } else if (!typing) {\n      this.prevInput = this.textarea.value = \"\";\n      if (ie && ie_version >= 9) { this.hasSelection = null; }\n    }\n  };\n\n  TextareaInput.prototype.getField = function () { return this.textarea };\n\n  TextareaInput.prototype.supportsTouch = function () { return false };\n\n  TextareaInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\" && (!mobile || activeElt() != this.textarea)) {\n      try { this.textarea.focus(); }\n      catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM\n    }\n  };\n\n  TextareaInput.prototype.blur = function () { this.textarea.blur(); };\n\n  TextareaInput.prototype.resetPosition = function () {\n    this.wrapper.style.top = this.wrapper.style.left = 0;\n  };\n\n  TextareaInput.prototype.receivedFocus = function () { this.slowPoll(); };\n\n  // Poll for input changes, using the normal rate of polling. This\n  // runs as long as the editor is focused.\n  TextareaInput.prototype.slowPoll = function () {\n      var this$1 = this;\n\n    if (this.pollingFast) { return }\n    this.polling.set(this.cm.options.pollInterval, function () {\n      this$1.poll();\n      if (this$1.cm.state.focused) { this$1.slowPoll(); }\n    });\n  };\n\n  // When an event has just come in that is likely to add or change\n  // something in the input textarea, we poll faster, to ensure that\n  // the change appears on the screen quickly.\n  TextareaInput.prototype.fastPoll = function () {\n    var missed = false, input = this;\n    input.pollingFast = true;\n    function p() {\n      var changed = input.poll();\n      if (!changed && !missed) {missed = true; input.polling.set(60, p);}\n      else {input.pollingFast = false; input.slowPoll();}\n    }\n    input.polling.set(20, p);\n  };\n\n  // Read input from the textarea, and update the document to match.\n  // When something is selected, it is present in the textarea, and\n  // selected (unless it is huge, in which case a placeholder is\n  // used). When nothing is selected, the cursor sits after previously\n  // seen text (can be empty), which is stored in prevInput (we must\n  // not reset the textarea when typing, because that breaks IME).\n  TextareaInput.prototype.poll = function () {\n      var this$1 = this;\n\n    var cm = this.cm, input = this.textarea, prevInput = this.prevInput;\n    // Since this is called a *lot*, try to bail out as cheaply as\n    // possible when it is clear that nothing happened. hasSelection\n    // will be the case when there is a lot of text in the textarea,\n    // in which case reading its value would be expensive.\n    if (this.contextMenuPending || !cm.state.focused ||\n        (hasSelection(input) && !prevInput && !this.composing) ||\n        cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq)\n      { return false }\n\n    var text = input.value;\n    // If nothing changed, bail.\n    if (text == prevInput && !cm.somethingSelected()) { return false }\n    // Work around nonsensical selection resetting in IE9/10, and\n    // inexplicable appearance of private area unicode characters on\n    // some key combos in Mac (#2689).\n    if (ie && ie_version >= 9 && this.hasSelection === text ||\n        mac && /[\\uf700-\\uf7ff]/.test(text)) {\n      cm.display.input.reset();\n      return false\n    }\n\n    if (cm.doc.sel == cm.display.selForContextMenu) {\n      var first = text.charCodeAt(0);\n      if (first == 0x200b && !prevInput) { prevInput = \"\\u200b\"; }\n      if (first == 0x21da) { this.reset(); return this.cm.execCommand(\"undo\") }\n    }\n    // Find the part of the input that is actually new\n    var same = 0, l = Math.min(prevInput.length, text.length);\n    while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) { ++same; }\n\n    runInOp(cm, function () {\n      applyTextInput(cm, text.slice(same), prevInput.length - same,\n                     null, this$1.composing ? \"*compose\" : null);\n\n      // Don't leave long text in the textarea, since it makes further polling slow\n      if (text.length > 1000 || text.indexOf(\"\\n\") > -1) { input.value = this$1.prevInput = \"\"; }\n      else { this$1.prevInput = text; }\n\n      if (this$1.composing) {\n        this$1.composing.range.clear();\n        this$1.composing.range = cm.markText(this$1.composing.start, cm.getCursor(\"to\"),\n                                           {className: \"CodeMirror-composing\"});\n      }\n    });\n    return true\n  };\n\n  TextareaInput.prototype.ensurePolled = function () {\n    if (this.pollingFast && this.poll()) { this.pollingFast = false; }\n  };\n\n  TextareaInput.prototype.onKeyPress = function () {\n    if (ie && ie_version >= 9) { this.hasSelection = null; }\n    this.fastPoll();\n  };\n\n  TextareaInput.prototype.onContextMenu = function (e) {\n    var input = this, cm = input.cm, display = cm.display, te = input.textarea;\n    if (input.contextMenuPending) { input.contextMenuPending(); }\n    var pos = posFromMouse(cm, e), scrollPos = display.scroller.scrollTop;\n    if (!pos || presto) { return } // Opera is difficult.\n\n    // Reset the current text selection only if the click is done outside of the selection\n    // and 'resetSelectionOnContextMenu' option is true.\n    var reset = cm.options.resetSelectionOnContextMenu;\n    if (reset && cm.doc.sel.contains(pos) == -1)\n      { operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll); }\n\n    var oldCSS = te.style.cssText, oldWrapperCSS = input.wrapper.style.cssText;\n    var wrapperBox = input.wrapper.offsetParent.getBoundingClientRect();\n    input.wrapper.style.cssText = \"position: static\";\n    te.style.cssText = \"position: absolute; width: 30px; height: 30px;\\n      top: \" + (e.clientY - wrapperBox.top - 5) + \"px; left: \" + (e.clientX - wrapperBox.left - 5) + \"px;\\n      z-index: 1000; background: \" + (ie ? \"rgba(255, 255, 255, .05)\" : \"transparent\") + \";\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\";\n    var oldScrollY;\n    if (webkit) { oldScrollY = window.scrollY; } // Work around Chrome issue (#2712)\n    display.input.focus();\n    if (webkit) { window.scrollTo(null, oldScrollY); }\n    display.input.reset();\n    // Adds \"Select all\" to context menu in FF\n    if (!cm.somethingSelected()) { te.value = input.prevInput = \" \"; }\n    input.contextMenuPending = rehide;\n    display.selForContextMenu = cm.doc.sel;\n    clearTimeout(display.detectingSelectAll);\n\n    // Select-all will be greyed out if there's nothing to select, so\n    // this adds a zero-width space so that we can later check whether\n    // it got selected.\n    function prepareSelectAllHack() {\n      if (te.selectionStart != null) {\n        var selected = cm.somethingSelected();\n        var extval = \"\\u200b\" + (selected ? te.value : \"\");\n        te.value = \"\\u21da\"; // Used to catch context-menu undo\n        te.value = extval;\n        input.prevInput = selected ? \"\" : \"\\u200b\";\n        te.selectionStart = 1; te.selectionEnd = extval.length;\n        // Re-set this, in case some other handler touched the\n        // selection in the meantime.\n        display.selForContextMenu = cm.doc.sel;\n      }\n    }\n    function rehide() {\n      if (input.contextMenuPending != rehide) { return }\n      input.contextMenuPending = false;\n      input.wrapper.style.cssText = oldWrapperCSS;\n      te.style.cssText = oldCSS;\n      if (ie && ie_version < 9) { display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos); }\n\n      // Try to detect the user choosing select-all\n      if (te.selectionStart != null) {\n        if (!ie || (ie && ie_version < 9)) { prepareSelectAllHack(); }\n        var i = 0, poll = function () {\n          if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 &&\n              te.selectionEnd > 0 && input.prevInput == \"\\u200b\") {\n            operation(cm, selectAll)(cm);\n          } else if (i++ < 10) {\n            display.detectingSelectAll = setTimeout(poll, 500);\n          } else {\n            display.selForContextMenu = null;\n            display.input.reset();\n          }\n        };\n        display.detectingSelectAll = setTimeout(poll, 200);\n      }\n    }\n\n    if (ie && ie_version >= 9) { prepareSelectAllHack(); }\n    if (captureRightClick) {\n      e_stop(e);\n      var mouseup = function () {\n        off(window, \"mouseup\", mouseup);\n        setTimeout(rehide, 20);\n      };\n      on(window, \"mouseup\", mouseup);\n    } else {\n      setTimeout(rehide, 50);\n    }\n  };\n\n  TextareaInput.prototype.readOnlyChanged = function (val) {\n    if (!val) { this.reset(); }\n    this.textarea.disabled = val == \"nocursor\";\n  };\n\n  TextareaInput.prototype.setUneditable = function () {};\n\n  TextareaInput.prototype.needsContentAttribute = false;\n\n  function fromTextArea(textarea, options) {\n    options = options ? copyObj(options) : {};\n    options.value = textarea.value;\n    if (!options.tabindex && textarea.tabIndex)\n      { options.tabindex = textarea.tabIndex; }\n    if (!options.placeholder && textarea.placeholder)\n      { options.placeholder = textarea.placeholder; }\n    // Set autofocus to true if this textarea is focused, or if it has\n    // autofocus and no other element is focused.\n    if (options.autofocus == null) {\n      var hasFocus = activeElt();\n      options.autofocus = hasFocus == textarea ||\n        textarea.getAttribute(\"autofocus\") != null && hasFocus == document.body;\n    }\n\n    function save() {textarea.value = cm.getValue();}\n\n    var realSubmit;\n    if (textarea.form) {\n      on(textarea.form, \"submit\", save);\n      // Deplorable hack to make the submit method do the right thing.\n      if (!options.leaveSubmitMethodAlone) {\n        var form = textarea.form;\n        realSubmit = form.submit;\n        try {\n          var wrappedSubmit = form.submit = function () {\n            save();\n            form.submit = realSubmit;\n            form.submit();\n            form.submit = wrappedSubmit;\n          };\n        } catch(e) {}\n      }\n    }\n\n    options.finishInit = function (cm) {\n      cm.save = save;\n      cm.getTextArea = function () { return textarea; };\n      cm.toTextArea = function () {\n        cm.toTextArea = isNaN; // Prevent this from being ran twice\n        save();\n        textarea.parentNode.removeChild(cm.getWrapperElement());\n        textarea.style.display = \"\";\n        if (textarea.form) {\n          off(textarea.form, \"submit\", save);\n          if (!options.leaveSubmitMethodAlone && typeof textarea.form.submit == \"function\")\n            { textarea.form.submit = realSubmit; }\n        }\n      };\n    };\n\n    textarea.style.display = \"none\";\n    var cm = CodeMirror(function (node) { return textarea.parentNode.insertBefore(node, textarea.nextSibling); },\n      options);\n    return cm\n  }\n\n  function addLegacyProps(CodeMirror) {\n    CodeMirror.off = off;\n    CodeMirror.on = on;\n    CodeMirror.wheelEventPixels = wheelEventPixels;\n    CodeMirror.Doc = Doc;\n    CodeMirror.splitLines = splitLinesAuto;\n    CodeMirror.countColumn = countColumn;\n    CodeMirror.findColumn = findColumn;\n    CodeMirror.isWordChar = isWordCharBasic;\n    CodeMirror.Pass = Pass;\n    CodeMirror.signal = signal;\n    CodeMirror.Line = Line;\n    CodeMirror.changeEnd = changeEnd;\n    CodeMirror.scrollbarModel = scrollbarModel;\n    CodeMirror.Pos = Pos;\n    CodeMirror.cmpPos = cmp;\n    CodeMirror.modes = modes;\n    CodeMirror.mimeModes = mimeModes;\n    CodeMirror.resolveMode = resolveMode;\n    CodeMirror.getMode = getMode;\n    CodeMirror.modeExtensions = modeExtensions;\n    CodeMirror.extendMode = extendMode;\n    CodeMirror.copyState = copyState;\n    CodeMirror.startState = startState;\n    CodeMirror.innerMode = innerMode;\n    CodeMirror.commands = commands;\n    CodeMirror.keyMap = keyMap;\n    CodeMirror.keyName = keyName;\n    CodeMirror.isModifierKey = isModifierKey;\n    CodeMirror.lookupKey = lookupKey;\n    CodeMirror.normalizeKeyMap = normalizeKeyMap;\n    CodeMirror.StringStream = StringStream;\n    CodeMirror.SharedTextMarker = SharedTextMarker;\n    CodeMirror.TextMarker = TextMarker;\n    CodeMirror.LineWidget = LineWidget;\n    CodeMirror.e_preventDefault = e_preventDefault;\n    CodeMirror.e_stopPropagation = e_stopPropagation;\n    CodeMirror.e_stop = e_stop;\n    CodeMirror.addClass = addClass;\n    CodeMirror.contains = contains;\n    CodeMirror.rmClass = rmClass;\n    CodeMirror.keyNames = keyNames;\n  }\n\n  // EDITOR CONSTRUCTOR\n\n  defineOptions(CodeMirror);\n\n  addEditorMethods(CodeMirror);\n\n  // Set up methods on CodeMirror's prototype to redirect to the editor's document.\n  var dontDelegate = \"iter insert remove copy getEditor constructor\".split(\" \");\n  for (var prop in Doc.prototype) { if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0)\n    { CodeMirror.prototype[prop] = (function(method) {\n      return function() {return method.apply(this.doc, arguments)}\n    })(Doc.prototype[prop]); } }\n\n  eventMixin(Doc);\n  CodeMirror.inputStyles = {\"textarea\": TextareaInput, \"contenteditable\": ContentEditableInput};\n\n  // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n  CodeMirror.defineMode = function(name/*, mode, …*/) {\n    if (!CodeMirror.defaults.mode && name != \"null\") { CodeMirror.defaults.mode = name; }\n    defineMode.apply(this, arguments);\n  };\n\n  CodeMirror.defineMIME = defineMIME;\n\n  // Minimal default mode.\n  CodeMirror.defineMode(\"null\", function () { return ({token: function (stream) { return stream.skipToEnd(); }}); });\n  CodeMirror.defineMIME(\"text/plain\", \"null\");\n\n  // EXTENSIONS\n\n  CodeMirror.defineExtension = function (name, func) {\n    CodeMirror.prototype[name] = func;\n  };\n  CodeMirror.defineDocExtension = function (name, func) {\n    Doc.prototype[name] = func;\n  };\n\n  CodeMirror.fromTextArea = fromTextArea;\n\n  addLegacyProps(CodeMirror);\n\n  CodeMirror.version = \"5.49.2\";\n\n  return CodeMirror;\n\n})));\n"],"sourceRoot":""}